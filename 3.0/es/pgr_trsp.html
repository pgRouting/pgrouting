<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="es">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>pgr_trsp - Camino más corto con giros restringidos (TRSP) &#8212; pgRouting Manual (3.0)</title>
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
<script src="_static/page_history.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/translations.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Índice" href="genindex.html" />
    <link rel="search" title="Búsqueda" href="search.html" />
    <link rel="next" title="Costo - Categoría" href="cost-category.html" />
    <link rel="prev" title="Rutas más cortas K - Categoría" href="KSP-category.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html"><span><img src="_static/pgrouting.png"></span>
          pgRouting</a>
        <span class="navbar-text navbar-version pull-left"><b>v3.0.6</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="pgRouting-introduction.html">Introducción</a></li>
<li class="toctree-l1"><a class="reference internal" href="pgRouting-installation.html">Instalación</a></li>
<li class="toctree-l1"><a class="reference internal" href="support.html">Soporte</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="sampledata.html">Datos Muestra</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="pgRouting-concepts.html">Conceptos de pgRouting</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="pgr_version.html">pgr_version</a></li>
<li class="toctree-l1"><a class="reference internal" href="pgr_full_version.html">pgr_full_version</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="routingFunctions.html">Familias de Funciones</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="proposed.html">Funciones propuestas</a></li>
<li class="toctree-l1"><a class="reference internal" href="experimental.html">Funciones Experimentales</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="release_notes.html">Notas de versión</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">pgr_trsp - Camino más corto con giros restringidos (TRSP)</a><ul>
<li><a class="reference internal" href="#description">Descripción</a></li>
<li><a class="reference internal" href="#support-for-vias">Soporte para Vias</a></li>
<li><a class="reference internal" href="#additional-examples">Ejemplos Adicionales</a></li>
<li><a class="reference internal" href="#known-issues">Problemas conocidos</a><ul>
<li><a class="reference internal" href="#introduction">Introducción</a></li>
<li><a class="reference internal" href="#the-restrictions">Las restricciones</a></li>
<li><a class="reference internal" href="#the-vertices-signature-version">La versión de la firma «Vértices»</a><ul>
<li><a class="reference internal" href="#different-ways-to-represent-no-path-found">Diferentes formas de representar “ninguna ruta encontrada”</a></li>
<li><a class="reference internal" href="#routing-from-to-same-location">Ruteo desde/hacia la misma ubicación</a></li>
<li><a class="reference internal" href="#user-contradictions">Contradicciones de usuarios</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-edges-signature-version">La versión de firma «Edges»</a><ul>
<li><a class="reference internal" href="#id1">Diferentes formas de representar “ninguna ruta encontrada”</a></li>
<li><a class="reference internal" href="#paths-with-equal-number-of-vertices-and-edges">Rutas con igual número de vértices y aristas</a></li>
<li><a class="reference internal" href="#id2">Ruteo desde/hacia la misma ubicación</a></li>
<li><a class="reference internal" href="#id3">Contradicciones de usuarios</a></li>
<li><a class="reference internal" href="#using-a-points-of-interest-table">Uso de una tabla de puntos de interés</a></li>
<li><a class="reference internal" href="#routing-from-a-vertex-to-a-point">Ruteo desde un vértice a un punto</a></li>
</ul>
</li>
<li><a class="reference internal" href="#prototypes">Prototipos</a></li>
</ul>
</li>
<li><a class="reference internal" href="#see-also">Ver también</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="KSP-category.html" title="Previous Chapter: Rutas más cortas K - Categoría"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Rutas más cor...</span>
    </a>
  </li>
  <li>
    <a href="cost-category.html" title="Next Chapter: Costo - Categoría"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Costo - Categoría &raquo;</span>
    </a>
  </li>
              
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
 <div class="line"><br/></div> <script> document.write(get_history("pgr_trsp","es")); </script>
      
  <div class="section" id="pgr-trsp-turn-restriction-shortest-path-trsp">
<h1>pgr_trsp - Camino más corto con giros restringidos (TRSP)<a class="headerlink" href="#pgr-trsp-turn-restriction-shortest-path-trsp" title="Enlazar permanentemente con este título">¶</a></h1>
<p id="index-0"><code class="docutils literal notranslate"><span class="pre">pgr_trsp</span></code> — Devuelve el camino más corto con soporte para restricciones de giros</p>
<p class="rubric">Disponibilidad</p>
<ul class="simple">
<li>Versión 2.1.0<ul>
<li>Nuevo <em>Via</em> <strong>prototypes</strong><ul>
<li>pgr_trspViaVertices</li>
<li>pgr_trspViaEdges</li>
</ul>
</li>
</ul>
</li>
<li>Versión 2.0.0<ul>
<li>Función <strong>oficial</strong></li>
</ul>
</li>
</ul>
<p class="rubric">Soporte</p>
<ul class="simple">
</ul>
<div class="section" id="description">
<h2>Descripción<a class="headerlink" href="#description" title="Enlazar permanentemente con este título">¶</a></h2>
<p>La ruta más corta restringida por giro (TRSP) es un algoritmo de ruta más corta que opcionalmente puede tener en cuenta restricciones de giro complicadas como las que se encuentran en las redes de carreteras del mundo real. En cuanto al rendimiento, es casi tan rápido como la búsqueda A* pero tiene muchas características adicionales, como funcionar con bordes en lugar de los nodos de la red. Devuelve un conjunto de filas (seq, id1, id2, cost) o (seq, id1, id2, id3, cost) que forman una ruta.</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">pgr_trsp</span><span class="p">(</span><span class="k">sql</span> <span class="nb">text</span><span class="p">,</span> <span class="k">source</span> <span class="nb">integer</span><span class="p">,</span> <span class="n">target</span> <span class="nb">integer</span><span class="p">,</span>
                  <span class="n">directed</span> <span class="nb">boolean</span><span class="p">,</span> <span class="n">has_rcost</span> <span class="nb">boolean</span> <span class="p">[,</span><span class="n">restrict_sql</span> <span class="nb">text</span><span class="p">]);</span>
<span class="k">RETURNS</span> <span class="k">SETOF</span> <span class="p">(</span><span class="n">seq</span><span class="p">,</span> <span class="n">id1</span><span class="p">,</span> <span class="n">id2</span><span class="p">,</span> <span class="n">cost</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">pgr_trsp</span><span class="p">(</span><span class="k">sql</span> <span class="nb">text</span><span class="p">,</span> <span class="n">source_edge</span> <span class="nb">integer</span><span class="p">,</span> <span class="n">source_pos</span> <span class="n">float8</span><span class="p">,</span>
                      <span class="n">target_edge</span> <span class="nb">integer</span><span class="p">,</span> <span class="n">target_pos</span> <span class="n">float8</span><span class="p">,</span>
                  <span class="n">directed</span> <span class="nb">boolean</span><span class="p">,</span> <span class="n">has_rcost</span> <span class="nb">boolean</span> <span class="p">[,</span><span class="n">restrict_sql</span> <span class="nb">text</span><span class="p">]);</span>
<span class="k">RETURNS</span> <span class="k">SETOF</span> <span class="p">(</span><span class="n">seq</span><span class="p">,</span> <span class="n">id1</span><span class="p">,</span> <span class="n">id2</span><span class="p">,</span> <span class="n">cost</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">pgr_trspViaVertices</span><span class="p">(</span><span class="k">sql</span> <span class="nb">text</span><span class="p">,</span> <span class="n">vids</span> <span class="nb">integer</span><span class="p">[],</span>
                  <span class="n">directed</span> <span class="nb">boolean</span><span class="p">,</span> <span class="n">has_rcost</span> <span class="nb">boolean</span>
                  <span class="p">[,</span> <span class="n">turn_restrict_sql</span> <span class="nb">text</span><span class="p">]);</span>
<span class="k">RETURNS</span> <span class="k">SETOF</span> <span class="p">(</span><span class="n">seq</span><span class="p">,</span> <span class="n">id1</span><span class="p">,</span> <span class="n">id2</span><span class="p">,</span> <span class="n">id3</span><span class="p">,</span> <span class="n">cost</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">pgr_trspViaEdges</span><span class="p">(</span><span class="k">sql</span> <span class="nb">text</span><span class="p">,</span> <span class="n">eids</span> <span class="nb">integer</span><span class="p">[],</span> <span class="n">pcts</span> <span class="n">float8</span><span class="p">[],</span>
                  <span class="n">directed</span> <span class="nb">boolean</span><span class="p">,</span> <span class="n">has_rcost</span> <span class="nb">boolean</span>
                  <span class="p">[,</span> <span class="n">turn_restrict_sql</span> <span class="nb">text</span><span class="p">]);</span>
<span class="k">RETURNS</span> <span class="k">SETOF</span> <span class="p">(</span><span class="n">seq</span><span class="p">,</span> <span class="n">id1</span><span class="p">,</span> <span class="n">id2</span><span class="p">,</span> <span class="n">id3</span><span class="p">,</span> <span class="n">cost</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Las características principales son:</strong></p>
<p>El algoritmo de la ruta más corta restringida por giro (TRSP) es similar a la estrella fugaz en que puede especificar restricciones de giro.</p>
<p>La configuración de TRSP es en su mayoría la misma que <a class="reference internal" href="pgr_dijkstra.html"><span class="doc">Dijkstra shortest path</span></a> con la adición de una tabla de restricción de giro opcional. Esto proporciona una manera fácil de agregar restricciones de giro a una red de carreteras colocándolas en una tabla separada.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">sql:</th><td class="field-body"><p class="first">una consulta SQL que debe proporcionar un conjunto de registros con los siguientes campos:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="n">id</span><span class="p">,</span> <span class="k">source</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">cost</span><span class="p">,</span> <span class="p">[,</span><span class="n">reverse_cost</span><span class="p">]</span> <span class="k">FROM</span> <span class="n">edge_table</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">id:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">int4</span></code> Identificador del borde</td>
</tr>
<tr class="field-even field"><th class="field-name">source:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">int4</span></code> Identificador del vértice inicial del borde</td>
</tr>
<tr class="field-odd field"><th class="field-name">target:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">int4</span></code> Identificador del vértice final del borde</td>
</tr>
<tr class="field-even field"><th class="field-name">Costo:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">float8</span></code>  Costo del recorrido sobre el borde. Un costo negativo evitará que el borde sea insertado en el gráfico.</td>
</tr>
<tr class="field-odd field"><th class="field-name">reverse_cost:</th><td class="field-body">(opcional) El costo para el recorrido inverso del borde. Esto sólo se utiliza cuando los parámetros <code class="docutils literal notranslate"><span class="pre">directed</span></code> y <code class="docutils literal notranslate"><span class="pre">has_rcost</span></code>  son <code class="docutils literal notranslate"><span class="pre">True</span></code> (ver el comentario anterior sobre los costos negativos).</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="field-even field"><th class="field-name">source:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">int4</span></code> <strong>identificador</strong> del nodo de partida</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">target:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">int4</span></code> <strong>identificador</strong> del nodo de llegada</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">dirigido:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">true</span></code> Si la gráfica es direccionada</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">has_rcost:</th><td class="field-body"><p class="first">Si  es <code class="docutils literal notranslate"><span class="pre">True</span></code>, el campo <code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code>  del conjunto de registros generados se utilizan para el calcular el costo de la travesía del borde en la dirección opuesta.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">restrict_sql:</th><td class="field-body"><p class="first">(opcional) una consulta SQL, que debe proporcionar un conjunto de registros con los siguientes campos:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="n">to_cost</span><span class="p">,</span> <span class="n">target_id</span><span class="p">,</span> <span class="n">via_path</span> <span class="k">FROM</span> <span class="n">restrictions</span>
</pre></div>
</div>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">to_cost:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">float8</span></code> restricción del costo de giro</td>
</tr>
<tr class="field-even field"><th class="field-name">target_id:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">int4</span></code> identificador del borde donde se aplica la restricción</td>
</tr>
<tr class="field-odd field"><th class="field-name">via_path:</th><td class="field-body">Lista de aristas <code class="docutils literal notranslate"><span class="pre">text</span></code> separadas por comas en el orden inverso de <code class="docutils literal notranslate"><span class="pre">rule</span></code></td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p>Otra variante de TRSP que permite especificar el <strong>Identificador del borde</strong> de partida y de llegada junto con una fracción para interpolar la posición:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">source_edge:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">int4</span></code> <strong>identificador del borde</strong> de partida</td>
</tr>
<tr class="field-even field"><th class="field-name">source_pos:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">float8</span></code> fracción de 1 que define la posición del sobre el borde de partida.</td>
</tr>
<tr class="field-odd field"><th class="field-name">target_edge:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">int4</span></code> <strong>Identificador del borde</strong> de llegada</td>
</tr>
<tr class="field-even field"><th class="field-name">target_pos:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">float8</span></code> fracción de 1 que define la posición del sobre el borde de llegada.</td>
</tr>
</tbody>
</table>
<p>Devuelve el conjunto de:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">seq:</th><td class="field-body">Secuencia de registros</td>
</tr>
<tr class="field-even field"><th class="field-name">id1:</th><td class="field-body">Identificador del nodo visitado</td>
</tr>
<tr class="field-odd field"><th class="field-name">id2:</th><td class="field-body">Identificador del borde (<code class="docutils literal notranslate"><span class="pre">-1</span></code> para el ultimo registro)</td>
</tr>
<tr class="field-even field"><th class="field-name">Costo:</th><td class="field-body">costo para atravesar desde el nodo <code class="docutils literal notranslate"><span class="pre">id1</span></code>  usando el borde``id2`` hasta su otro extremo</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="support-for-vias">
<h2>Soporte para Vias<a class="headerlink" href="#support-for-vias" title="Enlazar permanentemente con este título">¶</a></h2>
<div class="admonition warning">
<p class="first admonition-title">Advertencia</p>
<p class="last">Las funciones de Soporte para Vias son prototipos. No se están considerando todos los casos de esquina.</p>
</div>
<p>También tenemos soporte para vias donde puedes generar una ruta de A a B a C, etc. Admitimos ambos métodos por encima de solo pasar un arreglo de vértices y/o un arreglo de aristas y la posición porcentual a lo largo de la arista en dos arreglos.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">sql:</th><td class="field-body"><p class="first">una consulta SQL que debe proporcionar un conjunto de registros con los siguientes campos:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="n">id</span><span class="p">,</span> <span class="k">source</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">cost</span><span class="p">,</span> <span class="p">[,</span><span class="n">reverse_cost</span><span class="p">]</span> <span class="k">FROM</span> <span class="n">edge_table</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">id:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">int4</span></code> Identificador del borde</td>
</tr>
<tr class="field-even field"><th class="field-name">source:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">int4</span></code> Identificador del vértice inicial del borde</td>
</tr>
<tr class="field-odd field"><th class="field-name">target:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">int4</span></code> Identificador del vértice final del borde</td>
</tr>
<tr class="field-even field"><th class="field-name">Costo:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">float8</span></code>  Costo del recorrido sobre el borde. Un costo negativo evitará que el borde sea insertado en el gráfico.</td>
</tr>
<tr class="field-odd field"><th class="field-name">reverse_cost:</th><td class="field-body">(opcional) El costo para el recorrido inverso del borde. Esto sólo se utiliza cuando los parámetros <code class="docutils literal notranslate"><span class="pre">directed</span></code> y <code class="docutils literal notranslate"><span class="pre">has_rcost</span></code>  son <code class="docutils literal notranslate"><span class="pre">True</span></code> (ver el comentario anterior sobre los costos negativos).</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="field-even field"><th class="field-name">vids:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">int4[]</span></code> Un arreglo ordenado de <strong>NODE id</strong> la ruta irá de principio a fin.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">dirigido:</th><td class="field-body"><p class="first"><code class="docutils literal notranslate"><span class="pre">true</span></code> Si la gráfica es direccionada</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">has_rcost:</th><td class="field-body"><p class="first">Si  es <code class="docutils literal notranslate"><span class="pre">True</span></code>, el campo <code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code>  del conjunto de registros generados se utilizan para el calcular el costo de la travesía del borde en la dirección opuesta.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">restrict_sql:</th><td class="field-body"><p class="first">(opcional) una consulta SQL, que debe proporcionar un conjunto de registros con los siguientes campos:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="n">to_cost</span><span class="p">,</span> <span class="n">target_id</span><span class="p">,</span> <span class="n">via_path</span> <span class="k">FROM</span> <span class="n">restrictions</span>
</pre></div>
</div>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">to_cost:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">float8</span></code> restricción del costo de giro</td>
</tr>
<tr class="field-even field"><th class="field-name">target_id:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">int4</span></code> identificador del borde donde se aplica la restricción</td>
</tr>
<tr class="field-odd field"><th class="field-name">via_path:</th><td class="field-body">Lista de aristas `` text`` separadas por comas en el orden inverso de <code class="docutils literal notranslate"><span class="pre">rule</span></code></td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p>Otra variante de TRSP permite especificar <strong>EDGE id</strong> junto con una fracción para interpolar la posición:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">eids:</th><td class="field-body"><code class="docutils literal notranslate"><span class="pre">int4</span></code> Un arreglo ordenado de <strong>EDGE id</strong> que la ruta tiene que atravesar</td>
</tr>
<tr class="field-even field"><th class="field-name">Pct:</th><td class="field-body">`` float8`` Un arreglo de posiciones fraccionarias a lo largo de las respectivas aristasen  <code class="docutils literal notranslate"><span class="pre">eids</span></code>, donde 0.0 es el comienzo de la arista y 1.0 es el final.</td>
</tr>
</tbody>
</table>
<p>Devuelve el conjunto de:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">seq:</th><td class="field-body">Secuencia de registros</td>
</tr>
<tr class="field-even field"><th class="field-name">id1:</th><td class="field-body">Identificador de la ruta</td>
</tr>
<tr class="field-odd field"><th class="field-name">id2:</th><td class="field-body">Identificador del nodo visitado</td>
</tr>
<tr class="field-even field"><th class="field-name">id3:</th><td class="field-body">Identificador del borde (<code class="docutils literal notranslate"><span class="pre">-1</span></code> para el ultimo registro)</td>
</tr>
<tr class="field-odd field"><th class="field-name">Costo:</th><td class="field-body">costo para atravesar desde el nodo <code class="docutils literal notranslate"><span class="pre">id2</span></code>  usando el borde <code class="docutils literal notranslate"><span class="pre">id3</span></code> hasta su otro extremo</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="additional-examples">
<h2>Ejemplos Adicionales<a class="headerlink" href="#additional-examples" title="Enlazar permanentemente con este título">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Ejemplo:</th><td class="field-body">Sin restricción de giros</td>
</tr>
</tbody>
</table>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">pgr_trsp</span><span class="p">(</span>
        <span class="s1">&#39;SELECT id::INTEGER, source::INTEGER, target::INTEGER, cost FROM edge_table&#39;</span><span class="p">,</span>
        <span class="mi">7</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="n">false</span><span class="p">,</span> <span class="n">false</span>
    <span class="p">);</span>
 <span class="n">seq</span> <span class="o">|</span> <span class="n">id1</span> <span class="o">|</span> <span class="n">id2</span> <span class="o">|</span> <span class="n">cost</span>
<span class="o">-----+-----+-----+------</span>
   <span class="mi">0</span> <span class="o">|</span>   <span class="mi">7</span> <span class="o">|</span>   <span class="mi">6</span> <span class="o">|</span>    <span class="mi">1</span>
   <span class="mi">1</span> <span class="o">|</span>   <span class="mi">8</span> <span class="o">|</span>   <span class="mi">7</span> <span class="o">|</span>    <span class="mi">1</span>
   <span class="mi">2</span> <span class="o">|</span>   <span class="mi">5</span> <span class="o">|</span>   <span class="mi">8</span> <span class="o">|</span>    <span class="mi">1</span>
   <span class="mi">3</span> <span class="o">|</span>   <span class="mi">6</span> <span class="o">|</span>   <span class="mi">9</span> <span class="o">|</span>    <span class="mi">1</span>
   <span class="mi">4</span> <span class="o">|</span>   <span class="mi">9</span> <span class="o">|</span>  <span class="mi">15</span> <span class="o">|</span>    <span class="mi">1</span>
   <span class="mi">5</span> <span class="o">|</span>  <span class="mi">12</span> <span class="o">|</span>  <span class="o">-</span><span class="mi">1</span> <span class="o">|</span>    <span class="mi">0</span>
<span class="p">(</span><span class="mi">6</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Ejemplo:</th><td class="field-body">Con restricción de giros</td>
</tr>
</tbody>
</table>
<p>Entonces una consulta con restricciones de giro es creada de la siguiente forma:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">pgr_trsp</span><span class="p">(</span>
        <span class="s1">&#39;SELECT id::INTEGER, source::INTEGER, target::INTEGER, cost FROM edge_table&#39;</span><span class="p">,</span>
        <span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="n">false</span><span class="p">,</span> <span class="n">false</span><span class="p">,</span>
        <span class="s1">&#39;SELECT to_cost, target_id::int4,</span>
        <span class="n">from_edge</span> <span class="o">||</span> <span class="n">coalesce</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span> <span class="o">||</span> <span class="n">via_path</span><span class="p">,</span> <span class="s1">&#39;&#39;&#39;&#39;) AS via_path</span>
<span class="s1">        FROM restrictions&#39;</span>
<span class="s1">    );</span>
<span class="s1"> seq | id1 | id2 | cost</span>
<span class="s1">-----+-----+-----+------</span>
<span class="s1">   0 |   2 |   4 |    1</span>
<span class="s1">   1 |   5 |  10 |    1</span>
<span class="s1">   2 |  10 |  12 |    1</span>
<span class="s1">   3 |  11 |  11 |    1</span>
<span class="s1">   4 |   6 |   8 |    1</span>
<span class="s1">   5 |   5 |   7 |    1</span>
<span class="s1">   6 |   8 |   6 |    1</span>
<span class="s1">   7 |   7 |  -1 |    0</span>
<span class="s1">(8 rows)</span>

<span class="s1">SELECT * FROM pgr_trsp(</span>
<span class="s1">        &#39;SELECT id::INTEGER, source::INTEGER, target::INTEGER, cost FROM edge_table&#39;,</span>
<span class="s1">        7, 11, false, false,</span>
<span class="s1">        &#39;SELECT to_cost, target_id::int4,</span>
<span class="s1">        from_edge || coalesce(&#39;&#39;,&#39;&#39; || via_path, &#39;&#39;&#39;&#39;) AS via_path</span>
        <span class="n">FROM</span> <span class="n">restrictions</span><span class="s1">&#39;</span>
    <span class="p">);</span>
 <span class="n">seq</span> <span class="o">|</span> <span class="n">id1</span> <span class="o">|</span> <span class="n">id2</span> <span class="o">|</span> <span class="n">cost</span>
<span class="o">-----+-----+-----+------</span>
   <span class="mi">0</span> <span class="o">|</span>   <span class="mi">7</span> <span class="o">|</span>   <span class="mi">6</span> <span class="o">|</span>    <span class="mi">1</span>
   <span class="mi">1</span> <span class="o">|</span>   <span class="mi">8</span> <span class="o">|</span>   <span class="mi">7</span> <span class="o">|</span>    <span class="mi">1</span>
   <span class="mi">2</span> <span class="o">|</span>   <span class="mi">5</span> <span class="o">|</span>   <span class="mi">8</span> <span class="o">|</span>    <span class="mi">1</span>
   <span class="mi">3</span> <span class="o">|</span>   <span class="mi">6</span> <span class="o">|</span>   <span class="mi">9</span> <span class="o">|</span>    <span class="mi">1</span>
   <span class="mi">4</span> <span class="o">|</span>   <span class="mi">9</span> <span class="o">|</span>  <span class="mi">15</span> <span class="o">|</span>    <span class="mi">1</span>
   <span class="mi">5</span> <span class="o">|</span>  <span class="mi">12</span> <span class="o">|</span>  <span class="mi">13</span> <span class="o">|</span>    <span class="mi">1</span>
   <span class="mi">6</span> <span class="o">|</span>  <span class="mi">11</span> <span class="o">|</span>  <span class="o">-</span><span class="mi">1</span> <span class="o">|</span>    <span class="mi">0</span>
<span class="p">(</span><span class="mi">7</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
<p>Una consulta de ejemplo mediante identificadores de vértices y puntos de vía:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">pgr_trspViaVertices</span><span class="p">(</span>
        <span class="s1">&#39;SELECT id::INTEGER, source::INTEGER, target::INTEGER, cost FROM edge_table&#39;</span><span class="p">,</span>
        <span class="n">ARRAY</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">11</span><span class="p">]::</span><span class="n">INTEGER</span><span class="p">[],</span>
        <span class="n">false</span><span class="p">,</span>  <span class="n">false</span><span class="p">,</span>
        <span class="s1">&#39;SELECT to_cost, target_id::int4, from_edge ||</span>
        <span class="n">coalesce</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="o">||</span><span class="n">via_path</span><span class="p">,</span><span class="s1">&#39;&#39;&#39;&#39;) AS via_path FROM restrictions&#39;);</span>
<span class="s1"> seq | id1 | id2 | id3 | cost</span>
<span class="s1">-----+-----+-----+-----+------</span>
<span class="s1">   1 |   1 |   2 |   4 |    1</span>
<span class="s1">   2 |   1 |   5 |  10 |    1</span>
<span class="s1">   3 |   1 |  10 |  12 |    1</span>
<span class="s1">   4 |   1 |  11 |  11 |    1</span>
<span class="s1">   5 |   1 |   6 |   8 |    1</span>
<span class="s1">   6 |   1 |   5 |   7 |    1</span>
<span class="s1">   7 |   1 |   8 |   6 |    1</span>
<span class="s1">   8 |   2 |   7 |   6 |    1</span>
<span class="s1">   9 |   2 |   8 |   7 |    1</span>
<span class="s1">  10 |   2 |   5 |   8 |    1</span>
<span class="s1">  11 |   2 |   6 |   9 |    1</span>
<span class="s1">  12 |   2 |   9 |  15 |    1</span>
<span class="s1">  13 |   2 |  12 |  13 |    1</span>
<span class="s1">  14 |   2 |  11 |  -1 |    0</span>
<span class="s1">(14 rows)</span>

</pre></div>
</div>
<p>Una consulta de ejemplo mediante identificadores de borde y vias:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">pgr_trspViaEdges</span><span class="p">(</span>
        <span class="s1">&#39;SELECT id::INTEGER, source::INTEGER, target::INTEGER, cost,</span>
        <span class="n">reverse_cost</span> <span class="n">FROM</span> <span class="n">edge_table</span><span class="s1">&#39;,</span>
        <span class="n">ARRAY</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">11</span><span class="p">]::</span><span class="n">INTEGER</span><span class="p">[],</span>
        <span class="n">ARRAY</span><span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">]::</span><span class="n">FLOAT</span><span class="p">[],</span>
        <span class="n">true</span><span class="p">,</span>
        <span class="n">true</span><span class="p">,</span>
        <span class="s1">&#39;SELECT to_cost, target_id::int4, FROM_edge ||</span>
        <span class="n">coalesce</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="o">||</span><span class="n">via_path</span><span class="p">,</span><span class="s1">&#39;&#39;&#39;&#39;) AS via_path FROM restrictions&#39;);</span>
<span class="s1"> seq | id1 | id2 | id3 | cost</span>
<span class="s1">-----+-----+-----+-----+------</span>
<span class="s1">   1 |   1 |  -1 |   2 |  0.5</span>
<span class="s1">   2 |   1 |   2 |   4 |    1</span>
<span class="s1">   3 |   1 |   5 |   8 |    1</span>
<span class="s1">   4 |   1 |   6 |   9 |    1</span>
<span class="s1">   5 |   1 |   9 |  16 |    1</span>
<span class="s1">   6 |   1 |   4 |   3 |    1</span>
<span class="s1">   7 |   1 |   3 |   5 |    1</span>
<span class="s1">   8 |   1 |   6 |   8 |    1</span>
<span class="s1">   9 |   1 |   5 |   7 |    1</span>
<span class="s1">  10 |   2 |   5 |   8 |    1</span>
<span class="s1">  11 |   2 |   6 |   9 |    1</span>
<span class="s1">  12 |   2 |   9 |  16 |    1</span>
<span class="s1">  13 |   2 |   4 |   3 |    1</span>
<span class="s1">  14 |   2 |   3 |   5 |    1</span>
<span class="s1">  15 |   2 |   6 |  11 |  0.5</span>
<span class="s1">(15 rows)</span>

</pre></div>
</div>
<p>Las consultas utilizan la red  <a class="reference internal" href="sampledata.html"><span class="doc">Datos Muestra</span></a> .</p>
</div>
<div class="section" id="known-issues">
<h2>Problemas conocidos<a class="headerlink" href="#known-issues" title="Enlazar permanentemente con este título">¶</a></h2>
<div class="section" id="introduction">
<h3>Introducción<a class="headerlink" href="#introduction" title="Enlazar permanentemente con este título">¶</a></h3>
<p>el código pgr_trsp tiene problemas que aún no se están solucionando, pero a medida que pasa el tiempo y se agrega nueva funcionalidad a pgRouting, hay contenedores para <strong>ocultar</strong> los problemas, no para solucionarlos.</p>
<p>Para mayor claridad en las consultas:</p>
<ul class="simple">
<li>_pgr_trsp (internal_function) es el código original</li>
<li>pgr_trsp (minúscula) representa el contenedor que convoca al código original</li>
<li>pgr_TRSP (mayúsculas) representa el contenedor que convoca a la función de reemplazo. Dependiendo de esa función, puede ser:<ul>
<li>pgr_dijkstra</li>
<li>pgr_dijkstraVia</li>
<li>pgr_withPoints</li>
<li>_pgr_withPointsVia (función interna)</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="the-restrictions">
<h3>Las restricciones<a class="headerlink" href="#the-restrictions" title="Enlazar permanentemente con este título">¶</a></h3>
<p>La restricción utilizada en los ejemplos no tiene que ver nada con el grafo:</p>
<ul class="simple">
<li>Ningún vértice tiene id: 25, 32 o 33</li>
<li>Ninguna arista tiene id: 25, 32 o 33</li>
</ul>
<p>Se asigna una restricción como:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="mi">100</span><span class="p">::</span><span class="nb">float</span> <span class="n">AS</span> <span class="n">to_cost</span><span class="p">,</span> <span class="mi">25</span><span class="p">::</span><span class="n">INTEGER</span> <span class="n">AS</span> <span class="n">target_id</span><span class="p">,</span> <span class="s1">&#39;32, 33&#39;</span><span class="p">::</span><span class="n">TEXT</span> <span class="n">AS</span> <span class="n">via_path</span><span class="p">;</span>
 <span class="n">to_cost</span> <span class="o">|</span> <span class="n">target_id</span> <span class="o">|</span> <span class="n">via_path</span>
<span class="o">---------+-----------+----------</span>
     <span class="mi">100</span> <span class="o">|</span>        <span class="mi">25</span> <span class="o">|</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">33</span>
<span class="p">(</span><span class="mi">1</span> <span class="n">row</span><span class="p">)</span>

</pre></div>
</div>
<p>El código back-end tiene la misma restricción que la siguiente</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="mi">1</span> <span class="n">AS</span> <span class="nb">id</span><span class="p">,</span> <span class="mi">100</span><span class="p">::</span><span class="nb">float</span> <span class="n">AS</span> <span class="n">cost</span><span class="p">,</span> <span class="mi">25</span><span class="p">::</span><span class="n">INTEGER</span> <span class="n">AS</span> <span class="n">target_id</span><span class="p">,</span> <span class="n">ARRAY</span><span class="p">[</span><span class="mi">33</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">25</span><span class="p">]</span> <span class="n">AS</span> <span class="n">path</span><span class="p">;</span>
 <span class="nb">id</span> <span class="o">|</span> <span class="n">cost</span> <span class="o">|</span> <span class="n">target_id</span> <span class="o">|</span>    <span class="n">path</span>
<span class="o">----+------+-----------+------------</span>
  <span class="mi">1</span> <span class="o">|</span>  <span class="mi">100</span> <span class="o">|</span>        <span class="mi">25</span> <span class="o">|</span> <span class="p">{</span><span class="mi">33</span><span class="p">,</span><span class="mi">32</span><span class="p">,</span><span class="mi">25</span><span class="p">}</span>
<span class="p">(</span><span class="mi">1</span> <span class="n">row</span><span class="p">)</span>

</pre></div>
</div>
<p>por lo tanto, la ruta más corta esperado es como si no hubiera ninguna restricción involucrada</p>
</div>
<div class="section" id="the-vertices-signature-version">
<h3>La versión de la firma «Vértices»<a class="headerlink" href="#the-vertices-signature-version" title="Enlazar permanentemente con este título">¶</a></h3>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">pgr_trsp</span><span class="p">(</span><span class="k">sql</span> <span class="nb">text</span><span class="p">,</span> <span class="k">source</span> <span class="nb">integer</span><span class="p">,</span> <span class="n">target</span> <span class="nb">integer</span><span class="p">,</span>
         <span class="n">directed</span> <span class="nb">boolean</span><span class="p">,</span> <span class="n">has_rcost</span> <span class="nb">boolean</span> <span class="p">[,</span><span class="n">restrict_sql</span> <span class="nb">text</span><span class="p">]);</span>
</pre></div>
</div>
<div class="section" id="different-ways-to-represent-no-path-found">
<h4>Diferentes formas de representar “ninguna ruta encontrada”<a class="headerlink" href="#different-ways-to-represent-no-path-found" title="Enlazar permanentemente con este título">¶</a></h4>
<ul class="simple">
<li>A veces se representa con EMPTY SET ninguna ruta encontrada</li>
<li>A veces representa con ERROR ninguna ruta encontrada</li>
</ul>
<p class="rubric">Se devuelve EMPTY SET para representar ninguna ruta encontrada</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>SELECT * FROM pgr_trsp(
    $$SELECT id::INTEGER, source::INTEGER, target::INTEGER, cost, reverse_cost  FROM edge_table$$,
    1, 15, true, true
);
 seq | id1 | id2 | cost
-----+-----+-----+------
(0 rows)

</pre></div>
</div>
<p>pgr_trsp invoca <a class="reference internal" href="pgr_dijkstra.html"><span class="doc">pgr_dijkstra</span></a> cuando no hay restricciones que devuelvan <cite>EMPTY SET</cite> cuando no se encuentra una ruta</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>SELECT * FROM pgr_dijkstra(
    $$SELECT id::INTEGER, source::INTEGER, target::INTEGER, cost, reverse_cost  FROM edge_table$$,
    1, 15
);
 seq | path_seq | node | edge | cost | agg_cost
-----+----------+------+------+------+----------
(0 rows)

</pre></div>
</div>
<p class="rubric">Se producirá una  EXCEPCIÓN para representar ninguna ruta encontrada</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>SELECT * FROM pgr_trsp(
     $$SELECT id::INTEGER, source::INTEGER, target::INTEGER, cost, reverse_cost  FROM edge_table$$,
     1, 15, true, true,
     $$SELECT 100::float AS to_cost, 25::INTEGER AS target_id, &#39;32, 33&#39;::TEXT AS via_path$$
);
ERROR:  Error computing path: Path Not Found
</pre></div>
</div>
<p>pgr_trsp utiliza el código original cuando hay restricciones, incluso si no tienen nada que ver con el grafo, lo que producirá una EXCEPCIÓN para representar ninguna ruta encontrada.</p>
</div>
<div class="section" id="routing-from-to-same-location">
<h4>Ruteo desde/hacia la misma ubicación<a class="headerlink" href="#routing-from-to-same-location" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Al enrutar desde la ubicación <span class="math notranslate nohighlight">\(1\)</span> a la misma ubicación <span class="math notranslate nohighlight">\(1\)</span>, no se necesita ninguna ruta para llegar al destino, pues ya está allí. Por lo tanto, se espera que devuelva un <cite>EMPTY SET</cite> o un <cite>EXCEPTION</cite> dependiendo de los parámetros</p>
<ul class="simple">
<li>A veces se representa con EMPTY SET ninguna ruta encontrada (esperada)</li>
<li>A veces se representa con EXCEPCIÓNninguna ruta encontrada (esperada)</li>
<li>A veces se encuentra una ruta (no esperada)</li>
</ul>
<p class="rubric">Se devuelve el SET EMPTY esperado para representar ninguna ruta encontrada</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>SELECT * FROM pgr_trsp(
    $$SELECT id::INTEGER, source::INTEGER, target::INTEGER, cost, reverse_cost FROM edge_table$$,
    1, 1,  true, true
);
 seq | id1 | id2 | cost
-----+-----+-----+------
(0 rows)

</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">pgr_trsp</span></code> convoca a <a class="reference internal" href="pgr_dijkstra.html"><span class="doc">pgr_dijkstra</span></a> cuando no hay resctricciones que devuelvan el  <cite>EMPTY SET</cite> esperado para representar ninguna ruta encontrada.</p>
<p class="rubric">Devolver EXCEPTION esperada para representar ninguna ruta encontrada</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>SELECT * FROM pgr_trsp(
    $$SELECT id::INTEGER, source::INTEGER, target::INTEGER, cost, reverse_cost FROM edge_table$$,
    14, 14, true, true,
    $$SELECT 100::float AS to_cost, 25::INTEGER AS target_id, &#39;32, 33&#39;::TEXT AS via_path$$
);
ERROR:  Error computing path: Path Not Found
</pre></div>
</div>
<p>En este caso <code class="docutils literal notranslate"><span class="pre">pgr_trsp</span></code> llama al código original cuando hay restricciones, incluso si no tienen nada que ver con el grafo, en este caso ese código lanza la EXCEPCIÓN esperada</p>
<p class="rubric">Devolver una ruta inesperado</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>SELECT * FROM pgr_trsp(
    $$SELECT id::INTEGER, source::INTEGER, target::INTEGER, cost, reverse_cost FROM edge_table$$,
    1, 1, true, true,
    $$SELECT 100::float AS to_cost, 25::INTEGER AS target_id, &#39;32, 33&#39;::TEXT AS via_path$$
);
 seq | id1 | id2 | cost
-----+-----+-----+------
   0 |   1 |   1 |    1
   1 |   2 |   4 |    1
   2 |   5 |   8 |    1
   3 |   6 |   9 |    1
   4 |   9 |  16 |    1
   5 |   4 |   3 |    1
   6 |   3 |   2 |    1
   7 |   2 |   1 |    1
   8 |   1 |  -1 |    0
(9 rows)

</pre></div>
</div>
<p>En este caso <code class="docutils literal notranslate"><span class="pre">pgr_trsp</span></code> llama al código original cuando hay restricciones, incluso si no tienen nada que ver con el grafo, en este caso ese código encuentra una ruta inesperada.</p>
</div>
<div class="section" id="user-contradictions">
<h4>Contradicciones de usuarios<a class="headerlink" href="#user-contradictions" title="Enlazar permanentemente con este título">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">pgr_trsp</span></code> a diferencia de otras funciones de pgRouting no detecta automáticamente la existencia de la columna <code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code>. Por lo tanto, tiene el parámetro <code class="docutils literal notranslate"><span class="pre">has_rcost</span></code> para verificar la existencia de la columna <code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code>. Las contradicciones suceden:</p>
<ul class="simple">
<li>Cuando falta reverse_cost, y la marca <cite>has_rcost</cite> se establece como verdadera</li>
<li>Cuando el reverse_cost existe, y el indicador <cite>has_rcost</cite> se establece en false</li>
</ul>
<p class="rubric">Cuando falta reverse_cost y el indicador <cite>has_rcost</cite> se configura como verdadero.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>SELECT * FROM pgr_trsp(
    $$SELECT id::INTEGER, source::INTEGER, target::INTEGER, cost FROM edge_table$$,
    2, 3, false, true,
    $$SELECT 100::float AS to_cost, 25::INTEGER AS target_id, &#39;32, 33&#39;::TEXT AS via_path$$
);
ERROR:  Error, reverse_cost is used, but query did&#39;t return &#39;reverse_cost&#39; column
</pre></div>
</div>
<p>Se produce una EXCEPCIÓN.</p>
<p class="rubric">Cuando el reverse_cost existe, y el indicador <cite>has_rcost</cite> se establece en false</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>SELECT * FROM pgr_trsp(
    $$SELECT id::INTEGER, source::INTEGER, target::INTEGER, cost, reverse_cost FROM edge_table$$,
    2, 3, false, false,
    $$SELECT 100::float AS to_cost, 25::INTEGER AS target_id, &#39;32, 33&#39;::TEXT AS via_path$$
);
 seq | id1 | id2 | cost
-----+-----+-----+------
   0 |   2 |   4 |    1
   1 |   5 |   8 |    1
   2 |   6 |   5 |    1
   3 |   3 |  -1 |    0
(4 rows)

</pre></div>
</div>
<p>La columna de <code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code> será eliminada efectivamente y costará tiempo de ejecución</p>
</div>
</div>
<div class="section" id="the-edges-signature-version">
<h3>La versión de firma «Edges»<a class="headerlink" href="#the-edges-signature-version" title="Enlazar permanentemente con este título">¶</a></h3>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="n">pgr_trsp</span><span class="p">(</span><span class="k">sql</span> <span class="nb">text</span><span class="p">,</span> <span class="n">source_edge</span> <span class="nb">integer</span><span class="p">,</span> <span class="n">source_pos</span> <span class="n">float8</span><span class="p">,</span>
         <span class="n">target_edge</span> <span class="nb">integer</span><span class="p">,</span> <span class="n">target_pos</span> <span class="n">float8</span><span class="p">,</span>
         <span class="n">directed</span> <span class="nb">boolean</span><span class="p">,</span> <span class="n">has_rcost</span> <span class="nb">boolean</span> <span class="p">[,</span><span class="n">restrict_sql</span> <span class="nb">text</span><span class="p">]);</span>
</pre></div>
</div>
<div class="section" id="id1">
<h4>Diferentes formas de representar “ninguna ruta encontrada”<a class="headerlink" href="#id1" title="Enlazar permanentemente con este título">¶</a></h4>
<ul class="simple">
<li>A veces se representa con EMPTY SET ninguna ruta encontrada</li>
<li>A veces se representa con EXCEPCIÓN ninguna ruta encontrada</li>
</ul>
<p class="rubric">Se devuelve EMPTY SET para representar ninguna ruta encontrada</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>SELECT * FROM pgr_trsp(
    $$SELECT id::INTEGER, source::INTEGER, target::INTEGER, cost, reverse_cost  FROM edge_table$$,
    1, 0.5, 17, 0.5, true, true
);
 seq | id1 | id2 | cost
-----+-----+-----+------
(0 rows)

</pre></div>
</div>
<p>pgr_trsp invoca <a class="reference internal" href="pgr_withPoints.html"><span class="doc">pgr_withPoints - Propuesto</span></a> cuando no hay restricciones que devuelvan <cite>EMPTY SET</cite> cuando no se encuentra una ruta</p>
<p class="rubric">Se producirá una  EXCEPCIÓN para representar ninguna ruta encontrada</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>SELECT * FROM _pgr_trsp(
    $$SELECT id::INTEGER, source::INTEGER, target::INTEGER, cost, reverse_cost  FROM edge_table$$,
    1, 0.5, 17, 0.5, true, true,
    $$SELECT 100::float AS to_cost, 25::INTEGER AS target_id, &#39;32, 33&#39;::TEXT AS via_path$$
);
ERROR:  Error computing path: Path Not Found
</pre></div>
</div>
<p>pgr_trsp utiliza el código original cuando hay restricciones, incluso si no tienen nada que ver con el grafo, lo que producirá una EXCEPCIÓN para representar ninguna ruta encontrada.</p>
</div>
<div class="section" id="paths-with-equal-number-of-vertices-and-edges">
<h4>Rutas con igual número de vértices y aristas<a class="headerlink" href="#paths-with-equal-number-of-vertices-and-edges" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Una ruta se conforma por <cite>N</cite> vértices y <cite>N - 1</cite> aristas.</p>
<ul class="simple">
<li>A veces devuelve <cite>N</cite> vértices y <cite>N - 1</cite> aristas.</li>
<li>A veces se devuelven <cite>N - 1</cite> vértices y <cite>N - 1</cite> aristas.</li>
</ul>
<p class="rubric">Retorno de <cite>N</cite> vértices y <cite>N - 1</cite> aristas.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>SELECT * FROM pgr_TRSP(
    $$SELECT id::INTEGER, source::INTEGER, target::INTEGER, cost, reverse_cost  FROM edge_table$$,
    1, 0.5, 1, 0.8, true, true
);
 seq | id1 | id2 | cost
-----+-----+-----+------
   0 |  -1 |   1 |  0.3
   1 |  -2 |  -1 |    0
(2 rows)

</pre></div>
</div>
<p>pgr_trsp convoca a <a class="reference internal" href="pgr_withPoints.html"><span class="doc">pgr_withPoints - Propuesto</span></a> cuando no hay restricciones que devuelvan el número correcto de filas que incluirán todos los vértices. La última fila tendrá un <code class="docutils literal notranslate"><span class="pre">-1</span></code> en la columna de aristas para indicar que el número de arista es inválido para esa fila.</p>
<p class="rubric">Retorno de <cite>N - 1</cite> vrtices’y <cite>N - 1</cite> aristas.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>SELECT * FROM pgr_TRSP(
    $$SELECT id::INTEGER, source::INTEGER, target::INTEGER, cost, reverse_cost  FROM edge_table$$,
    1, 0.5, 1, 0.8, true, true,
    $$SELECT 100::float AS to_cost, 25::INTEGER AS target_id, &#39;32, 33&#39;::TEXT AS via_path$$
);
 seq | id1 | id2 | cost
-----+-----+-----+------
   0 |  -1 |   1 |  0.3
(1 row)

</pre></div>
</div>
<p>pgr_trsp utiliza el código original cuando hay restricciones, incluso si no tienen nada que ver con el grafo, y no devolverán el último vértice de la ruta.</p>
</div>
<div class="section" id="id2">
<h4>Ruteo desde/hacia la misma ubicación<a class="headerlink" href="#id2" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Al enrutar desde la misma arista y posición a la misma arista y posición, no se necesita ninguna ruta para llegar al destino, pues ya está allí. Por lo tanto, se espera que devuelva un <cite>EMPTY SET</cite> o una <cite>EXCEPTION</cite> dependiendo de los parámetros, ninguno de los cuales está sucediendo.</p>
<p class="rubric">Una ruta con 2 vértices y coste de arista 0</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>SELECT * FROM pgr_TRSP(
    $$SELECT id::INTEGER, source::INTEGER, target::INTEGER, cost, reverse_cost  FROM edge_table$$,
    1, 0.5, 1, 0.5, true, true
);
 seq | id1 | id2 | cost
-----+-----+-----+------
   0 |  -1 |   1 |    0
   1 |  -2 |  -1 |    0
(2 rows)

</pre></div>
</div>
<p>pgr_trsp convoca a <a class="reference internal" href="pgr_withPoints.html"><span class="doc">pgr_withPoints - Propuesto</span></a> configurando la primera <span class="math notranslate nohighlight">\((arista, posición)\)</span> con un diferente id de punto de la segunda <span class="math notranslate nohighlight">\((arista, posición)\)</span> haciendo de ellas diferentes puntos. Pero el costo usando la arista es de <span class="math notranslate nohighlight">\(0\)</span>.</p>
<p class="rubric">Una ruta con 1 vértice y coste de arista 0</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>SELECT * FROM pgr_TRSP(
    $$SELECT id::INTEGER, source::INTEGER, target::INTEGER, cost, reverse_cost  FROM edge_table$$,
    1, 0.5, 1, 0.5, true, true,
    $$SELECT 100::float AS to_cost, 25::INTEGER AS target_id, &#39;32, 33&#39;::TEXT AS via_path$$
);
 seq | id1 | id2 | cost
-----+-----+-----+------
   0 |  -1 |   1 |    0
(1 row)

</pre></div>
</div>
<p>pgr_trsp utiliza el código original cuando hay restricciones, incluso si no tienen nada que ver con el grafo, y no tendrán la fila para el vértice <span class="math notranslate nohighlight">\(-2\)</span>.</p>
</div>
<div class="section" id="id3">
<h4>Contradicciones de usuarios<a class="headerlink" href="#id3" title="Enlazar permanentemente con este título">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">pgr_trsp</span></code> a diferencia de otras funciones de pgRouting no detecta automáticamente la existencia de la columna <code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code>. Por lo tanto, tiene el parámetro <code class="docutils literal notranslate"><span class="pre">has_rcost</span></code> para verificar la existencia de la columna <code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code>. Las contradicciones suceden:</p>
<ul class="simple">
<li>Cuando falta reverse_cost, y la marca <cite>has_rcost</cite> se establece como verdadera</li>
<li>Cuando el reverse_cost existe, y el indicador <cite>has_rcost</cite> se establece en false</li>
</ul>
<p class="rubric">Cuando falta reverse_cost y el indicador <cite>has_rcost</cite> se configura como verdadero.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>SELECT * FROM pgr_trsp(
    $$SELECT id::INTEGER, source::INTEGER, target::INTEGER, cost FROM edge_table$$,
    1, 0.5, 1, 0.8, false, true,
    $$SELECT 100::float AS to_cost, 25::INTEGER AS target_id, &#39;32, 33&#39;::TEXT AS via_path$$
);
ERROR:  Error, reverse_cost is used, but query did&#39;t return &#39;reverse_cost&#39; column
</pre></div>
</div>
<p>Se produce una EXCEPCIÓN.</p>
<p class="rubric">Cuando el reverse_cost existe, y el indicador <cite>has_rcost</cite> se establece en false</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>SELECT * FROM pgr_trsp(
    $$SELECT id::INTEGER, source::INTEGER, target::INTEGER, cost, reverse_cost FROM edge_table$$,
    1, 0.5, 1, 0.8, false, false,
    $$SELECT 100::float AS to_cost, 25::INTEGER AS target_id, &#39;32, 33&#39;::TEXT AS via_path$$
);
 seq | id1 | id2 | cost
-----+-----+-----+------
   0 |  -1 |   1 |  0.3
(1 row)

</pre></div>
</div>
<p>La columna de <code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code> será eliminada efectivamente y costará tiempo de ejecución</p>
</div>
<div class="section" id="using-a-points-of-interest-table">
<h4>Uso de una tabla de puntos de interés<a class="headerlink" href="#using-a-points-of-interest-table" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Dado un conjunto de puntos de interés:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">pointsOfInterest</span><span class="p">;</span>
 <span class="n">pid</span> <span class="o">|</span>  <span class="n">x</span>  <span class="o">|</span>  <span class="n">y</span>  <span class="o">|</span> <span class="n">edge_id</span> <span class="o">|</span> <span class="n">side</span> <span class="o">|</span> <span class="n">fraction</span> <span class="o">|</span>                  <span class="n">the_geom</span>                  <span class="o">|</span>                  <span class="n">newpoint</span>
<span class="o">-----+-----+-----+---------+------+----------+--------------------------------------------+--------------------------------------------</span>
   <span class="mi">1</span> <span class="o">|</span> <span class="mf">1.8</span> <span class="o">|</span> <span class="mf">0.4</span> <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span> <span class="n">l</span>    <span class="o">|</span>      <span class="mf">0.4</span> <span class="o">|</span> <span class="mi">0101000000</span><span class="n">CDCCCCCCCCCCFC3F9A9999999999D93F</span> <span class="o">|</span> <span class="mi">010100000000000000000000409</span><span class="n">A9999999999D93F</span>
   <span class="mi">2</span> <span class="o">|</span> <span class="mf">4.2</span> <span class="o">|</span> <span class="mf">2.4</span> <span class="o">|</span>      <span class="mi">15</span> <span class="o">|</span> <span class="n">r</span>    <span class="o">|</span>      <span class="mf">0.4</span> <span class="o">|</span> <span class="mi">0101000000</span><span class="n">CDCCCCCCCCCC10403333333333330340</span> <span class="o">|</span> <span class="mi">010100000000000000000010403333333333330340</span>
   <span class="mi">3</span> <span class="o">|</span> <span class="mf">2.6</span> <span class="o">|</span> <span class="mf">3.2</span> <span class="o">|</span>      <span class="mi">12</span> <span class="o">|</span> <span class="n">l</span>    <span class="o">|</span>      <span class="mf">0.6</span> <span class="o">|</span> <span class="mi">0101000000</span><span class="n">CDCCCCCCCCCC04409A99999999990940</span> <span class="o">|</span> <span class="mi">0101000000</span><span class="n">CDCCCCCCCCCC04400000000000000840</span>
   <span class="mi">4</span> <span class="o">|</span> <span class="mf">0.3</span> <span class="o">|</span> <span class="mf">1.8</span> <span class="o">|</span>       <span class="mi">6</span> <span class="o">|</span> <span class="n">r</span>    <span class="o">|</span>      <span class="mf">0.3</span> <span class="o">|</span> <span class="mi">0101000000333333333333</span><span class="n">D33FCDCCCCCCCCCCFC3F</span> <span class="o">|</span> <span class="mi">0101000000333333333333</span><span class="n">D33F0000000000000040</span>
   <span class="mi">5</span> <span class="o">|</span> <span class="mf">2.9</span> <span class="o">|</span> <span class="mf">1.8</span> <span class="o">|</span>       <span class="mi">5</span> <span class="o">|</span> <span class="n">l</span>    <span class="o">|</span>      <span class="mf">0.8</span> <span class="o">|</span> <span class="mi">01010000003333333333330740</span><span class="n">CDCCCCCCCCCCFC3F</span> <span class="o">|</span> <span class="mi">01010000000000000000000840</span><span class="n">CDCCCCCCCCCCFC3F</span>
   <span class="mi">6</span> <span class="o">|</span> <span class="mf">2.2</span> <span class="o">|</span> <span class="mf">1.7</span> <span class="o">|</span>       <span class="mi">4</span> <span class="o">|</span> <span class="n">b</span>    <span class="o">|</span>      <span class="mf">0.7</span> <span class="o">|</span> <span class="mi">01010000009</span><span class="n">A99999999990140333333333333FB3F</span> <span class="o">|</span> <span class="mi">01010000000000000000000040333333333333</span><span class="n">FB3F</span>
<span class="p">(</span><span class="mi">6</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
<p class="rubric">Uso de pgr_trsp</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>SELECT * FROM pgr_TRSP(
    $$SELECT id::INTEGER, source::INTEGER, target::INTEGER, cost, reverse_cost  FROM edge_table$$,
    (SELECT edge_id::INTEGER  FROM pointsOfInterest WHERE pid = 1),
    (SELECT fraction  FROM pointsOfInterest WHERE pid = 1),
    (SELECT edge_id::INTEGER  FROM pointsOfInterest WHERE pid = 6),
    (SELECT fraction  FROM pointsOfInterest WHERE pid = 6),
    true, true,
    $$SELECT 100::float AS to_cost, 25::INTEGER AS target_id, &#39;32, 33&#39;::TEXT AS via_path$$
);
 seq | id1 | id2 | cost
-----+-----+-----+------
   0 |  -1 |   1 |  0.6
   1 |   2 |   4 |  0.7
(2 rows)

</pre></div>
</div>
<p>En <em>pgr_trsp</em>, para poder utilizar la información de la tabla:</p>
<ul class="simple">
<li>Cada parámetro debe extraerse explícitamente de la tabla</li>
<li>Independientemente del punto pid valor original<ul>
<li>siempre será -1 para el primer punto</li>
<li>siempre será -2 para el segundo punto<ul>
<li>la fila que alcanza el punto -2 no se mostrará</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="rubric">Uso de <a class="reference internal" href="pgr_withPoints.html"><span class="doc">pgr_withPoints - Propuesto</span></a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>SELECT * FROM pgr_withPoints(
    $$SELECT id::INTEGER, source::INTEGER, target::INTEGER, cost, reverse_cost  FROM edge_table$$,
    $$SELECT pid, edge_id, fraction FROM pointsOfInterest$$,
    -1, -6
);
 seq | path_seq | node | edge | cost | agg_cost
-----+----------+------+------+------+----------
   1 |        1 |   -1 |    1 |  0.6 |        0
   2 |        2 |    2 |    4 |  0.7 |      0.6
   3 |        3 |   -6 |   -1 |    0 |      1.3
(3 rows)

</pre></div>
</div>
<p>Sugerencia: use <a class="reference internal" href="pgr_withPoints.html"><span class="doc">pgr_withPoints - Propuesto</span></a> cuando no hay restricciones de giro:</p>
<ul class="simple">
<li>Los resultados son más completos</li>
<li>Los nombres de columna son significativos</li>
</ul>
</div>
<div class="section" id="routing-from-a-vertex-to-a-point">
<h4>Ruteo desde un vértice a un punto<a class="headerlink" href="#routing-from-a-vertex-to-a-point" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Resolver una ruta más corta desde el vértice <span class="math notranslate nohighlight">\(6\)</span> a pid 1 usando una tabla de puntos de interés</p>
<p class="rubric">Uso de pgr_trsp</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>SELECT * FROM pgr_trsp(
    $$SELECT id::INTEGER, source::INTEGER, target::INTEGER, cost, reverse_cost FROM edge_table$$,
    8, 1,
    (SELECT edge_id::INTEGER  FROM pointsOfInterest WHERE pid = 1),
    (SELECT fraction  FROM pointsOfInterest WHERE pid = 1),
    true, true,
    $$SELECT 100::float AS to_cost, 25::INTEGER AS target_id, &#39;32, 33&#39;::TEXT AS via_path$$
);
 seq | id1 | id2 | cost
-----+-----+-----+------
   0 |   6 |   8 |    1
   1 |   5 |   4 |    1
   2 |   2 |   1 |  0.6
(3 rows)

</pre></div>
</div>
<ul class="simple">
<li>El vértice 6 está en el borde 8 en 1 fracción</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>SELECT * FROM pgr_trsp(
    $$SELECT id::INTEGER, source::INTEGER, target::INTEGER, cost, reverse_cost FROM edge_table$$,
    11, 0,
    (SELECT edge_id::INTEGER  FROM pointsOfInterest WHERE pid = 1),
    (SELECT fraction  FROM pointsOfInterest WHERE pid = 1),
    true, true,
    $$SELECT 100::float AS to_cost, 25::INTEGER AS target_id, &#39;32, 33&#39;::TEXT AS via_path$$
);
 seq | id1 | id2 | cost
-----+-----+-----+------
   0 |   6 |   8 |    1
   1 |   5 |   4 |    1
   2 |   2 |   1 |  0.6
(3 rows)

</pre></div>
</div>
<ul class="simple">
<li>El vértice 6 es también borde 11 en 0 fracción</li>
</ul>
<p class="rubric">Uso de <a class="reference internal" href="pgr_withPoints.html"><span class="doc">pgr_withPoints - Propuesto</span></a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>SELECT * FROM pgr_withPoints(
    $$SELECT id::INTEGER, source::INTEGER, target::INTEGER, cost, reverse_cost  FROM edge_table$$,
    $$SELECT pid, edge_id, fraction FROM pointsOfInterest$$,
    6, -1
);
 seq | path_seq | node | edge | cost | agg_cost
-----+----------+------+------+------+----------
   1 |        1 |    6 |    8 |    1 |        0
   2 |        2 |    5 |    4 |    1 |        1
   3 |        3 |    2 |    1 |  0.6 |        2
   4 |        4 |   -1 |   -1 |    0 |      2.6
(4 rows)

</pre></div>
</div>
<p>Sugerencia: use <a class="reference internal" href="pgr_withPoints.html"><span class="doc">pgr_withPoints - Propuesto</span></a> cuando no hay restricciones de giro:</p>
<ul class="simple">
<li>No es necesario elegir dónde se encuentra el vértice.</li>
<li>Los resultados son más completos</li>
<li>Los nombres de columna son significativos</li>
</ul>
</div>
</div>
<div class="section" id="prototypes">
<h3>Prototipos<a class="headerlink" href="#prototypes" title="Enlazar permanentemente con este título">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">pgr_trspViaVertices</span></code> y <code class="docutils literal notranslate"><span class="pre">pgr_trspViaEdges</span></code> fueron añadidas como prototipos</p>
<p>Estas funciones utilizan las funciones pgr_trsp heredando todos los problemas mencionados anteriormente. Cuando no hay restricciones y tienen un problema de ruteo «vía» con vértices:</p>
<ul class="simple">
<li><a class="reference internal" href="pgr_dijkstraVia.html"><span class="doc">pgr_dijkstraVia - Propuesto</span></a></li>
</ul>
</div>
</div>
<div class="section" id="see-also">
<h2>Ver también<a class="headerlink" href="#see-also" title="Enlazar permanentemente con este título">¶</a></h2>
<p class="rubric">Índices y tablas</p>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><span class="std std-ref">Índice</span></a></li>
<li><a class="reference internal" href="search.html"><span class="std std-ref">Página de Búsqueda</span></a></li>
</ul>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright pgRouting Contributors - Version v3.0.6.<br/>
      Actualizado por última vez en oct. 23, 2021.<br/>
      Creado con <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.2.<br/>
    </p>
  </div>
</footer>
  </body>
</html>