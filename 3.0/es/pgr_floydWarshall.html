<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="es">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>pgr_floydWarshall &#8212; pgRouting Manual (3.0)</title>
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
<script src="_static/page_history.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/translations.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Índice" href="genindex.html" />
    <link rel="search" title="Búsqueda" href="search.html" />
    <link rel="next" title="pgr_johnson" href="pgr_johnson.html" />
    <link rel="prev" title="Todos los Pares - Familia de Funciones" href="allpairs-family.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html"><span><img src="_static/pgrouting.png"></span>
          pgRouting</a>
        <span class="navbar-text navbar-version pull-left"><b>v3.0.6</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="pgRouting-introduction.html">Introducción</a></li>
<li class="toctree-l1"><a class="reference internal" href="pgRouting-installation.html">Instalación</a></li>
<li class="toctree-l1"><a class="reference internal" href="support.html">Soporte</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="sampledata.html">Datos Muestra</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="pgRouting-concepts.html">Conceptos de pgRouting</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="pgr_version.html">pgr_version</a></li>
<li class="toctree-l1"><a class="reference internal" href="pgr_full_version.html">pgr_full_version</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="routingFunctions.html">Familias de Funciones</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="proposed.html">Funciones propuestas</a></li>
<li class="toctree-l1"><a class="reference internal" href="experimental.html">Funciones Experimentales</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="release_notes.html">Notas de versión</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">pgr_floydWarshall</a><ul>
<li><a class="reference internal" href="#description">Descripción</a></li>
<li><a class="reference internal" href="#signatures">Firmas</a><ul>
<li><a class="reference internal" href="#complete-signature">Firma completa</a></li>
</ul>
</li>
<li><a class="reference internal" href="#parameters">Parámetros</a></li>
<li><a class="reference internal" href="#inner-query">Consulta interna</a></li>
<li><a class="reference internal" href="#result-columns">Columnas de Resultados</a></li>
<li><a class="reference internal" href="#see-also">Ver también</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="allpairs-family.html" title="Previous Chapter: Todos los Pares - Familia de Funciones"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Todos los Par...</span>
    </a>
  </li>
  <li>
    <a href="pgr_johnson.html" title="Next Chapter: pgr_johnson"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">pgr_johnson &raquo;</span>
    </a>
  </li>
              
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
 <div class="line"><br/></div> <script> document.write(get_history("pgr_floydWarshall","es")); </script>
      
  <div class="section" id="pgr-floydwarshall">
<h1>pgr_floydWarshall<a class="headerlink" href="#pgr-floydwarshall" title="Enlazar permanentemente con este título">¶</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">pgr_floydWarshall</span></code> - Devuelve la suma de los costos de la ruta más corta para cada par de nodos en el grafo mediante el algoritmo Floyd-Warshall.</p>
<div class="figure" id="id1">
<a class="reference external image-reference" href="https://www.boost.org/libs/graph/doc/floyd_warshall_shortest.html"><img alt="_images/boost-inside.jpeg" src="_images/boost-inside.jpeg" /></a>
<p class="caption"><span class="caption-text">Adentro: Boost Graph</span></p>
</div>
<p class="rubric">Disponibilidad</p>
<ul class="simple">
<li>Version 2.2.0<ul>
<li>Cambio de firma</li>
<li>Firma antigua ya no soportada</li>
</ul>
</li>
<li>Versión 2.0.0<ul>
<li>Función <strong>oficial</strong></li>
</ul>
</li>
</ul>
<p class="rubric">Soporte</p>
<ul class="simple">
</ul>
<div class="section" id="description">
<h2>Descripción<a class="headerlink" href="#description" title="Enlazar permanentemente con este título">¶</a></h2>
<p>El algoritmo Floyd-Warshall, también conocido como algoritmo de Floyd, es una buena opción para calcular la suma de los costos de la ruta más corta para cada par de nodos en el grafo, para <em>grafos densos</em>. Usamos la implementación de Boost que se ejecuta en <span class="math notranslate nohighlight">\(\Theta(V^3)\)</span> tiempo,</p>
<dl class="docutils">
<dt>Las principales características son:</dt>
<dd><ul class="first last simple">
<li>No devuelve una ruta.</li>
<li>Devuelve la suma de los costos de la ruta más corta para cada par de nodos del grafo.</li>
<li>El proceso se realiza sólo en las aristas con costos positivos.</li>
<li>Boost devuelve una matriz:math:<cite>V times V</cite>  donde los valores son infinitos. Representar la distancia entre vértices para los que no hay ruta.<ul>
<li>Solo devolvemos los valores no infinitos en forma de un conjunto de <cite>(start_vid, end_vid, agg_cost)</cite>.</li>
</ul>
</li>
<li>Sea el caso, los valores devueltos se almacenan en una tabla, por lo que el índice único sería el par: “(start_vid, end_vid)”.</li>
<li>Para el grafo no dirigido, los resultados son simétricos.<ul>
<li>El  <cite>agg_cost</cite> de <cite>(u, v)</cite>  es el mismo que para <cite>(v, u)</cite>.</li>
</ul>
</li>
<li>En caso de <cite>start_vid</cite> = <cite>end_vid</cite>, el  <cite>agg_cost</cite> = 0.</li>
<li><strong>Recomendación: utilice un cuadro delimitador de no más de 3500 aristas.</strong></li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="signatures">
<h2>Firmas<a class="headerlink" href="#signatures" title="Enlazar permanentemente con este título">¶</a></h2>
<p class="rubric">Resumen</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pgr floydWarshall(edges_sql [, directed])
RETURNS SET OF (start_vid, end_vid,  agg_cost)
OR EMPTY SET
</pre></div>
</div>
<p class="rubric">Uso de valores predeterminados</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pgr_floydWarshall(edges_sql)
RETURNS SET OF (start_vid, end_vid,  agg_cost)
OR EMPTY SET
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Ejemplo 1:</th><td class="field-body">Para vértices <span class="math notranslate nohighlight">\(\{1, 2, 3, 4\}\)</span> en un grafo <strong>dirigido</strong></td>
</tr>
</tbody>
</table>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">pgr_floydWarshall</span><span class="p">(</span>
    <span class="s1">&#39;SELECT id, source, target, cost FROM edge_table where id &lt; 5&#39;</span>
<span class="p">);</span>
 <span class="n">start_vid</span> <span class="o">|</span> <span class="n">end_vid</span> <span class="o">|</span> <span class="n">agg_cost</span>
<span class="o">-----------+---------+----------</span>
         <span class="mi">1</span> <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>        <span class="mi">1</span>
         <span class="mi">1</span> <span class="o">|</span>       <span class="mi">5</span> <span class="o">|</span>        <span class="mi">2</span>
         <span class="mi">2</span> <span class="o">|</span>       <span class="mi">5</span> <span class="o">|</span>        <span class="mi">1</span>
<span class="p">(</span><span class="mi">3</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
<div class="section" id="complete-signature">
<h3>Firma completa<a class="headerlink" href="#complete-signature" title="Enlazar permanentemente con este título">¶</a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pgr_floydWarshall(edges_sql [, directed])
RETURNS SET OF (start_vid, end_vid,  agg_cost)
OR EMPTY SET
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Ejemplo 2:</th><td class="field-body">Para vértices <span class="math notranslate nohighlight">\(\{1, 2, 3, 4\}\)</span> en un grafo <strong>no dirigido</strong></td>
</tr>
</tbody>
</table>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">pgr_floydWarshall</span><span class="p">(</span>
    <span class="s1">&#39;SELECT id, source, target, cost FROM edge_table where id &lt; 5&#39;</span><span class="p">,</span>
    <span class="n">false</span>
<span class="p">);</span>
 <span class="n">start_vid</span> <span class="o">|</span> <span class="n">end_vid</span> <span class="o">|</span> <span class="n">agg_cost</span>
<span class="o">-----------+---------+----------</span>
         <span class="mi">1</span> <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>        <span class="mi">1</span>
         <span class="mi">1</span> <span class="o">|</span>       <span class="mi">5</span> <span class="o">|</span>        <span class="mi">2</span>
         <span class="mi">2</span> <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>        <span class="mi">1</span>
         <span class="mi">2</span> <span class="o">|</span>       <span class="mi">5</span> <span class="o">|</span>        <span class="mi">1</span>
         <span class="mi">5</span> <span class="o">|</span>       <span class="mi">1</span> <span class="o">|</span>        <span class="mi">2</span>
         <span class="mi">5</span> <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>        <span class="mi">1</span>
<span class="p">(</span><span class="mi">6</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
</div>
</div>
<div class="section" id="parameters">
<h2>Parámetros<a class="headerlink" href="#parameters" title="Enlazar permanentemente con este título">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="11%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parámetro</th>
<th class="head">Tipo</th>
<th class="head">Descripción</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>edges_sql</strong></td>
<td><code class="docutils literal notranslate"><span class="pre">TEXT</span></code></td>
<td>Consulta SQL como se describió anteriormente.</td>
</tr>
<tr class="row-odd"><td><strong>dirigido</strong></td>
<td><code class="docutils literal notranslate"><span class="pre">BOOLEAN</span></code></td>
<td>(opcional) El valor predeterminado es verdadero (es Dirigido). Cuando se establece en falso, el grafo se considera como No Dirigido</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="inner-query">
<h2>Consulta interna<a class="headerlink" href="#inner-query" title="Enlazar permanentemente con este título">¶</a></h2>
<p class="rubric">Descripción de la consulta edges_sql (no es necesarioun id)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">edges_sql:</th><td class="field-body">Una consulta SQL, que debe regresar un conjunto de filas con las siguientes columnas:</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="14%" />
<col width="6%" />
<col width="69%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Columna</th>
<th class="head">Tipo</th>
<th class="head">Valores predeterminados</th>
<th class="head">Descripción</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>origen</strong></td>
<td><code class="docutils literal notranslate"><span class="pre">ANY-INTEGER</span></code></td>
<td>&#160;</td>
<td>Identificador del primer punto final en el vértice de la arista.</td>
</tr>
<tr class="row-odd"><td><strong>objetivo</strong></td>
<td><code class="docutils literal notranslate"><span class="pre">ANY-INTEGER</span></code></td>
<td>&#160;</td>
<td>Identificador del segundo punto final en el vértice de la arista.</td>
</tr>
<tr class="row-even"><td><strong>cost</strong></td>
<td><code class="docutils literal notranslate"><span class="pre">ANY-NUMERICAL</span></code></td>
<td>&#160;</td>
<td><p class="first">Peso de la arista <cite>(source, target)</cite></p>
<ul class="last simple">
<li>Cuando es negativo: la arista <cite>(source, target)</cite> no existe, por lo tanto no es parte del grafo.</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><strong>reverse_cost</strong></td>
<td><code class="docutils literal notranslate"><span class="pre">ANY-NUMERICAL</span></code></td>
<td>-1</td>
<td><p class="first">Peso de la arista <cite>(target, source)</cite>,</p>
<ul class="last simple">
<li>En caso negativo: la arista  <cite>(target, source)</cite> no existe, por lo tanto no es parte del grafo.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Donde:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">ANY-INTEGER:</th><td class="field-body">SMALLINT, INTEGER, BIGINT</td>
</tr>
<tr class="field-even field"><th class="field-name">ANY-NUMERICAL:</th><td class="field-body">SMALLINT, INTEGER, BIGINT, REAL, FLOAT</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="result-columns">
<h2>Columnas de Resultados<a class="headerlink" href="#result-columns" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Devuelve un conjunto de <code class="docutils literal notranslate"><span class="pre">(start_vid,</span> <span class="pre">end_vid,</span> <span class="pre">agg_cost)</span></code></p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="17%" />
<col width="65%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Columna</th>
<th class="head">Tipo</th>
<th class="head">Descripción</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>start_vid</strong></td>
<td><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></td>
<td>Identificador del vértice inicial.</td>
</tr>
<tr class="row-odd"><td><strong>end_vid</strong></td>
<td><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></td>
<td>Identificador del vértice final.</td>
</tr>
<tr class="row-even"><td><strong>agg_cost</strong></td>
<td><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></td>
<td>Costo total de <code class="docutils literal notranslate"><span class="pre">start_vid</span></code> a <code class="docutils literal notranslate"><span class="pre">end_vid</span></code>.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="see-also">
<h2>Ver también<a class="headerlink" href="#see-also" title="Enlazar permanentemente con este título">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="pgr_johnson.html"><span class="doc">pgr_johnson</span></a></li>
<li><a class="reference external" href="https://www.boost.org/libs/graph/doc/floyd_warshall_shortest.html">Algoritmo floyd-Warshall</a> en Boost</li>
<li>Queries utiliza la red <a class="reference internal" href="sampledata.html"><span class="doc">Datos Muestra</span></a></li>
</ul>
<p class="rubric">Índices y tablas</p>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><span class="std std-ref">Índice</span></a></li>
<li><a class="reference internal" href="search.html"><span class="std std-ref">Página de Búsqueda</span></a></li>
</ul>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright pgRouting Contributors - Version v3.0.6.<br/>
      Actualizado por última vez en oct. 23, 2021.<br/>
      Creado con <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.2.<br/>
    </p>
  </div>
</footer>
  </body>
</html>