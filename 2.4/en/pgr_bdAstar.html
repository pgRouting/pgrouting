<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>pgr_bdAstar - Bi-directional A* Shortest Path &mdash; pgRouting Manual (2.4)</title>
    
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     'v2.4.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="top" title="pgRouting Manual (2.4)" href="index.html" />
    <link rel="up" title="Routing Functions" href="routingFunctions.html" />
    <link rel="next" title="pgr_bdDijkstra" href="pgr_bdDijkstra.html" />
    <link rel="prev" title="pgr_johnson" href="pgr_johnson.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html"><span><img src="_static/pgrouting.png"></span>
          pgRouting</a>
        <span class="navbar-text navbar-version pull-left"><b>v2.4.2</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="pgRouting-introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="pgRouting-installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="support.html">Support</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="sampledata.html">Sample Data</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="pgRouting-concepts.html">pgRouting Concepts</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="pgr_version.html">pgr_version</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="types_index.html">pgRouting Data Types</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="topology-functions.html">Topology - Family of Functions</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="routingFunctions.html">Routing Functions</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="proposed.html">Stable proposed Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="proposed.html#experimental-and-proposed-functions">Experimental and Proposed functions</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="release_notes.html">Release Notes</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">pgr_bdAstar - Bi-directional A* Shortest Path</a><ul>
<li><a class="reference internal" href="#name">Name</a></li>
<li><a class="reference internal" href="#synopsis">Synopsis</a></li>
<li><a class="reference internal" href="#description">Description</a></li>
<li><a class="reference internal" href="#examples">Examples</a></li>
<li><a class="reference internal" href="#see-also">See Also</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="pgr_johnson.html" title="Previous Chapter: pgr_johnson"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; pgr_johnson</span>
    </a>
  </li>
  <li>
    <a href="pgr_bdDijkstra.html" title="Next Chapter: pgr_bdDijkstra"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">pgr_bdDijkstra &raquo;</span>
    </a>
  </li>
              
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="pgr-bdastar-bi-directional-a-shortest-path">
<span id="bd-astar"></span><h1>pgr_bdAstar - Bi-directional A* Shortest Path<a class="headerlink" href="#pgr-bdastar-bi-directional-a-shortest-path" title="Permalink to this headline">¶</a></h1>
<div class="section" id="name">
<span id="index-0"></span><h2>Name<a class="headerlink" href="#name" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal"><span class="pre">pgr_bdAstar</span></code> - Returns the shortest path using Bidirectional A* algorithm.</p>
</div>
<div class="section" id="synopsis">
<h2>Synopsis<a class="headerlink" href="#synopsis" title="Permalink to this headline">¶</a></h2>
<p>This is a bi-directional A* search algorithm. It searches from the source toward the distination and at the same time from the destination to the source and terminates whe these to searches meet in the middle. Returns a set of <a class="reference internal" href="cost_result.html#type-cost-result"><span class="std std-ref">pgr_costResult</span></a> (seq, id1, id2, cost) rows, that make up a path.</p>
<div class="highlight-sql"><div class="highlight"><pre><span></span><span class="n">pgr_costResult</span><span class="p">[]</span> <span class="n">pgr_bdAstar</span><span class="p">(</span><span class="k">sql</span> <span class="nb">text</span><span class="p">,</span> <span class="k">source</span> <span class="nb">integer</span><span class="p">,</span> <span class="n">target</span> <span class="nb">integer</span><span class="p">,</span>
                             <span class="n">directed</span> <span class="nb">boolean</span><span class="p">,</span> <span class="n">has_rcost</span> <span class="nb">boolean</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">sql:</th><td class="field-body"><p class="first">a SQL query, which should return a set of rows with the following columns:</p>
<div class="highlight-sql"><div class="highlight"><pre><span></span><span class="k">SELECT</span> <span class="n">id</span><span class="p">,</span> <span class="k">source</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">cost</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span> <span class="p">[,</span><span class="n">reverse_cost</span><span class="p">]</span> <span class="k">FROM</span> <span class="n">edge_table</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">id:</th><td class="field-body"><code class="docutils literal"><span class="pre">int4</span></code> identifier of the edge</td>
</tr>
<tr class="field-even field"><th class="field-name">source:</th><td class="field-body"><code class="docutils literal"><span class="pre">int4</span></code> identifier of the source vertex</td>
</tr>
<tr class="field-odd field"><th class="field-name">target:</th><td class="field-body"><code class="docutils literal"><span class="pre">int4</span></code> identifier of the target vertex</td>
</tr>
<tr class="field-even field"><th class="field-name">cost:</th><td class="field-body"><code class="docutils literal"><span class="pre">float8</span></code> value, of the edge traversal cost. A negative cost will prevent the edge from being inserted in the graph.</td>
</tr>
<tr class="field-odd field"><th class="field-name">x1:</th><td class="field-body"><code class="docutils literal"><span class="pre">x</span></code> coordinate of the start point of the edge</td>
</tr>
<tr class="field-even field"><th class="field-name">y1:</th><td class="field-body"><code class="docutils literal"><span class="pre">y</span></code> coordinate of the start point of the edge</td>
</tr>
<tr class="field-odd field"><th class="field-name">x2:</th><td class="field-body"><code class="docutils literal"><span class="pre">x</span></code> coordinate of the end point of the edge</td>
</tr>
<tr class="field-even field"><th class="field-name">y2:</th><td class="field-body"><code class="docutils literal"><span class="pre">y</span></code> coordinate of the end point of the edge</td>
</tr>
<tr class="field-odd field"><th class="field-name">reverse_cost:</th><td class="field-body">(optional) the cost for the reverse traversal of the edge. This is only used when the <code class="docutils literal"><span class="pre">directed</span></code> and <code class="docutils literal"><span class="pre">has_rcost</span></code> parameters are <code class="docutils literal"><span class="pre">true</span></code> (see the above remark about negative costs).</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="field-even field"><th class="field-name">source:</th><td class="field-body"><p class="first"><code class="docutils literal"><span class="pre">int4</span></code> id of the start point</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">target:</th><td class="field-body"><p class="first"><code class="docutils literal"><span class="pre">int4</span></code> id of the end point</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">directed:</th><td class="field-body"><p class="first"><code class="docutils literal"><span class="pre">true</span></code> if the graph is directed</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">has_rcost:</th><td class="field-body"><p class="first last">if <code class="docutils literal"><span class="pre">true</span></code>, the <code class="docutils literal"><span class="pre">reverse_cost</span></code> column of the SQL generated set of rows will be used for the cost of the traversal of the edge in the opposite direction.</p>
</td>
</tr>
</tbody>
</table>
<p>Returns set of <a class="reference internal" href="cost_result.html#type-cost-result"><span class="std std-ref">pgr_costResult[]</span></a>:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">seq:</th><td class="field-body">row sequence</td>
</tr>
<tr class="field-even field"><th class="field-name">id1:</th><td class="field-body">node ID</td>
</tr>
<tr class="field-odd field"><th class="field-name">id2:</th><td class="field-body">edge ID (<code class="docutils literal"><span class="pre">-1</span></code> for the last row)</td>
</tr>
<tr class="field-even field"><th class="field-name">cost:</th><td class="field-body">cost to traverse from <code class="docutils literal"><span class="pre">id1</span></code> using <code class="docutils literal"><span class="pre">id2</span></code></td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">You must reconnect to the database after <code class="docutils literal"><span class="pre">CREATE</span> <span class="pre">EXTENSION</span> <span class="pre">pgrouting</span></code>. Otherwise the function will return <code class="docutils literal"><span class="pre">Error</span> <span class="pre">computing</span> <span class="pre">path:</span> <span class="pre">std::bad_alloc</span></code>.</p>
</div>
<p class="rubric">History</p>
<ul class="simple">
<li>New in version 2.0.0</li>
</ul>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Without <code class="docutils literal"><span class="pre">reverse_cost</span></code></li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">pgr_bdAStar</span><span class="p">(</span>
    <span class="s1">&#39;SELECT id::INTEGER, source::INTEGER, target::INTEGER, cost, x1, y1, x2, y2</span>
     <span class="n">FROM</span> <span class="n">edge_table</span><span class="s1">&#39;,</span>
    <span class="mi">4</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">false</span><span class="p">,</span> <span class="n">false</span><span class="p">);</span>
 <span class="n">seq</span> <span class="o">|</span> <span class="n">id1</span> <span class="o">|</span> <span class="n">id2</span> <span class="o">|</span> <span class="n">cost</span> 
<span class="o">-----+-----+-----+------</span>
   <span class="mi">0</span> <span class="o">|</span>   <span class="mi">4</span> <span class="o">|</span>   <span class="mi">3</span> <span class="o">|</span>    <span class="mi">0</span>
   <span class="mi">1</span> <span class="o">|</span>   <span class="mi">3</span> <span class="o">|</span>   <span class="mi">5</span> <span class="o">|</span>    <span class="mi">1</span>
   <span class="mi">2</span> <span class="o">|</span>   <span class="mi">6</span> <span class="o">|</span>  <span class="mi">11</span> <span class="o">|</span>    <span class="mi">1</span>
   <span class="mi">3</span> <span class="o">|</span>  <span class="mi">11</span> <span class="o">|</span>  <span class="mi">12</span> <span class="o">|</span>    <span class="mi">0</span>
   <span class="mi">4</span> <span class="o">|</span>  <span class="mi">10</span> <span class="o">|</span>  <span class="o">-</span><span class="mi">1</span> <span class="o">|</span>    <span class="mi">0</span>
<span class="p">(</span><span class="mi">5</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
<ul class="simple">
<li>With <code class="docutils literal"><span class="pre">reverse_cost</span></code></li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">pgr_bdAStar</span><span class="p">(</span>
    <span class="s1">&#39;SELECT id::INTEGER, source::INTEGER, target::INTEGER, cost, x1, y1, x2, y2, reverse_cost</span>
     <span class="n">FROM</span> <span class="n">edge_table</span> <span class="s1">&#39;,</span>
    <span class="mi">4</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">true</span><span class="p">,</span> <span class="n">true</span><span class="p">);</span>
 <span class="n">seq</span> <span class="o">|</span> <span class="n">id1</span> <span class="o">|</span> <span class="n">id2</span> <span class="o">|</span> <span class="n">cost</span> 
<span class="o">-----+-----+-----+------</span>
   <span class="mi">0</span> <span class="o">|</span>   <span class="mi">4</span> <span class="o">|</span>   <span class="mi">3</span> <span class="o">|</span>    <span class="mi">1</span>
   <span class="mi">1</span> <span class="o">|</span>   <span class="mi">3</span> <span class="o">|</span>   <span class="mi">5</span> <span class="o">|</span>    <span class="mi">1</span>
   <span class="mi">2</span> <span class="o">|</span>   <span class="mi">6</span> <span class="o">|</span>   <span class="mi">8</span> <span class="o">|</span>    <span class="mi">1</span>
   <span class="mi">3</span> <span class="o">|</span>   <span class="mi">5</span> <span class="o">|</span>  <span class="mi">10</span> <span class="o">|</span>    <span class="mi">1</span>
   <span class="mi">4</span> <span class="o">|</span>  <span class="mi">10</span> <span class="o">|</span>  <span class="o">-</span><span class="mi">1</span> <span class="o">|</span>    <span class="mi">0</span>
<span class="p">(</span><span class="mi">5</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
<p>The queries use the <a class="reference internal" href="sampledata.html#sampledata"><span class="std std-ref">Sample Data</span></a> network.</p>
</div>
<div class="section" id="see-also">
<h2>See Also<a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="cost_result.html#type-cost-result"><span class="std std-ref">pgr_costResult[]</span></a></li>
<li><a class="reference internal" href="pgr_bdDijkstra.html#pgr-bddijkstra"><span class="std std-ref">pgr_bdDijkstra</span></a></li>
<li><a class="reference external" href="http://en.wikipedia.org/wiki/Bidirectional_search">http://en.wikipedia.org/wiki/Bidirectional_search</a></li>
<li><a class="reference external" href="http://en.wikipedia.org/wiki/A*_search_algorithm">http://en.wikipedia.org/wiki/A*_search_algorithm</a></li>
</ul>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright pgRouting Contributors - Version v2.4.2.<br/>
      Last updated on Aug 15, 2017.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.<br/>
    </p>
  </div>
</footer>
  </body>
</html>