

<!DOCTYPE html>

<html lang="sv" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>pgRouting-koncept &#8212; pgRouting Manual (4.1-dev)</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/bootstrap-sphinx.css?v=5a695559" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css?v=4a28828c" />
    <script src="_static/documentation_options.js?v=4e2df6f4"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/page_history.js?v=1fc9dd11"></script>
    <script src="_static/translations.js?v=92a62177"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Sök" href="search.html" />
    <link rel="next" title="Funktionsfamiljer" href="routingFunctions.html" />
    <link rel="prev" title="Exempeldata" href="sampledata.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="_static/js/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="_static/js/jquery-fix.js"></script>
<script type="text/javascript" src="_static/bootstrap-2.3.2/js/bootstrap.min.js"></script>
<script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>

  </head><body>

  <div id="navbar" class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>

        <a class="brand" href="index.html">
          pgRouting</a>
        <span class="navbar-text pull-left"><b>v4.1</b></span>

        <div class="nav-collapse">
          <ul class="nav">
            <li class="divider-vertical"></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="pgRouting-introduction.html">Introduktion</a></li>
<li class="toctree-l1"><a class="reference internal" href="pgRouting-installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="support.html">Support</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="sampledata.html">Exempeldata</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">pgRouting-koncept</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="routingFunctions.html">Funktionsfamiljer</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="proposed.html">Föreslagna funktioner</a></li>
<li class="toctree-l1"><a class="reference internal" href="experimental.html">Experimentella funktioner</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="release_notes.html">Versionsinformation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="migration.html">Migrationsguide</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">pgRouting-koncept</a><ul>
<li><a class="reference internal" href="#graphs">Diagram</a><ul>
<li><a class="reference internal" href="#graph-definition">Definition av graf</a></li>
<li><a class="reference internal" href="#graph-with-cost">Graf med <code class="docutils literal notranslate"><span class="pre">kostnad</span></code></a></li>
<li><a class="reference internal" href="#graph-with-cost-and-reverse-cost">Graf med <code class="docutils literal notranslate"><span class="pre">kostnad</span></code> och <code class="docutils literal notranslate"><span class="pre">omvända_kostnader</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#graphs-without-geometries">Grafer utan geometrier</a><ul>
<li><a class="reference internal" href="#wiki-example">Wiki-exempel</a><ul>
<li><a class="reference internal" href="#prepare-the-database">Förbereda databasen</a></li>
<li><a class="reference internal" href="#create-a-table">Skapa en tabell</a></li>
<li><a class="reference internal" href="#insert-the-data">Infoga data</a></li>
<li><a class="reference internal" href="#find-the-shortest-path">Hitta den kortaste vägen</a></li>
<li><a class="reference internal" href="#vertex-information">Information om toppunkt</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#graphs-with-geometries">Grafer med geometrier</a><ul>
<li><a class="reference internal" href="#create-a-routing-database">Skapa en routningsdatabas</a></li>
<li><a class="reference internal" href="#load-data">Ladda data</a></li>
<li><a class="reference internal" href="#build-a-routing-topology">Bygga upp en routingtopologi</a></li>
<li><a class="reference internal" href="#adjust-costs">Justera kostnader</a><ul>
<li><a class="reference internal" href="#update-costs-to-length-of-geometry">Uppdatera kostnaderna till geometrins längd</a></li>
<li><a class="reference internal" href="#update-costs-based-on-codes">Uppdatera kostnader baserat på koder</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#check-the-routing-topology">Kontrollera routingtopologin</a><ul>
<li><a class="reference internal" href="#crossing-edges">Korsande kanter</a><ul>
<li><a class="reference internal" href="#fixing-an-intersection">Fixa en korsning</a></li>
</ul>
</li>
<li><a class="reference internal" href="#touching-edges">Beröring av kanter</a><ul>
<li><a class="reference internal" href="#fixing-a-gap">Åtgärda en lucka</a></li>
</ul>
</li>
<li><a class="reference internal" href="#connecting-components">Anslutning av komponenter</a></li>
<li><a class="reference internal" href="#contraction-of-a-graph">Sammandragning av en graf</a><ul>
<li><a class="reference internal" href="#dead-ends">Döda ändar</a></li>
<li><a class="reference internal" href="#linear-edges">Linjära kanter</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#function-s-structure">Funktionens struktur</a></li>
<li><a class="reference internal" href="#function-s-overloads">Funktionens överbelastningar</a><ul>
<li><a class="reference internal" href="#one-to-one">En till en</a></li>
<li><a class="reference internal" href="#one-to-many">En till många</a></li>
<li><a class="reference internal" href="#many-to-one">Många till en</a></li>
<li><a class="reference internal" href="#many-to-many">Många till många</a></li>
<li><a class="reference internal" href="#combinations">Kombinationer</a></li>
</ul>
</li>
<li><a class="reference internal" href="#inner-queries">Inre frågor</a><ul>
<li><a class="reference internal" href="#edges-sql">Kanter SQL</a><ul>
<li><a class="reference internal" href="#general">Allmänt</a></li>
<li><a class="reference internal" href="#general-without-id">Allmänt utan <code class="docutils literal notranslate"><span class="pre">id</span></code></a></li>
<li><a class="reference internal" href="#general-with-x-y">Allmänt med (X,Y)</a></li>
<li><a class="reference internal" href="#flow">Flöde</a></li>
</ul>
</li>
<li><a class="reference internal" href="#combinations-sql">Kombinationer SQL</a></li>
<li><a class="reference internal" href="#restrictions-sql">Begränsningar SQL</a></li>
<li><a class="reference internal" href="#points-sql">Punkt SQL</a></li>
</ul>
</li>
<li><a class="reference internal" href="#parameters">Parametrar</a><ul>
<li><a class="reference internal" href="#parameters-for-the-via-functions">Parametrar för Via-funktionerna</a></li>
<li><a class="reference internal" href="#for-the-trsp-functions">För TRSP-funktionerna</a></li>
</ul>
</li>
<li><a class="reference internal" href="#result-columns">Resultat kolumner</a><ul>
<li><a class="reference internal" href="#result-columns-for-single-path-functions">Resultatkolumner för funktioner med enkel sökväg</a></li>
<li><a class="reference internal" href="#result-columns-for-multiple-paths-functions">Resultatkolumner för funktioner med flera sökvägar</a></li>
<li><a class="reference internal" href="#result-columns-for-cost-functions">Resultatkolumner för kostnadsfunktioner</a></li>
<li><a class="reference internal" href="#result-columns-for-flow-functions">Resultatkolumner för flödesfunktioner</a></li>
<li><a class="reference internal" href="#result-columns-for-spanning-tree-functions">Resultatkolumner för funktioner för spännträd</a></li>
<li><a class="reference internal" href="#result-columns-for-simple-spanning-tree-functions">Resultatkolumner för funktioner för enkla spännträd</a></li>
</ul>
</li>
<li><a class="reference internal" href="#performance-tips">Tips om prestanda</a><ul>
<li><a class="reference internal" href="#for-the-routing-functions">För Routing-funktionerna</a></li>
</ul>
</li>
<li><a class="reference internal" href="#how-to-contribute">Hur du bidrar</a></li>
<li><a class="reference internal" href="#see-also">Se även</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="sampledata.html" title="Previous Chapter: Exempeldata"><span class="icon-chevron-left visible-tablet"></span><span class="hidden-sm hidden-tablet">&laquo; Exempeldata</span>
    </a>
  </li>
  <li>
    <a href="routingFunctions.html" title="Next Chapter: Funktionsfamiljer"><span class="icon-chevron-right visible-tablet"></span><span class="hidden-sm hidden-tablet">Funktionsfamiljer &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
      </div>
    </div>
  </div>

<div class="container">
    <div class="row">
        <div class="body span12 content" role="main">
            <script> document.write(get_history('pgRouting-concepts','sv'));  </script>
            
  <div class="line-block">
<div class="line"><br /></div>
</div>
<section id="pgrouting-concepts">
<h1>pgRouting-koncept<a class="headerlink" href="#pgrouting-concepts" title="Link to this heading">¶</a></h1>
<p>Det här är en enkel guide som går igenom några av stegen för att komma igång med pgRouting. Den här guiden täcker:</p>
<nav class="contents local" id="innehall">
<ul class="simple">
<li><p><a class="reference internal" href="#graphs" id="id8">Diagram</a></p>
<ul>
<li><p><a class="reference internal" href="#graph-definition" id="id9">Definition av graf</a></p></li>
<li><p><a class="reference internal" href="#graph-with-cost" id="id10">Graf med <code class="docutils literal notranslate"><span class="pre">kostnad</span></code></a></p></li>
<li><p><a class="reference internal" href="#graph-with-cost-and-reverse-cost" id="id11">Graf med <code class="docutils literal notranslate"><span class="pre">kostnad</span></code> och <code class="docutils literal notranslate"><span class="pre">omvända_kostnader</span></code></a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#graphs-without-geometries" id="id12">Grafer utan geometrier</a></p>
<ul>
<li><p><a class="reference internal" href="#wiki-example" id="id13">Wiki-exempel</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#graphs-with-geometries" id="id14">Grafer med geometrier</a></p>
<ul>
<li><p><a class="reference internal" href="#create-a-routing-database" id="id15">Skapa en routningsdatabas</a></p></li>
<li><p><a class="reference internal" href="#load-data" id="id16">Ladda data</a></p></li>
<li><p><a class="reference internal" href="#build-a-routing-topology" id="id17">Bygga upp en routingtopologi</a></p></li>
<li><p><a class="reference internal" href="#adjust-costs" id="id18">Justera kostnader</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#check-the-routing-topology" id="id19">Kontrollera routingtopologin</a></p>
<ul>
<li><p><a class="reference internal" href="#crossing-edges" id="id20">Korsande kanter</a></p></li>
<li><p><a class="reference internal" href="#touching-edges" id="id21">Beröring av kanter</a></p></li>
<li><p><a class="reference internal" href="#connecting-components" id="id22">Anslutning av komponenter</a></p></li>
<li><p><a class="reference internal" href="#contraction-of-a-graph" id="id23">Sammandragning av en graf</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#function-s-structure" id="id24">Funktionens struktur</a></p></li>
<li><p><a class="reference internal" href="#function-s-overloads" id="id25">Funktionens överbelastningar</a></p>
<ul>
<li><p><a class="reference internal" href="#one-to-one" id="id26">En till en</a></p></li>
<li><p><a class="reference internal" href="#one-to-many" id="id27">En till många</a></p></li>
<li><p><a class="reference internal" href="#many-to-one" id="id28">Många till en</a></p></li>
<li><p><a class="reference internal" href="#many-to-many" id="id29">Många till många</a></p></li>
<li><p><a class="reference internal" href="#combinations" id="id30">Kombinationer</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#inner-queries" id="id31">Inre frågor</a></p>
<ul>
<li><p><a class="reference internal" href="#edges-sql" id="id32">Kanter SQL</a></p></li>
<li><p><a class="reference internal" href="#combinations-sql" id="id33">Kombinationer SQL</a></p></li>
<li><p><a class="reference internal" href="#restrictions-sql" id="id34">Begränsningar SQL</a></p></li>
<li><p><a class="reference internal" href="#points-sql" id="id35">Punkt SQL</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#parameters" id="id36">Parametrar</a></p>
<ul>
<li><p><a class="reference internal" href="#parameters-for-the-via-functions" id="id37">Parametrar för Via-funktionerna</a></p></li>
<li><p><a class="reference internal" href="#for-the-trsp-functions" id="id38">För TRSP-funktionerna</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#result-columns" id="id39">Resultat kolumner</a></p>
<ul>
<li><p><a class="reference internal" href="#result-columns-for-single-path-functions" id="id40">Resultatkolumner för funktioner med enkel sökväg</a></p></li>
<li><p><a class="reference internal" href="#result-columns-for-multiple-paths-functions" id="id41">Resultatkolumner för funktioner med flera sökvägar</a></p></li>
<li><p><a class="reference internal" href="#result-columns-for-cost-functions" id="id42">Resultatkolumner för kostnadsfunktioner</a></p></li>
<li><p><a class="reference internal" href="#result-columns-for-flow-functions" id="id43">Resultatkolumner för flödesfunktioner</a></p></li>
<li><p><a class="reference internal" href="#result-columns-for-spanning-tree-functions" id="id44">Resultatkolumner för funktioner för spännträd</a></p></li>
<li><p><a class="reference internal" href="#result-columns-for-simple-spanning-tree-functions" id="id45">Resultatkolumner för funktioner för enkla spännträd</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#performance-tips" id="id46">Tips om prestanda</a></p>
<ul>
<li><p><a class="reference internal" href="#for-the-routing-functions" id="id47">För Routing-funktionerna</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#how-to-contribute" id="id48">Hur du bidrar</a></p></li>
<li><p><a class="reference internal" href="#see-also" id="id49">Se även</a></p></li>
</ul>
</nav>
<section id="graphs">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">Diagram</a><a class="headerlink" href="#graphs" title="Link to this heading">¶</a></h2>
<nav class="contents local" id="id1">
<ul class="simple">
<li><p><a class="reference internal" href="#graph-definition" id="id50">Definition av graf</a></p></li>
<li><p><a class="reference internal" href="#graph-with-cost" id="id51">Graf med <code class="docutils literal notranslate"><span class="pre">kostnad</span></code></a></p></li>
<li><p><a class="reference internal" href="#graph-with-cost-and-reverse-cost" id="id52">Graf med <code class="docutils literal notranslate"><span class="pre">kostnad</span></code> och <code class="docutils literal notranslate"><span class="pre">omvända_kostnader</span></code></a></p></li>
</ul>
</nav>
<section id="graph-definition">
<h3><a class="toc-backref" href="#id50" role="doc-backlink">Definition av graf</a><a class="headerlink" href="#graph-definition" title="Link to this heading">¶</a></h3>
<p>En graf är ett ordnat par <span class="math notranslate nohighlight">\(G = (V ,E)\)</span> där:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(V\)</span> is a set of vertices, also called nodes.</p></li>
<li><p><span class="math notranslate nohighlight">\(E \subseteq \{( u, v ) \mid u , v \in V \}\)</span></p></li>
</ul>
<p>Det finns olika typer av grafer:</p>
<ul class="simple">
<li><p>Oriktad graf</p>
<ul>
<li><p><span class="math notranslate nohighlight">\(E \subseteq \{( u, v ) \mid u , v \in V\}\)</span></p></li>
</ul>
</li>
<li><p>Ogirigerad enkel graf</p>
<ul>
<li><p><span class="math notranslate nohighlight">\(E \subseteq \{( u, v ) \mid u , v \in V, u \neq v\}\)</span></p></li>
</ul>
</li>
<li><p>Riktad graf</p>
<ul>
<li><p><span class="math notranslate nohighlight">\(E \subseteq \{( u, v ) \mid (u , v) \in (V X V) \}\)</span></p></li>
</ul>
</li>
<li><p>Riktad enkel graf</p>
<ul>
<li><p><span class="math notranslate nohighlight">\(E \subseteq \{( u, v ) \mid (u , v) \in (V X V), u \neq v\}\)</span></p></li>
</ul>
</li>
</ul>
<p>Diagram:</p>
<ul class="simple">
<li><p>Har inte geometrier.</p></li>
<li><p>Vissa grafteoretiska problem kräver att graferna har vikter, som kallas <strong>kostnad</strong> i pgRouting.</p></li>
</ul>
<p>I pgRouting finns det flera sätt att representera en graf i databasen:</p>
<ul class="simple">
<li><p>Med <code class="docutils literal notranslate"><span class="pre">kostnad</span></code></p>
<ul>
<li><p>(<code class="docutils literal notranslate"><span class="pre">id</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code>, <code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">cost</span></code>)</p></li>
</ul>
</li>
<li><p>Med <code class="docutils literal notranslate"><span class="pre">kostnad</span></code> och <code class="docutils literal notranslate"><span class="pre">omvänd_kostnad</span></code></p>
<ul>
<li><p>(<code class="docutils literal notranslate"><span class="pre">id</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code>, <code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">cost</span></code>, <code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code>)</p></li>
</ul>
</li>
</ul>
<p>Var:</p>
<table class="docutils align-default" style="width: 81">
<thead>
<tr class="row-odd"><th class="head"><p>Kolumn</p></th>
<th class="head"><p>Beskrivning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">id</span></code></p></td>
<td><p>Identifierare av kanten. Krav på att använda databasen på ett konsekvent sätt.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">source</span></code></p></td>
<td><p>Identifierare för en vertex.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">target</span></code></p></td>
<td><p>Identifierare för en vertex.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cost</span></code></p></td>
<td><p>Kantvikt (<code class="docutils literal notranslate"><span class="pre">källa</span></code>, <code class="docutils literal notranslate"><span class="pre">mål</span></code>):</p>
<ul class="simple">
<li><p>När den är negativ finns inte kanten (<code class="docutils literal notranslate"><span class="pre">källa</span></code>, <code class="docutils literal notranslate"><span class="pre">mål</span></code>) i grafen.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cost</span></code> måste finnas i frågan.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code></p></td>
<td><p>Kantvikt (<code class="docutils literal notranslate"><span class="pre">mål</span></code>, <code class="docutils literal notranslate"><span class="pre">källa</span></code>)</p>
<ul class="simple">
<li><p>När den är negativ finns inte kanten (<code class="docutils literal notranslate"><span class="pre">mål</span></code>, <code class="docutils literal notranslate"><span class="pre">källa</span></code>) i grafen.</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Beslutet om grafen ska vara <strong>directed</strong> eller <strong>undirected</strong> fattas när en pgRouting-algoritm körs.</p>
</section>
<section id="graph-with-cost">
<h3><a class="toc-backref" href="#id51" role="doc-backlink">Graf med <code class="docutils literal notranslate"><span class="pre">kostnad</span></code></a><a class="headerlink" href="#graph-with-cost" title="Link to this heading">¶</a></h3>
<p>Den viktade riktade grafen, <span class="math notranslate nohighlight">\(G_d(V,E)\)</span>:</p>
<ul>
<li><p>Grafdata erhålls med en fråga</p>
<p><code class="docutils literal notranslate"><span class="pre">Välj</span> <span class="pre">id,</span> <span class="pre">källa,</span> <span class="pre">mål,</span> <span class="pre">kostnad</span> <span class="pre">från</span> <span class="pre">kanter</span></code></p>
</li>
<li><p>uppsättningen kanter <span class="math notranslate nohighlight">\(E\)</span></p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(E = \{(source_{id}, target_{id}, cost_{id}) \text{ when } cost_{id}
\ge 0 \}\)</span></p></li>
<li><p>Kanter där <code class="docutils literal notranslate"><span class="pre">kostnad</span></code> inte är negativ är en del av grafen.</p></li>
</ul>
</li>
<li><p>uppsättningen av hörn <span class="math notranslate nohighlight">\(V\)</span></p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(V = \{source_{id} \cup target_{id}\}\)</span></p></li>
<li><p>Alla hörn i <code class="docutils literal notranslate"><span class="pre">källa</span></code> och <code class="docutils literal notranslate"><span class="pre">mål</span></code> är en del av grafen.</p></li>
</ul>
</li>
</ul>
<p class="rubric">Riktad graf</p>
<p>I en riktad graf har kanten <span class="math notranslate nohighlight">\((source_{id}, target_{id}, cost_{id})\)</span> riktning: <span class="math notranslate nohighlight">\(source_{id} \rightarrow target_{id}\)</span></p>
<p>För följande uppgifter:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="o">*</span>
<span class="n">FROM</span> <span class="p">(</span><span class="n">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">))</span>
     <span class="n">AS</span> <span class="n">t</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">cost</span><span class="p">);</span>
 <span class="nb">id</span> <span class="o">|</span> <span class="n">source</span> <span class="o">|</span> <span class="n">target</span> <span class="o">|</span> <span class="n">cost</span>
<span class="o">----+--------+--------+------</span>
  <span class="mi">1</span> <span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>      <span class="mi">2</span> <span class="o">|</span>    <span class="mi">5</span>
  <span class="mi">2</span> <span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>      <span class="mi">3</span> <span class="o">|</span>   <span class="o">-</span><span class="mi">3</span>
<span class="p">(</span><span class="mi">2</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
<p>Edge <span class="math notranslate nohighlight">\(2\)</span> (<span class="math notranslate nohighlight">\(1 \rightarrow 3\)</span>) är inte en del av grafen.</p>
<p>Uppgifterna representeras av följande graf:</p>
<div class="graphviz"><img src="_images/graphviz-6bd797ca50768e0f10212a0236a85afbd8bb3771.png" alt="digraph G {
 1 -&gt; 2 [label=&quot;1(5)&quot;];
 3;
}" class="graphviz" /></div>
<p class="rubric">Oriktad graf</p>
<p>I en ostyrd graf har kanten <span class="math notranslate nohighlight">\((källa_{id}, mål_{id}, kostnad_{id})\)</span> inte riktning: <span class="math notranslate nohighlight">\(källa_{id} \frac{\;\;\;\;\;}{} mål_{id}\)</span></p>
<ul class="simple">
<li><p>I termer av en riktad graf är det som att ha två kanter: <span class="math notranslate nohighlight">\(source_{id} \leftrightarrow target_{id}\)</span></p></li>
</ul>
<p>För följande uppgifter:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="o">*</span>
<span class="n">FROM</span> <span class="p">(</span><span class="n">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">))</span>
     <span class="n">AS</span> <span class="n">t</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">cost</span><span class="p">);</span>
 <span class="nb">id</span> <span class="o">|</span> <span class="n">source</span> <span class="o">|</span> <span class="n">target</span> <span class="o">|</span> <span class="n">cost</span>
<span class="o">----+--------+--------+------</span>
  <span class="mi">1</span> <span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>      <span class="mi">2</span> <span class="o">|</span>    <span class="mi">5</span>
  <span class="mi">2</span> <span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>      <span class="mi">3</span> <span class="o">|</span>   <span class="o">-</span><span class="mi">3</span>
<span class="p">(</span><span class="mi">2</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
<p>Kanten <span class="math notranslate nohighlight">\(2\)</span> (<span class="math notranslate nohighlight">\(1 \frac{\;\;\;\;\;}{} 3\)</span>) är inte en del av grafen.</p>
<p>Uppgifterna representeras av följande graf:</p>
<div class="graphviz"><img src="_images/graphviz-18dbb5ac9f77e565b643a0f0e7310253dedbee20.png" alt="graph G {
 1 -- 2 [label=&quot;1(5)&quot;];
 3;
}" class="graphviz" /></div>
</section>
<section id="graph-with-cost-and-reverse-cost">
<h3><a class="toc-backref" href="#id52" role="doc-backlink">Graf med <code class="docutils literal notranslate"><span class="pre">kostnad</span></code> och <code class="docutils literal notranslate"><span class="pre">omvända_kostnader</span></code></a><a class="headerlink" href="#graph-with-cost-and-reverse-cost" title="Link to this heading">¶</a></h3>
<p>Den viktade riktade grafen, <span class="math notranslate nohighlight">\(G_d(V,E)\)</span>, definieras av:</p>
<ul>
<li><p>Grafdata erhålls med en fråga</p>
<p><code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">id,</span> <span class="pre">källa,</span> <span class="pre">mål,</span> <span class="pre">kostnad,</span> <span class="pre">omvänd_kostnad</span> <span class="pre">FROM</span> <span class="pre">kanter</span></code></p>
</li>
<li><p>Mängden kanter <span class="math notranslate nohighlight">\(E\)</span>:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(E = \begin{split} \begin{align}
&amp; {\{(source_{id}, target_{id}, cost_{id}) \text{ when } cost_{id} &gt;=0 \}} \\
&amp; \cup \\
&amp; {\{(target_{id}, source_{id}, reverse\_cost_{id}) \text{ when } reverse\_cost_{id} &gt;=0 \}}
\end{align} \end{split}\)</span></p></li>
<li><p>Edges <span class="math notranslate nohighlight">\((source \rightarrow target)\)</span> där <code class="docutils literal notranslate"><span class="pre">cost</span></code> är icke-negativ är en del av grafen.</p></li>
<li><p>Edges <span class="math notranslate nohighlight">\((target \rightarrow source)\)</span> där <code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code> är icke-negativ är en del av grafen.</p></li>
</ul>
</li>
<li><p>Mängden hörn <span class="math notranslate nohighlight">\(V\)</span>:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(V = \{source_{id} \cup target_{id}\}\)</span></p></li>
<li><p>Alla hörn i <code class="docutils literal notranslate"><span class="pre">källa</span></code> och <code class="docutils literal notranslate"><span class="pre">mål</span></code> är en del av grafen.</p></li>
</ul>
</li>
</ul>
<p class="rubric">Riktad graf</p>
<p>I en riktad graf har båda kanterna riktning</p>
<ul class="simple">
<li><p>kanten <span class="math notranslate nohighlight">\((källa_{id}, mål_{id}, kostnad_{id})\)</span> har riktning: <span class="math notranslate nohighlight">\(källa_{id} \rightarrow mål_{id}\)</span></p></li>
<li><p>kanten <span class="math notranslate nohighlight">\((target_{id}, source_{id}, reverse\_cost_{id})\)</span> har riktning: <span class="math notranslate nohighlight">\(target_{id} \rightarrow source_{id}\)</span></p></li>
</ul>
<p>För följande uppgifter:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="o">*</span>
<span class="n">FROM</span> <span class="p">(</span><span class="n">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span>
     <span class="n">AS</span> <span class="n">t</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">cost</span><span class="p">,</span> <span class="n">reverse_cost</span><span class="p">);</span>
 <span class="nb">id</span> <span class="o">|</span> <span class="n">source</span> <span class="o">|</span> <span class="n">target</span> <span class="o">|</span> <span class="n">cost</span> <span class="o">|</span> <span class="n">reverse_cost</span>
<span class="o">----+--------+--------+------+--------------</span>
  <span class="mi">1</span> <span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>      <span class="mi">2</span> <span class="o">|</span>    <span class="mi">5</span> <span class="o">|</span>            <span class="mi">2</span>
  <span class="mi">2</span> <span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>      <span class="mi">3</span> <span class="o">|</span>   <span class="o">-</span><span class="mi">3</span> <span class="o">|</span>            <span class="mi">4</span>
  <span class="mi">3</span> <span class="o">|</span>      <span class="mi">2</span> <span class="o">|</span>      <span class="mi">3</span> <span class="o">|</span>    <span class="mi">7</span> <span class="o">|</span>           <span class="o">-</span><span class="mi">1</span>
<span class="p">(</span><span class="mi">3</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
<p>Kanter som inte är en del av grafen:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(2\)</span> (<span class="math notranslate nohighlight">\(1 \rightarrow 3\)</span>)</p></li>
<li><p><span class="math notranslate nohighlight">\(3\)</span> (<span class="math notranslate nohighlight">\(3 \rightarrow 2\)</span>)</p></li>
</ul>
<p>Uppgifterna representeras av följande graf:</p>
<div class="graphviz"><img src="_images/graphviz-c2169ba4585bf5915ed2425fe4db5e9152ef0227.png" alt="digraph G {
 1 -&gt; 2 [label=&quot;1(5)&quot;];
 2 -&gt; 1 [label=&quot;1(2)&quot;];
 3 -&gt; 1 [label=&quot;2(4)&quot;];
 2 -&gt; 3 [label=&quot;3(7)&quot;];
}" class="graphviz" /></div>
<p class="rubric">Oriktad graf</p>
<p>I en riktad graf har inte båda kanterna riktning</p>
<ul class="simple">
<li><p>Kant <span class="math notranslate nohighlight">\((källa_{id}, mål_{id}, kostnad_{id})\)</span> är <span class="math notranslate nohighlight">\(källa_{id} \frac{\;\;\;\;\;}{} mål_{id}\)</span></p></li>
<li><p>Kant <span class="math notranslate nohighlight">\((target_{id}, source_{id}, reverse\_cost_{id})\)</span> är <span class="math notranslate nohighlight">\(target_{id} \frac{\;\;\;\;\;}{} source_{id}\)</span></p></li>
<li><p>I termer av en riktad graf är det som att ha fyra kanter:</p>
<ul>
<li><p><span class="math notranslate nohighlight">\(source_i \leftrightarrow target_i\)</span></p></li>
<li><p><span class="math notranslate nohighlight">\(target_i \leftrightarrow source_i\)</span></p></li>
</ul>
</li>
</ul>
<p>För följande uppgifter:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="o">*</span>
<span class="n">FROM</span> <span class="p">(</span><span class="n">VALUES</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span>
     <span class="n">AS</span> <span class="n">t</span><span class="p">(</span><span class="nb">id</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">cost</span><span class="p">,</span> <span class="n">reverse_cost</span><span class="p">);</span>
 <span class="nb">id</span> <span class="o">|</span> <span class="n">source</span> <span class="o">|</span> <span class="n">target</span> <span class="o">|</span> <span class="n">cost</span> <span class="o">|</span> <span class="n">reverse_cost</span>
<span class="o">----+--------+--------+------+--------------</span>
  <span class="mi">1</span> <span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>      <span class="mi">2</span> <span class="o">|</span>    <span class="mi">5</span> <span class="o">|</span>            <span class="mi">2</span>
  <span class="mi">2</span> <span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>      <span class="mi">3</span> <span class="o">|</span>   <span class="o">-</span><span class="mi">3</span> <span class="o">|</span>            <span class="mi">4</span>
  <span class="mi">3</span> <span class="o">|</span>      <span class="mi">2</span> <span class="o">|</span>      <span class="mi">3</span> <span class="o">|</span>    <span class="mi">7</span> <span class="o">|</span>           <span class="o">-</span><span class="mi">1</span>
<span class="p">(</span><span class="mi">3</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
<p>Kanter som inte är en del av grafen:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(2\)</span> (<span class="math notranslate nohighlight">\(1 \frac{\;\;\;\;\;}{} 3\)</span>)</p></li>
<li><p><span class="math notranslate nohighlight">\(3\)</span> (<span class="math notranslate nohighlight">\(3 \frac{\;\;\;\;\;}{} 2\)</span>)</p></li>
</ul>
<p>Uppgifterna representeras av följande graf:</p>
<div class="graphviz"><img src="_images/graphviz-50eb78779f612b19ac347e75cdae53525e6a5576.png" alt="graph G {
 1 -- 2 [label=&quot;1(5)&quot;];
 2 -- 1 [label=&quot;1(2)&quot;];
 3 -- 1 [label=&quot;2(4)&quot;];
 2 -- 3 [label=&quot;3(7)&quot;];
}" class="graphviz" /></div>
</section>
</section>
<section id="graphs-without-geometries">
<h2><a class="toc-backref" href="#id12" role="doc-backlink">Grafer utan geometrier</a><a class="headerlink" href="#graphs-without-geometries" title="Link to this heading">¶</a></h2>
<p>Problem med personliga relationer, släktforskning och filberoende kan lösas med hjälp av pgRouting. Dessa problem har normalt inte geometrier som är kopplade till grafen.</p>
<nav class="contents local" id="id2">
<ul class="simple">
<li><p><a class="reference internal" href="#wiki-example" id="id53">Wiki-exempel</a></p>
<ul>
<li><p><a class="reference internal" href="#prepare-the-database" id="id54">Förbereda databasen</a></p></li>
<li><p><a class="reference internal" href="#create-a-table" id="id55">Skapa en tabell</a></p></li>
<li><p><a class="reference internal" href="#insert-the-data" id="id56">Infoga data</a></p></li>
<li><p><a class="reference internal" href="#find-the-shortest-path" id="id57">Hitta den kortaste vägen</a></p></li>
<li><p><a class="reference internal" href="#vertex-information" id="id58">Information om toppunkt</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="wiki-example">
<h3><a class="toc-backref" href="#id53" role="doc-backlink">Wiki-exempel</a><a class="headerlink" href="#wiki-example" title="Link to this heading">¶</a></h3>
<p>Lös exempelproblemet hämtat från <a class="reference external" href="https://en.wikipedia.org/wiki/Dijkstra%27s_algorithm">wikipedia</a>):</p>
<figure class="align-default">
<img alt="_images/Dijkstra_Animation.gif" src="_images/Dijkstra_Animation.gif" />
</figure>
<p>Var:</p>
<ul>
<li><p>Problemet är att hitta den kortaste vägen från <span class="math notranslate nohighlight">\(1\)</span> till <span class="math notranslate nohighlight">\(5\)</span>.</p></li>
<li><p>Är en odelad graf.</p></li>
<li><p>Även om det visuellt ser ut att finnas geometrier är ritningen inte skalenlig.</p>
<ul class="simple">
<li><p>Inga geometrier associerade till hörn eller kanter</p></li>
</ul>
</li>
<li><p>Har 6 hörn <span class="math notranslate nohighlight">\(\{1,2,3,4,5,6\}\)</span></p></li>
<li><p>Har 9 kanter:</p>
<p><span class="math notranslate nohighlight">\(\begin{split} \begin{align}
E = &amp; \{(1,2,7), (1,3,9), (1,6,14), \\
&amp; (2,3,10), (2,4,13), \\
&amp; (3,4,11), (3,6,2), \\
&amp; (4,5,6), \\
&amp; (5,6,9) \}
\end{align} \end{split}\)</span></p>
</li>
<li><p>Grafen kan representeras på många olika sätt, t.ex:</p></li>
</ul>
<div class="graphviz"><img src="_images/graphviz-e1e7271c22c7d8991843607dc481d11949ba6f18.png" alt="graph G {
 rankdir=&quot;LR&quot;;
 1 [color=&quot;red&quot;];
 5 [color=&quot;green&quot;];
 1 -- 2 [label=&quot;(7)&quot;];
 5 -- 6 [label=&quot;(9)&quot;];
 1 -- 3 [label=&quot;(9)&quot;];
 1 -- 6 [label=&quot;(14)&quot;];
 2 -- 3 [label=&quot;(10)&quot;];
 2 -- 4 [label=&quot;(13)&quot;];
 3 -- 4 [label=&quot;(11)&quot;];
 3 -- 6 [label=&quot;(2)&quot;];
 4 -- 5 [label=&quot;(6)&quot;];
}" class="graphviz" /></div>
<section id="prepare-the-database">
<h4><a class="toc-backref" href="#id54" role="doc-backlink">Förbereda databasen</a><a class="headerlink" href="#prepare-the-database" title="Link to this heading">¶</a></h4>
<p>Skapa en databas för exemplet, gå in i databasen och installera pgRouting:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ createdb wiki
$ psql wiki
wiki =# CREATE EXTENSION pgRouting CASCADE;
</pre></div>
</div>
</section>
<section id="create-a-table">
<h4><a class="toc-backref" href="#id55" role="doc-backlink">Skapa en tabell</a><a class="headerlink" href="#create-a-table" title="Link to this heading">¶</a></h4>
<p>De grundläggande element som behövs för att utföra grundläggande routing på en odelad graf är:</p>
<table class="docutils align-default" style="width: 81">
<thead>
<tr class="row-odd"><th class="head"><p>Kolumn</p></th>
<th class="head"><p>Typ</p></th>
<th class="head"><p>Beskrivning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">id</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td><p>Identifierare av kanten.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">source</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td><p>Identifierare för den första slutpunktsvertexen på kanten.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">target</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td><p>Identifierare för den andra slutpunktsvertexen på kanten.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cost</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td><p>Kantvikt (<code class="docutils literal notranslate"><span class="pre">källa</span></code>, <code class="docutils literal notranslate"><span class="pre">mål</span></code>)</p></td>
</tr>
</tbody>
</table>
<p>Var:</p>
<dl class="field-list simple">
<dt class="field-odd">ANY-TAL<span class="colon">:</span></dt>
<dd class="field-odd"><p>SMALLINT, INTEGER, BIGINT</p>
</dd>
<dt class="field-even">ANY-NUMERICAL<span class="colon">:</span></dt>
<dd class="field-even"><p>SMALLINT, INTEGER, BIGINT, REAL, FLOAT</p>
</dd>
</dl>
<p>Använd denna bordsdesign för detta exempel:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CREATE</span> <span class="n">TABLE</span> <span class="n">wiki</span> <span class="p">(</span>
  <span class="nb">id</span> <span class="n">SERIAL</span><span class="p">,</span>
  <span class="n">source</span> <span class="n">INTEGER</span><span class="p">,</span>
  <span class="n">target</span> <span class="n">INTEGER</span><span class="p">,</span>
  <span class="n">cost</span> <span class="n">INTEGER</span><span class="p">);</span>
<span class="n">CREATE</span> <span class="n">TABLE</span>
</pre></div>
</div>
</section>
<section id="insert-the-data">
<h4><a class="toc-backref" href="#id56" role="doc-backlink">Infoga data</a><a class="headerlink" href="#insert-the-data" title="Link to this heading">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">wiki</span> <span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">cost</span><span class="p">)</span> <span class="n">VALUES</span>
<span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>  <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">9</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">14</span><span class="p">),</span>
<span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
<span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>  <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">11</span><span class="p">),</span>
<span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span>
<span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">9</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="mi">0</span> <span class="mi">9</span>
</pre></div>
</div>
</section>
<section id="find-the-shortest-path">
<h4><a class="toc-backref" href="#id57" role="doc-backlink">Hitta den kortaste vägen</a><a class="headerlink" href="#find-the-shortest-path" title="Link to this heading">¶</a></h4>
<p>För att lösa detta exempel används <a class="reference internal" href="pgr_dijkstra.html"><span class="doc">pgr_dijkstra</span></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">pgr_dijkstra</span><span class="p">(</span>
  <span class="s1">&#39;SELECT id, source, target, cost FROM wiki&#39;</span><span class="p">,</span>
  <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">false</span><span class="p">);</span>
 <span class="n">seq</span> <span class="o">|</span> <span class="n">path_seq</span> <span class="o">|</span> <span class="n">start_vid</span> <span class="o">|</span> <span class="n">end_vid</span> <span class="o">|</span> <span class="n">node</span> <span class="o">|</span> <span class="n">edge</span> <span class="o">|</span> <span class="n">cost</span> <span class="o">|</span> <span class="n">agg_cost</span>
<span class="o">-----+----------+-----------+---------+------+------+------+----------</span>
   <span class="mi">1</span> <span class="o">|</span>        <span class="mi">1</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>       <span class="mi">5</span> <span class="o">|</span>    <span class="mi">1</span> <span class="o">|</span>    <span class="mi">2</span> <span class="o">|</span>    <span class="mi">9</span> <span class="o">|</span>        <span class="mi">0</span>
   <span class="mi">2</span> <span class="o">|</span>        <span class="mi">2</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>       <span class="mi">5</span> <span class="o">|</span>    <span class="mi">3</span> <span class="o">|</span>    <span class="mi">6</span> <span class="o">|</span>    <span class="mi">2</span> <span class="o">|</span>        <span class="mi">9</span>
   <span class="mi">3</span> <span class="o">|</span>        <span class="mi">3</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>       <span class="mi">5</span> <span class="o">|</span>    <span class="mi">6</span> <span class="o">|</span>    <span class="mi">9</span> <span class="o">|</span>    <span class="mi">9</span> <span class="o">|</span>       <span class="mi">11</span>
   <span class="mi">4</span> <span class="o">|</span>        <span class="mi">4</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>       <span class="mi">5</span> <span class="o">|</span>    <span class="mi">5</span> <span class="o">|</span>   <span class="o">-</span><span class="mi">1</span> <span class="o">|</span>    <span class="mi">0</span> <span class="o">|</span>       <span class="mi">20</span>
<span class="p">(</span><span class="mi">4</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
<p>För att gå från <span class="math notranslate nohighlight">\(1\)</span> till <span class="math notranslate nohighlight">\(5\)</span> går vägen genom följande hörn: <span class="math notranslate nohighlight">\(1 \rightarrow 3 \rightarrow 6 \rightarrow 5\)</span></p>
<div class="graphviz"><img src="_images/graphviz-fdf01cf24599e17f1d95f59e619139a55bdedbb0.png" alt="graph G {
 rankdir=&quot;LR&quot;;
 1 [color=&quot;red&quot;];
 5 [color=&quot;green&quot;];
 1 -- 2 [label=&quot;(7)&quot;];
 5 -- 6 [label=&quot;(9)&quot;, color=&quot;blue&quot;];
 1 -- 3 [label=&quot;(9)&quot;, color=&quot;blue&quot;];
 1 -- 6 [label=&quot;(14)&quot;];
 2 -- 3 [label=&quot;(10)&quot;];
 2 -- 4 [label=&quot;(13)&quot;];
 3 -- 4 [label=&quot;(11)&quot;];
 3 -- 6 [label=&quot;(2)&quot;, color=&quot;blue&quot;];
 4 -- 5 [label=&quot;(6)&quot;];
}" class="graphviz" /></div>
</section>
<section id="vertex-information">
<h4><a class="toc-backref" href="#id58" role="doc-backlink">Information om toppunkt</a><a class="headerlink" href="#vertex-information" title="Link to this heading">¶</a></h4>
<p>För att få information om topparna, använd <a class="reference internal" href="pgr_extractVertices.html"><span class="doc">pgr_extractVertices</span></a></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="nb">id</span><span class="p">,</span> <span class="n">in_edges</span><span class="p">,</span> <span class="n">out_edges</span>
<span class="n">FROM</span> <span class="n">pgr_extractVertices</span><span class="p">(</span><span class="s1">&#39;SELECT id, source, target FROM wiki&#39;</span><span class="p">);</span>
 <span class="nb">id</span> <span class="o">|</span> <span class="n">in_edges</span> <span class="o">|</span> <span class="n">out_edges</span>
<span class="o">----+----------+-----------</span>
  <span class="mi">3</span> <span class="o">|</span> <span class="p">{</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">}</span>    <span class="o">|</span> <span class="p">{</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">}</span>
  <span class="mi">5</span> <span class="o">|</span> <span class="p">{</span><span class="mi">8</span><span class="p">}</span>      <span class="o">|</span> <span class="p">{</span><span class="mi">9</span><span class="p">}</span>
  <span class="mi">4</span> <span class="o">|</span> <span class="p">{</span><span class="mi">5</span><span class="p">,</span><span class="mi">7</span><span class="p">}</span>    <span class="o">|</span> <span class="p">{</span><span class="mi">8</span><span class="p">}</span>
  <span class="mi">2</span> <span class="o">|</span> <span class="p">{</span><span class="mi">1</span><span class="p">}</span>      <span class="o">|</span> <span class="p">{</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">}</span>
  <span class="mi">1</span> <span class="o">|</span>          <span class="o">|</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">}</span>
  <span class="mi">6</span> <span class="o">|</span> <span class="p">{</span><span class="mi">3</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">9</span><span class="p">}</span>  <span class="o">|</span>
<span class="p">(</span><span class="mi">6</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
</section>
</section>
</section>
<section id="graphs-with-geometries">
<h2><a class="toc-backref" href="#id14" role="doc-backlink">Grafer med geometrier</a><a class="headerlink" href="#graphs-with-geometries" title="Link to this heading">¶</a></h2>
<nav class="contents local" id="id3">
<ul class="simple">
<li><p><a class="reference internal" href="#create-a-routing-database" id="id59">Skapa en routningsdatabas</a></p></li>
<li><p><a class="reference internal" href="#load-data" id="id60">Ladda data</a></p></li>
<li><p><a class="reference internal" href="#build-a-routing-topology" id="id61">Bygga upp en routingtopologi</a></p></li>
<li><p><a class="reference internal" href="#adjust-costs" id="id62">Justera kostnader</a></p>
<ul>
<li><p><a class="reference internal" href="#update-costs-to-length-of-geometry" id="id63">Uppdatera kostnaderna till geometrins längd</a></p></li>
<li><p><a class="reference internal" href="#update-costs-based-on-codes" id="id64">Uppdatera kostnader baserat på koder</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="create-a-routing-database">
<h3><a class="toc-backref" href="#id59" role="doc-backlink">Skapa en routningsdatabas</a><a class="headerlink" href="#create-a-routing-database" title="Link to this heading">¶</a></h3>
<p>Det första steget är att skapa en databas och ladda pgRouting i databasen.</p>
<p>Vanligtvis skapas en databas för varje projekt.</p>
<p>När du väl har en databas att arbeta i laddar du dina data och bygger routingapplikationen i den databasen.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">createdb</span> <span class="n">sampledata</span>
<span class="n">psql</span> <span class="n">sampledata</span> <span class="o">-</span><span class="n">c</span> <span class="s2">&quot;CREATE EXTENSION pgrouting CASCADE&quot;</span>
</pre></div>
</div>
</section>
<section id="load-data">
<h3><a class="toc-backref" href="#id60" role="doc-backlink">Ladda data</a><a class="headerlink" href="#load-data" title="Link to this heading">¶</a></h3>
<p>Det finns flera sätt att ladda dina data i pgRouting.</p>
<ul class="simple">
<li><p>Skapa en databas manuellt.</p>
<ul>
<li><p><a class="reference internal" href="#graphs-without-geometries">Grafer utan geometrier</a></p></li>
<li><p><a class="reference internal" href="sampledata.html"><span class="doc">Exempeldata</span></a>: a small graph used in the documentation examples</p></li>
</ul>
</li>
<li><p>Använda <a class="reference external" href="https://workshop.pgrouting.org/latest/en/basic/data.html">osm2pgrouting</a></p></li>
</ul>
<p>Det finns olika verktyg med öppen källkod som kan hjälpa till, t.ex:</p>
<dl class="field-list simple">
<dt class="field-odd">shp2pgsql<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p>postgresql shapefile-laddare</p></li>
</ul>
</dd>
<dt class="field-even">ogr2ogr<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p>verktyg för konvertering av vektordata</p></li>
</ul>
</dd>
<dt class="field-odd">osm2pgsql<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p>ladda OSM-data till postgresql</p></li>
</ul>
</dd>
</dl>
<p>Observera att dessa verktyg <strong>inte</strong> kommer att importera data i en struktur som är kompatibel med pgRouting och när detta händer måste topologin justeras.</p>
<ul class="simple">
<li><p>Dela upp ett segment på varje segment-segment intersektion</p></li>
<li><p>Om de saknas, lägg till kolumner och tilldela värden för <code class="docutils literal notranslate"><span class="pre">källa</span></code>, <code class="docutils literal notranslate"><span class="pre">mål</span></code>, <code class="docutils literal notranslate"><span class="pre">kostnad</span></code>, <code class="docutils literal notranslate"><span class="pre">omvänd</span> <span class="pre">kostnad</span></code>.</p></li>
<li><p>Anslut en frånkopplad graf.</p></li>
<li><p>Skapa den fullständiga grafens topologi</p></li>
<li><p>Skapa en eller flera grafer baserat på den applikation som ska utvecklas.</p>
<ul>
<li><p>Skapa ett sammandraget diagram för höghastighetsvägarna</p></li>
<li><p>Skapa grafer per stat/land</p></li>
</ul>
</li>
</ul>
<p>Med några få ord:</p>
<blockquote>
<div><p>Förbered grafen</p>
</div></blockquote>
<p>Vad och hur du ska förbereda grafen beror på applikationen och/eller på datakvaliteten och/eller på hur nära informationen är en topologi som kan användas av pgRouting och/eller på andra faktorer som inte nämns.</p>
<p>Stegen för att förbereda grafen involverar geometriska operationer med hjälp av <a class="reference external" href="https://postgis.net/">PostGIS</a> och vissa andra involverar grafoperationer som <a class="reference internal" href="pgr_contraction.html"><span class="doc">pgr_contraction</span></a> för att dra ihop en graf.</p>
<p>I workshopen &lt;<a class="reference external" href="https://workshop.pgrouting.org/latest">https://workshop.pgrouting.org/latest</a>&gt;`__ finns en steg-för-stegbeskrivning av hur man skapar en graf med hjälp av Open Street Map-data för en liten applikation.</p>
<p>Användningen av index på databasdesignen i allmänhet:</p>
<ul class="simple">
<li><p>Låt geometrierna vara indexerade.</p></li>
<li><p>Låt kolumnerna med identifierare indexeras.</p></li>
</ul>
<p>Vänligen se dokumentationen för <a class="reference external" href="https://www.postgresql.org/docs/">PostgreSQL</a> och dokumentationen för <a class="reference external" href="https://postgis.net/">PostGIS</a>.</p>
</section>
<section id="build-a-routing-topology">
<h3><a class="toc-backref" href="#id61" role="doc-backlink">Bygga upp en routingtopologi</a><a class="headerlink" href="#build-a-routing-topology" title="Link to this heading">¶</a></h3>
<p>Den grundläggande informationen för att använda de flesta av pgRouting-funktionerna <code class="docutils literal notranslate"><span class="pre">id,</span> <span class="pre">source,</span> <span class="pre">target,</span> <span class="pre">cost,</span> <span class="pre">[reverse_cost]</span></code> är vad som i pgRouting kallas routingtopologin.</p>
<p><code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code> är valfritt men rekommenderas starkt för att minska databasens storlek på grund av storleken på geometrikolumnerna. I den här dokumentationen används dock <code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code> i den här dokumentationen.</p>
<p>När data levereras med geometrier och det inte finns någon routningstopologi behövs det här steget.</p>
<p>Alla geometriernas start- och slutpunkter behöver en identifierare som ska lagras i kolumnerna <code class="docutils literal notranslate"><span class="pre">källa</span></code> och <code class="docutils literal notranslate"><span class="pre">mål</span></code> i datatabellen. På samma sätt måste <code class="docutils literal notranslate"><span class="pre">cost</span></code> och <code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code> ha värdet för att korsa kanten i båda riktningarna.</p>
<p>Om kolumnerna inte finns måste de läggas till i tabellen i fråga. (se <a class="reference external" href="https://www.postgresql.org/docs/current/sql-altertable.html">ALTER TABLE</a>)</p>
<p>Funktionen <a class="reference internal" href="pgr_extractVertices.html"><span class="doc">pgr_extractVertices</span></a> används för att skapa en vertices-tabell baserad på kantidentifieraren och geometrin för kanten i grafen.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="o">*</span> <span class="n">INTO</span> <span class="n">vertices</span>
<span class="n">FROM</span> <span class="n">pgr_extractVertices</span><span class="p">(</span><span class="s1">&#39;SELECT id, geom FROM edges ORDER BY id&#39;</span><span class="p">);</span>
<span class="n">SELECT</span> <span class="mi">18</span>
</pre></div>
</div>
<p>Slutligen fylls <code class="docutils literal notranslate"><span class="pre">källan</span></code> och <code class="docutils literal notranslate"><span class="pre">målet</span></code> på med hjälp av de data som finns lagrade i topparnas tabeller.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/*</span> <span class="o">--</span> <span class="nb">set</span> <span class="n">the</span> <span class="n">source</span> <span class="n">information</span> <span class="o">*/</span>
<span class="n">UPDATE</span> <span class="n">edges</span> <span class="n">AS</span> <span class="n">e</span>
<span class="n">SET</span> <span class="n">source</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">x1</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="n">y</span>
<span class="n">FROM</span> <span class="n">vertices</span> <span class="n">AS</span> <span class="n">v</span>
<span class="n">WHERE</span> <span class="n">ST_StartPoint</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">geom</span><span class="p">;</span>
<span class="n">UPDATE</span> <span class="mi">24</span>
<span class="o">/*</span> <span class="o">--</span> <span class="nb">set</span> <span class="n">the</span> <span class="n">target</span> <span class="n">information</span> <span class="o">*/</span>
<span class="n">UPDATE</span> <span class="n">edges</span> <span class="n">AS</span> <span class="n">e</span>
<span class="n">SET</span> <span class="n">target</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">x2</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="n">y</span>
<span class="n">FROM</span> <span class="n">vertices</span> <span class="n">AS</span> <span class="n">v</span>
<span class="n">WHERE</span> <span class="n">ST_EndPoint</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">geom</span><span class="p">;</span>
<span class="n">UPDATE</span> <span class="mi">24</span>
</pre></div>
</div>
<p>Data som kommer från OSM och använder <a class="reference external" href="https://github.com/pgRouting/osm2pgrouting">osm2pgrouting</a> som ett importverktyg, kommer med routingtopologin. Se ett exempel på användning av <code class="docutils literal notranslate"><span class="pre">osm2pgrouting</span></code> på <a class="reference external" href="https://workshop.pgrouting.org/latest/en/basic/data.html">workshop</a>.</p>
</section>
<section id="adjust-costs">
<h3><a class="toc-backref" href="#id62" role="doc-backlink">Justera kostnader</a><a class="headerlink" href="#adjust-costs" title="Link to this heading">¶</a></h3>
<p>I det här exemplet kommer värdena <code class="docutils literal notranslate"><span class="pre">cost</span></code> och <code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code> att vara det dubbla av geometrins längd.</p>
<section id="update-costs-to-length-of-geometry">
<h4><a class="toc-backref" href="#id63" role="doc-backlink">Uppdatera kostnaderna till geometrins längd</a><a class="headerlink" href="#update-costs-to-length-of-geometry" title="Link to this heading">¶</a></h4>
<p>Antag att kolumnerna <code class="docutils literal notranslate"><span class="pre">kostnad</span></code> och <code class="docutils literal notranslate"><span class="pre">omvända_kostnader</span></code> i urvalsdata representerar:</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(1\)</span> when the edge exists in the graph</p></li>
<li><p><span class="math notranslate nohighlight">\(-1\)</span> when the edge does not exist in the graph</p></li>
</ul>
<p>Med hjälp av den informationen uppdateras geometriernas längd:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">UPDATE</span> <span class="n">edges</span> <span class="n">SET</span>
<span class="n">cost</span> <span class="o">=</span> <span class="n">sign</span><span class="p">(</span><span class="n">cost</span><span class="p">)</span> <span class="o">*</span> <span class="n">ST_length</span><span class="p">(</span><span class="n">geom</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span>
<span class="n">reverse_cost</span> <span class="o">=</span> <span class="n">sign</span><span class="p">(</span><span class="n">reverse_cost</span><span class="p">)</span> <span class="o">*</span> <span class="n">ST_length</span><span class="p">(</span><span class="n">geom</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
<span class="n">UPDATE</span> <span class="mi">18</span>
</pre></div>
</div>
<p>Vilket ger följande resultat:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="nb">id</span><span class="p">,</span> <span class="n">cost</span><span class="p">,</span> <span class="n">reverse_cost</span> <span class="n">FROM</span> <span class="n">edges</span><span class="p">;</span>
 <span class="nb">id</span> <span class="o">|</span>        <span class="n">cost</span>        <span class="o">|</span>    <span class="n">reverse_cost</span>
<span class="o">----+--------------------+--------------------</span>
  <span class="mi">6</span> <span class="o">|</span>                  <span class="mi">2</span> <span class="o">|</span>                  <span class="mi">2</span>
  <span class="mi">7</span> <span class="o">|</span>                  <span class="mi">2</span> <span class="o">|</span>                  <span class="mi">2</span>
  <span class="mi">4</span> <span class="o">|</span>                  <span class="mi">2</span> <span class="o">|</span>                  <span class="mi">2</span>
  <span class="mi">5</span> <span class="o">|</span>                  <span class="mi">2</span> <span class="o">|</span>                 <span class="o">-</span><span class="mi">2</span>
  <span class="mi">8</span> <span class="o">|</span>                  <span class="mi">2</span> <span class="o">|</span>                  <span class="mi">2</span>
 <span class="mi">12</span> <span class="o">|</span>                  <span class="mi">2</span> <span class="o">|</span>                 <span class="o">-</span><span class="mi">2</span>
 <span class="mi">11</span> <span class="o">|</span>                  <span class="mi">2</span> <span class="o">|</span>                 <span class="o">-</span><span class="mi">2</span>
 <span class="mi">10</span> <span class="o">|</span>                  <span class="mi">2</span> <span class="o">|</span>                  <span class="mi">2</span>
 <span class="mi">17</span> <span class="o">|</span>     <span class="mf">2.999999999998</span> <span class="o">|</span>     <span class="mf">2.999999999998</span>
 <span class="mi">14</span> <span class="o">|</span>                  <span class="mi">2</span> <span class="o">|</span>                  <span class="mi">2</span>
 <span class="mi">18</span> <span class="o">|</span> <span class="mf">3.4000000000000004</span> <span class="o">|</span> <span class="mf">3.4000000000000004</span>
 <span class="mi">13</span> <span class="o">|</span>                  <span class="mi">2</span> <span class="o">|</span>                 <span class="o">-</span><span class="mi">2</span>
 <span class="mi">15</span> <span class="o">|</span>                  <span class="mi">2</span> <span class="o">|</span>                  <span class="mi">2</span>
 <span class="mi">16</span> <span class="o">|</span>                  <span class="mi">2</span> <span class="o">|</span>                  <span class="mi">2</span>
  <span class="mi">9</span> <span class="o">|</span>                  <span class="mi">2</span> <span class="o">|</span>                  <span class="mi">2</span>
  <span class="mi">3</span> <span class="o">|</span>                 <span class="o">-</span><span class="mi">2</span> <span class="o">|</span>                  <span class="mi">2</span>
  <span class="mi">1</span> <span class="o">|</span>                  <span class="mi">2</span> <span class="o">|</span>                  <span class="mi">2</span>
  <span class="mi">2</span> <span class="o">|</span>                 <span class="o">-</span><span class="mi">2</span> <span class="o">|</span>                  <span class="mi">2</span>
<span class="p">(</span><span class="mi">18</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
<p>Observera att för att kunna följa dokumentationsexemplen är allt baserat på den ursprungliga grafen.</p>
<p>Återgå till de ursprungliga uppgifterna:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">UPDATE</span> <span class="n">edges</span> <span class="n">SET</span>
<span class="n">cost</span> <span class="o">=</span> <span class="n">sign</span><span class="p">(</span><span class="n">cost</span><span class="p">),</span>
<span class="n">reverse_cost</span> <span class="o">=</span> <span class="n">sign</span><span class="p">(</span><span class="n">reverse_cost</span><span class="p">);</span>
<span class="n">UPDATE</span> <span class="mi">18</span>
</pre></div>
</div>
</section>
<section id="update-costs-based-on-codes">
<h4><a class="toc-backref" href="#id64" role="doc-backlink">Uppdatera kostnader baserat på koder</a><a class="headerlink" href="#update-costs-based-on-codes" title="Link to this heading">¶</a></h4>
<p>Andra dataset kan ha en kolumn med värden som</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">FT</span></code> fordonsflöde i geometrins riktning</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TF</span></code> fordonsflöde motsatt geometrins riktning</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">B</span></code> fordonsflöde i båda riktningarna</p></li>
</ul>
<p>Förbereda en kodkolumn för exemplet:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">edges</span> <span class="n">ADD</span> <span class="n">COLUMN</span> <span class="n">direction</span> <span class="n">TEXT</span><span class="p">;</span>
<span class="n">ALTER</span> <span class="n">TABLE</span>
<span class="n">UPDATE</span> <span class="n">edges</span> <span class="n">SET</span>
<span class="n">direction</span> <span class="o">=</span> <span class="n">CASE</span> <span class="n">WHEN</span> <span class="p">(</span><span class="n">cost</span><span class="o">&gt;</span><span class="mi">0</span> <span class="n">AND</span> <span class="n">reverse_cost</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">)</span> <span class="n">THEN</span> <span class="s1">&#39;B&#39;</span>   <span class="o">/*</span> <span class="n">both</span> <span class="n">ways</span> <span class="o">*/</span>
           <span class="n">WHEN</span> <span class="p">(</span><span class="n">cost</span><span class="o">&gt;</span><span class="mi">0</span> <span class="n">AND</span> <span class="n">reverse_cost</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">)</span> <span class="n">THEN</span> <span class="s1">&#39;FT&#39;</span>  <span class="o">/*</span> <span class="n">direction</span> <span class="n">of</span> <span class="n">the</span> <span class="n">LINESSTRING</span> <span class="o">*/</span>
           <span class="n">WHEN</span> <span class="p">(</span><span class="n">cost</span><span class="o">&lt;</span><span class="mi">0</span> <span class="n">AND</span> <span class="n">reverse_cost</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">)</span> <span class="n">THEN</span> <span class="s1">&#39;TF&#39;</span>  <span class="o">/*</span> <span class="n">reverse</span> <span class="n">direction</span> <span class="n">of</span> <span class="n">the</span> <span class="n">LINESTRING</span> <span class="o">*/</span>
           <span class="n">ELSE</span> <span class="s1">&#39;&#39;</span> <span class="n">END</span><span class="p">;</span>
<span class="n">UPDATE</span> <span class="mi">18</span>
<span class="o">/*</span> <span class="n">unknown</span> <span class="o">*/</span>
</pre></div>
</div>
<p>Justering av kostnaderna baserat på koderna:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">UPDATE</span> <span class="n">edges</span> <span class="n">SET</span>
<span class="n">cost</span> <span class="o">=</span> <span class="n">CASE</span> <span class="n">WHEN</span> <span class="p">(</span><span class="n">direction</span> <span class="o">=</span> <span class="s1">&#39;B&#39;</span> <span class="n">OR</span> <span class="n">direction</span> <span class="o">=</span> <span class="s1">&#39;FT&#39;</span><span class="p">)</span>
       <span class="n">THEN</span> <span class="n">ST_length</span><span class="p">(</span><span class="n">geom</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span>
       <span class="n">ELSE</span> <span class="o">-</span><span class="mi">1</span> <span class="n">END</span><span class="p">,</span>
<span class="n">reverse_cost</span> <span class="o">=</span> <span class="n">CASE</span> <span class="n">WHEN</span> <span class="p">(</span><span class="n">direction</span> <span class="o">=</span> <span class="s1">&#39;B&#39;</span> <span class="n">OR</span> <span class="n">direction</span> <span class="o">=</span> <span class="s1">&#39;TF&#39;</span><span class="p">)</span>
       <span class="n">THEN</span> <span class="n">ST_length</span><span class="p">(</span><span class="n">geom</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span>
       <span class="n">ELSE</span> <span class="o">-</span><span class="mi">1</span> <span class="n">END</span><span class="p">;</span>
<span class="n">UPDATE</span> <span class="mi">18</span>
</pre></div>
</div>
<p>Vilket ger följande resultat:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="nb">id</span><span class="p">,</span> <span class="n">cost</span><span class="p">,</span> <span class="n">reverse_cost</span> <span class="n">FROM</span> <span class="n">edges</span><span class="p">;</span>
 <span class="nb">id</span> <span class="o">|</span>        <span class="n">cost</span>        <span class="o">|</span>    <span class="n">reverse_cost</span>
<span class="o">----+--------------------+--------------------</span>
  <span class="mi">6</span> <span class="o">|</span>                  <span class="mi">2</span> <span class="o">|</span>                  <span class="mi">2</span>
  <span class="mi">7</span> <span class="o">|</span>                  <span class="mi">2</span> <span class="o">|</span>                  <span class="mi">2</span>
  <span class="mi">4</span> <span class="o">|</span>                  <span class="mi">2</span> <span class="o">|</span>                  <span class="mi">2</span>
  <span class="mi">5</span> <span class="o">|</span>                  <span class="mi">2</span> <span class="o">|</span>                 <span class="o">-</span><span class="mi">1</span>
  <span class="mi">8</span> <span class="o">|</span>                  <span class="mi">2</span> <span class="o">|</span>                  <span class="mi">2</span>
 <span class="mi">12</span> <span class="o">|</span>                  <span class="mi">2</span> <span class="o">|</span>                 <span class="o">-</span><span class="mi">1</span>
 <span class="mi">11</span> <span class="o">|</span>                  <span class="mi">2</span> <span class="o">|</span>                 <span class="o">-</span><span class="mi">1</span>
 <span class="mi">10</span> <span class="o">|</span>                  <span class="mi">2</span> <span class="o">|</span>                  <span class="mi">2</span>
 <span class="mi">17</span> <span class="o">|</span>     <span class="mf">2.999999999998</span> <span class="o">|</span>     <span class="mf">2.999999999998</span>
 <span class="mi">14</span> <span class="o">|</span>                  <span class="mi">2</span> <span class="o">|</span>                  <span class="mi">2</span>
 <span class="mi">18</span> <span class="o">|</span> <span class="mf">3.4000000000000004</span> <span class="o">|</span> <span class="mf">3.4000000000000004</span>
 <span class="mi">13</span> <span class="o">|</span>                  <span class="mi">2</span> <span class="o">|</span>                 <span class="o">-</span><span class="mi">1</span>
 <span class="mi">15</span> <span class="o">|</span>                  <span class="mi">2</span> <span class="o">|</span>                  <span class="mi">2</span>
 <span class="mi">16</span> <span class="o">|</span>                  <span class="mi">2</span> <span class="o">|</span>                  <span class="mi">2</span>
  <span class="mi">9</span> <span class="o">|</span>                  <span class="mi">2</span> <span class="o">|</span>                  <span class="mi">2</span>
  <span class="mi">3</span> <span class="o">|</span>                 <span class="o">-</span><span class="mi">1</span> <span class="o">|</span>                  <span class="mi">2</span>
  <span class="mi">1</span> <span class="o">|</span>                  <span class="mi">2</span> <span class="o">|</span>                  <span class="mi">2</span>
  <span class="mi">2</span> <span class="o">|</span>                 <span class="o">-</span><span class="mi">1</span> <span class="o">|</span>                  <span class="mi">2</span>
<span class="p">(</span><span class="mi">18</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
<p>Återgå till de ursprungliga uppgifterna:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">UPDATE</span> <span class="n">edges</span> <span class="n">SET</span>
<span class="n">cost</span> <span class="o">=</span> <span class="n">sign</span><span class="p">(</span><span class="n">cost</span><span class="p">),</span>
<span class="n">reverse_cost</span> <span class="o">=</span> <span class="n">sign</span><span class="p">(</span><span class="n">reverse_cost</span><span class="p">);</span>
<span class="n">UPDATE</span> <span class="mi">18</span>
<span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">edges</span> <span class="n">DROP</span> <span class="n">COLUMN</span> <span class="n">direction</span><span class="p">;</span>
<span class="n">ALTER</span> <span class="n">TABLE</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="check-the-routing-topology">
<h2><a class="toc-backref" href="#id19" role="doc-backlink">Kontrollera routingtopologin</a><a class="headerlink" href="#check-the-routing-topology" title="Link to this heading">¶</a></h2>
<nav class="contents local" id="id4">
<ul class="simple">
<li><p><a class="reference internal" href="#crossing-edges" id="id65">Korsande kanter</a></p>
<ul>
<li><p><a class="reference internal" href="#fixing-an-intersection" id="id66">Fixa en korsning</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#touching-edges" id="id67">Beröring av kanter</a></p>
<ul>
<li><p><a class="reference internal" href="#fixing-a-gap" id="id68">Åtgärda en lucka</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#connecting-components" id="id69">Anslutning av komponenter</a></p></li>
<li><p><a class="reference internal" href="#contraction-of-a-graph" id="id70">Sammandragning av en graf</a></p>
<ul>
<li><p><a class="reference internal" href="#dead-ends" id="id71">Döda ändar</a></p></li>
<li><p><a class="reference internal" href="#linear-edges" id="id72">Linjära kanter</a></p></li>
</ul>
</li>
</ul>
</nav>
<p>Det finns många möjliga problem i en graf.</p>
<ul class="simple">
<li><p>De data som används kanske inte har utformats med tanke på routing.</p></li>
<li><p>En graf har några mycket specifika krav.</p></li>
<li><p>Grafen är frånkopplad.</p></li>
<li><p>Det finns oönskade korsningar.</p></li>
<li><p>Grafen är för stor och behöver krympas.</p></li>
<li><p>En subgraf behövs för applikationen.</p></li>
<li><p>och många andra problem som pgRouting-användaren, det vill säga applikationsutvecklaren, kan stöta på.</p></li>
</ul>
<section id="crossing-edges">
<h3><a class="toc-backref" href="#id65" role="doc-backlink">Korsande kanter</a><a class="headerlink" href="#crossing-edges" title="Link to this heading">¶</a></h3>
<p>För att få de korsande kanterna:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">a</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">id</span>
<span class="n">FROM</span> <span class="n">edges</span> <span class="n">AS</span> <span class="n">a</span><span class="p">,</span> <span class="n">edges</span> <span class="n">AS</span> <span class="n">b</span>
<span class="n">WHERE</span> <span class="n">a</span><span class="o">.</span><span class="n">id</span> <span class="o">&lt;</span> <span class="n">b</span><span class="o">.</span><span class="n">id</span> <span class="n">AND</span> <span class="n">st_crosses</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">geom</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="n">geom</span><span class="p">);</span>
 <span class="nb">id</span> <span class="o">|</span> <span class="nb">id</span>
<span class="o">----+----</span>
 <span class="mi">13</span> <span class="o">|</span> <span class="mi">18</span>
<span class="p">(</span><span class="mi">1</span> <span class="n">row</span><span class="p">)</span>

</pre></div>
</div>
<figure class="align-default">
<img alt="_images/crossing_edges.png" src="_images/crossing_edges.png" />
</figure>
<p>Den informationen är korrekt, till exempel när det gäller fordon, är det en tunnel eller bro som korsar en annan väg.</p>
<p>Det kan till exempel vara felaktigt:</p>
<ol class="arabic simple">
<li><p>När det faktiskt är en korsning av vägar, där fordon kan svänga.</p></li>
<li><p>När det gäller elektriska ledningar kan den elektriska ledningen byta väg även i en tunnel eller på en bro.</p></li>
</ol>
<p>När den är felaktig behöver den åtgärdas:</p>
<ol class="arabic simple">
<li><p>För fordon och fotgängare</p>
<ul class="simple">
<li><p>Om data kommer från OSM och importerades till databasen med hjälp av <code class="docutils literal notranslate"><span class="pre">osm2pgrouting</span></code>, måste korrigeringen göras i <a class="reference external" href="https://www.openstreetmap.org">OSM-portalen</a> och data importeras igen.</p></li>
<li><p>I allmänhet när data kommer från en leverantör som har förberett data för routing av fordon och det finns ett problem, ska data åtgärdas från leverantören</p></li>
</ul>
</li>
<li><p>För mycket specifika tillämpningar</p>
<ul class="simple">
<li><p>Uppgifterna är korrekta om de ses ur de dirigerande fordonens eller fotgängarnas synvinkel.</p></li>
<li><p>Uppgifterna behöver en lokal fix för den specifika applikationen.</p></li>
</ul>
</li>
</ol>
<p>När korsningarna har analyserats en efter en, för de som behöver en lokal fix, måste kanterna <a class="reference external" href="https://postgis.net/docs/ST_Split.html">delas</a>.</p>
<p>De nya kanterna måste läggas till i kanttabellen, resten av attributen måste uppdateras i de nya kanterna, de gamla kanterna måste tas bort och routingtopologin måste uppdateras.</p>
<section id="fixing-an-intersection">
<h4><a class="toc-backref" href="#id66" role="doc-backlink">Fixa en korsning</a><a class="headerlink" href="#fixing-an-intersection" title="Link to this heading">¶</a></h4>
<p>I detta exempel kommer den ursprungliga kanttabellen att användas för att lagra de extra geometrierna.</p>
<p class="rubric">Ett exempel på användning utan resultat</p>
<p>Routning från <span class="math notranslate nohighlight">\(1\)</span> till <span class="math notranslate nohighlight">\(18\)</span> ger ingen lösning.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="o">*</span>
<span class="n">FROM</span> <span class="n">pgr_dijkstra</span><span class="p">(</span><span class="s1">&#39;SELECT id, source, target, cost, reverse_cost FROM edges&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">18</span><span class="p">);</span>
 <span class="n">seq</span> <span class="o">|</span> <span class="n">path_seq</span> <span class="o">|</span> <span class="n">start_vid</span> <span class="o">|</span> <span class="n">end_vid</span> <span class="o">|</span> <span class="n">node</span> <span class="o">|</span> <span class="n">edge</span> <span class="o">|</span> <span class="n">cost</span> <span class="o">|</span> <span class="n">agg_cost</span>
<span class="o">-----+----------+-----------+---------+------+------+------+----------</span>
<span class="p">(</span><span class="mi">0</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
<p class="rubric">Analysera nätverket för korsningar.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span>
  <span class="n">e1</span><span class="o">.</span><span class="n">id</span> <span class="n">id1</span><span class="p">,</span> <span class="n">e2</span><span class="o">.</span><span class="n">id</span> <span class="n">id2</span><span class="p">,</span>
  <span class="n">ST_AsText</span><span class="p">(</span><span class="n">ST_Intersection</span><span class="p">(</span><span class="n">e1</span><span class="o">.</span><span class="n">geom</span><span class="p">,</span> <span class="n">e2</span><span class="o">.</span><span class="n">geom</span><span class="p">))</span> <span class="n">AS</span> <span class="n">point</span>
<span class="n">FROM</span> <span class="n">edges</span> <span class="n">e1</span><span class="p">,</span> <span class="n">edges</span> <span class="n">e2</span>
<span class="n">WHERE</span> <span class="n">e1</span><span class="o">.</span><span class="n">id</span> <span class="o">&lt;</span> <span class="n">e2</span><span class="o">.</span><span class="n">id</span> <span class="n">AND</span> <span class="n">ST_Crosses</span><span class="p">(</span><span class="n">e1</span><span class="o">.</span><span class="n">geom</span><span class="p">,</span> <span class="n">e2</span><span class="o">.</span><span class="n">geom</span><span class="p">);</span>
 <span class="n">id1</span> <span class="o">|</span> <span class="n">id2</span> <span class="o">|</span>    <span class="n">point</span>
<span class="o">-----+-----+--------------</span>
  <span class="mi">13</span> <span class="o">|</span>  <span class="mi">18</span> <span class="o">|</span> <span class="n">POINT</span><span class="p">(</span><span class="mf">3.5</span> <span class="mi">3</span><span class="p">)</span>
<span class="p">(</span><span class="mi">1</span> <span class="n">row</span><span class="p">)</span>

</pre></div>
</div>
<p>Analysen visar att nätverket har en korsning.</p>
<p class="rubric">Förbereda tabeller</p>
<p>Ytterligare kolumner för att styra segmentens ursprung.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">edges</span> <span class="n">ADD</span> <span class="n">old_id</span> <span class="n">BIGINT</span><span class="p">;</span>
<span class="n">ALTER</span> <span class="n">TABLE</span>
</pre></div>
</div>
<p class="rubric">Lägga till nya segment.</p>
<p>Anropar <a class="reference internal" href="pgr_separateCrossing.html"><span class="doc">pgr_separateCrossing</span></a> och lägger till de nya segmenten i tabellen över kanter.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">edges</span> <span class="p">(</span><span class="n">old_id</span><span class="p">,</span> <span class="n">geom</span><span class="p">)</span>
<span class="n">SELECT</span> <span class="nb">id</span><span class="p">,</span> <span class="n">geom</span>
<span class="n">FROM</span> <span class="n">pgr_separateCrossing</span><span class="p">(</span><span class="s1">&#39;SELECT id, geom FROM edges&#39;</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="mi">0</span> <span class="mi">4</span>
</pre></div>
</div>
<p class="rubric">Uppdatera andra värden</p>
<p>I det här exemplet uppdateras endast <code class="docutils literal notranslate"><span class="pre">cost</span></code> och <code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code>, där de baseras på geometrins längd och riktningen bibehålls med hjälp av funktionen <code class="docutils literal notranslate"><span class="pre">sign</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">WITH</span>
<span class="n">costs</span> <span class="n">AS</span> <span class="p">(</span>
  <span class="n">SELECT</span> <span class="n">e2</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">sign</span><span class="p">(</span><span class="n">e1</span><span class="o">.</span><span class="n">cost</span><span class="p">)</span> <span class="o">*</span> <span class="n">ST_Length</span><span class="p">(</span><span class="n">e2</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span> <span class="n">AS</span> <span class="n">cost</span><span class="p">,</span>
  <span class="n">sign</span><span class="p">(</span><span class="n">e1</span><span class="o">.</span><span class="n">reverse_cost</span><span class="p">)</span> <span class="o">*</span> <span class="n">ST_Length</span><span class="p">(</span><span class="n">e2</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span> <span class="n">AS</span> <span class="n">reverse_cost</span>
  <span class="n">FROM</span> <span class="n">edges</span> <span class="n">e1</span> <span class="n">JOIN</span> <span class="n">edges</span> <span class="n">e2</span> <span class="n">ON</span> <span class="p">(</span><span class="n">e1</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">e2</span><span class="o">.</span><span class="n">old_id</span><span class="p">)</span>
<span class="p">)</span>
<span class="n">UPDATE</span> <span class="n">edges</span> <span class="n">e</span>
<span class="n">SET</span> <span class="p">(</span><span class="n">cost</span><span class="p">,</span> <span class="n">reverse_cost</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">cost</span><span class="p">,</span> <span class="n">c</span><span class="o">.</span><span class="n">reverse_cost</span><span class="p">)</span>
<span class="n">FROM</span> <span class="n">costs</span> <span class="n">AS</span> <span class="n">c</span> <span class="n">WHERE</span> <span class="n">e</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">id</span><span class="p">;</span>
<span class="n">UPDATE</span> <span class="mi">4</span>
</pre></div>
</div>
<p class="rubric">Uppdatera topologin</p>
<p>Infoga eventuella nya hörn.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">WITH</span>
<span class="n">new_vertex</span> <span class="n">AS</span> <span class="p">(</span>
  <span class="n">SELECT</span> <span class="n">ev</span><span class="o">.*</span>
  <span class="n">FROM</span> <span class="n">pgr_extractVertices</span><span class="p">(</span><span class="s1">&#39;SELECT id, geom FROM edges WHERE old_id IS NOT NULL&#39;</span><span class="p">)</span> <span class="n">ev</span>
  <span class="n">LEFT</span> <span class="n">JOIN</span> <span class="n">vertices</span> <span class="n">v</span> <span class="n">using</span><span class="p">(</span><span class="n">geom</span><span class="p">)</span>
  <span class="n">WHERE</span> <span class="n">v</span> <span class="n">IS</span> <span class="n">NULL</span><span class="p">)</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">vertices</span> <span class="p">(</span><span class="n">in_edges</span><span class="p">,</span> <span class="n">out_edges</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">geom</span><span class="p">)</span>
<span class="n">SELECT</span> <span class="n">in_edges</span><span class="p">,</span> <span class="n">out_edges</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">geom</span> <span class="n">FROM</span> <span class="n">new_vertex</span><span class="p">;</span>
<span class="n">INSERT</span> <span class="mi">0</span> <span class="mi">1</span>
</pre></div>
</div>
<p>Uppdatera käll- och målinformationen i kanttabellen.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/*</span> <span class="o">--</span> <span class="nb">set</span> <span class="n">the</span> <span class="n">source</span> <span class="n">information</span> <span class="o">*/</span>
<span class="n">UPDATE</span> <span class="n">edges</span> <span class="n">AS</span> <span class="n">e</span>
<span class="n">SET</span> <span class="n">source</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">x1</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="n">y</span>
<span class="n">FROM</span> <span class="n">vertices</span> <span class="n">AS</span> <span class="n">v</span>
<span class="n">WHERE</span> <span class="n">source</span> <span class="n">IS</span> <span class="n">NULL</span> <span class="n">AND</span> <span class="n">ST_StartPoint</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">geom</span><span class="p">;</span>
<span class="n">UPDATE</span> <span class="mi">4</span>
<span class="o">/*</span> <span class="o">--</span> <span class="nb">set</span> <span class="n">the</span> <span class="n">target</span> <span class="n">information</span> <span class="o">*/</span>
<span class="n">UPDATE</span> <span class="n">edges</span> <span class="n">AS</span> <span class="n">e</span>
<span class="n">SET</span> <span class="n">target</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">x2</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="n">y</span>
<span class="n">FROM</span> <span class="n">vertices</span> <span class="n">AS</span> <span class="n">v</span>
<span class="n">WHERE</span> <span class="n">target</span> <span class="n">IS</span> <span class="n">NULL</span> <span class="n">AND</span> <span class="n">ST_EndPoint</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">geom</span><span class="p">;</span>
<span class="n">UPDATE</span> <span class="mi">4</span>
</pre></div>
</div>
<p class="rubric">Exemplet har resultat</p>
<p>Routning från <span class="math notranslate nohighlight">\(1\)</span> till <span class="math notranslate nohighlight">\(18\)</span> ger en lösning.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="o">*</span>
<span class="n">FROM</span> <span class="n">pgr_dijkstra</span><span class="p">(</span><span class="s1">&#39;SELECT id, source, target, cost, reverse_cost FROM edges&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">18</span><span class="p">);</span>
 <span class="n">seq</span> <span class="o">|</span> <span class="n">path_seq</span> <span class="o">|</span> <span class="n">start_vid</span> <span class="o">|</span> <span class="n">end_vid</span> <span class="o">|</span> <span class="n">node</span> <span class="o">|</span> <span class="n">edge</span> <span class="o">|</span> <span class="n">cost</span> <span class="o">|</span> <span class="n">agg_cost</span>
<span class="o">-----+----------+-----------+---------+------+------+------+----------</span>
   <span class="mi">1</span> <span class="o">|</span>        <span class="mi">1</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>      <span class="mi">18</span> <span class="o">|</span>    <span class="mi">1</span> <span class="o">|</span>    <span class="mi">6</span> <span class="o">|</span>    <span class="mi">1</span> <span class="o">|</span>        <span class="mi">0</span>
   <span class="mi">2</span> <span class="o">|</span>        <span class="mi">2</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>      <span class="mi">18</span> <span class="o">|</span>    <span class="mi">3</span> <span class="o">|</span>    <span class="mi">7</span> <span class="o">|</span>    <span class="mi">1</span> <span class="o">|</span>        <span class="mi">1</span>
   <span class="mi">3</span> <span class="o">|</span>        <span class="mi">3</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>      <span class="mi">18</span> <span class="o">|</span>    <span class="mi">7</span> <span class="o">|</span>   <span class="mi">10</span> <span class="o">|</span>    <span class="mi">1</span> <span class="o">|</span>        <span class="mi">2</span>
   <span class="mi">4</span> <span class="o">|</span>        <span class="mi">4</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>      <span class="mi">18</span> <span class="o">|</span>    <span class="mi">8</span> <span class="o">|</span>   <span class="mi">12</span> <span class="o">|</span>    <span class="mi">1</span> <span class="o">|</span>        <span class="mi">3</span>
   <span class="mi">5</span> <span class="o">|</span>        <span class="mi">5</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>      <span class="mi">18</span> <span class="o">|</span>   <span class="mi">12</span> <span class="o">|</span>   <span class="mi">19</span> <span class="o">|</span>  <span class="mf">0.5</span> <span class="o">|</span>        <span class="mi">4</span>
   <span class="mi">6</span> <span class="o">|</span>        <span class="mi">6</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>      <span class="mi">18</span> <span class="o">|</span>   <span class="mi">18</span> <span class="o">|</span>   <span class="o">-</span><span class="mi">1</span> <span class="o">|</span>    <span class="mi">0</span> <span class="o">|</span>      <span class="mf">4.5</span>
<span class="p">(</span><span class="mi">6</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
</section>
</section>
<section id="touching-edges">
<h3><a class="toc-backref" href="#id67" role="doc-backlink">Beröring av kanter</a><a class="headerlink" href="#touching-edges" title="Link to this heading">¶</a></h3>
<p>Visuellt verkar kanterna vara sammankopplade, men internt är de inte det.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="nb">id</span><span class="p">,</span> <span class="n">ST_AsText</span><span class="p">(</span><span class="n">geom</span><span class="p">)</span>
<span class="n">FROM</span> <span class="n">edges</span> <span class="n">where</span> <span class="nb">id</span> <span class="n">IN</span> <span class="p">(</span><span class="mi">14</span><span class="p">,</span><span class="mi">17</span><span class="p">);</span>
 <span class="nb">id</span> <span class="o">|</span>               <span class="n">st_astext</span>
<span class="o">----+----------------------------------------</span>
 <span class="mi">17</span> <span class="o">|</span> <span class="n">LINESTRING</span><span class="p">(</span><span class="mf">0.5</span> <span class="mf">3.5</span><span class="p">,</span><span class="mf">1.999999999999</span> <span class="mf">3.5</span><span class="p">)</span>
 <span class="mi">14</span> <span class="o">|</span> <span class="n">LINESTRING</span><span class="p">(</span><span class="mi">2</span> <span class="mi">3</span><span class="p">,</span><span class="mi">2</span> <span class="mi">4</span><span class="p">)</span>
<span class="p">(</span><span class="mi">2</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
<figure class="align-default">
<img alt="_images/touching_edges.png" src="_images/touching_edges.png" />
</figure>
<p>Informationens giltighet är applikationsberoende.</p>
<ul class="simple">
<li><p>Kanske finns det en liten barriär för fordon men inte för fotgängare.</p></li>
</ul>
<p>När beröringarna har analyserats en efter en, för de som behöver en lokal fix, måste kanterna <a class="reference external" href="https://postgis.net/docs/ST_Split.html">delas</a>.</p>
<p>De nya kanterna måste läggas till i kanttabellen, resten av attributen måste uppdateras i de nya kanterna, de gamla kanterna måste tas bort och routingtopologin måste uppdateras.</p>
<section id="fixing-a-gap">
<h4><a class="toc-backref" href="#id68" role="doc-backlink">Åtgärda en lucka</a><a class="headerlink" href="#fixing-a-gap" title="Link to this heading">¶</a></h4>
<p>I detta exempel kommer den ursprungliga kanttabellen att användas för att lagra de extra geometrierna.</p>
<p class="rubric">Ett exempel på användning utan resultat</p>
<p>Routning från <span class="math notranslate nohighlight">\(1\)</span> till <span class="math notranslate nohighlight">\(2\)</span> ger ingen lösning.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="o">*</span>
<span class="n">FROM</span> <span class="n">pgr_dijkstra</span><span class="p">(</span> <span class="s1">&#39;SELECT id, source, target, cost, reverse_cost FROM edges&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
 <span class="n">seq</span> <span class="o">|</span> <span class="n">path_seq</span> <span class="o">|</span> <span class="n">start_vid</span> <span class="o">|</span> <span class="n">end_vid</span> <span class="o">|</span> <span class="n">node</span> <span class="o">|</span> <span class="n">edge</span> <span class="o">|</span> <span class="n">cost</span> <span class="o">|</span> <span class="n">agg_cost</span>
<span class="o">-----+----------+-----------+---------+------+------+------+----------</span>
<span class="p">(</span><span class="mi">0</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
<p class="rubric">Analysera nätverket för att hitta luckor.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">WITH</span>
<span class="n">deadends</span> <span class="n">AS</span> <span class="p">(</span>
  <span class="n">SELECT</span> <span class="nb">id</span> <span class="n">AS</span> <span class="n">vid</span><span class="p">,</span> <span class="p">(</span><span class="n">in_edges</span> <span class="o">||</span> <span class="n">out_edges</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="n">AS</span> <span class="n">edge</span><span class="p">,</span> <span class="n">geom</span> <span class="n">AS</span> <span class="n">vgeom</span>
  <span class="n">FROM</span> <span class="n">vertices</span>
  <span class="n">WHERE</span> <span class="n">array_length</span><span class="p">(</span><span class="n">in_edges</span> <span class="o">||</span> <span class="n">out_edges</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">=</span> <span class="mi">1</span>
<span class="p">)</span>
<span class="n">SELECT</span> <span class="nb">id</span><span class="p">,</span> <span class="n">ST_AsText</span><span class="p">(</span><span class="n">geom</span><span class="p">),</span> <span class="n">vid</span><span class="p">,</span> <span class="n">ST_AsText</span><span class="p">(</span><span class="n">vgeom</span><span class="p">),</span> <span class="n">ST_Distance</span><span class="p">(</span><span class="n">geom</span><span class="p">,</span> <span class="n">vgeom</span><span class="p">)</span>
<span class="n">FROM</span> <span class="n">edges</span><span class="p">,</span> <span class="n">deadends</span>
<span class="n">WHERE</span> <span class="nb">id</span> <span class="o">!=</span> <span class="n">edge</span> <span class="n">AND</span> <span class="n">ST_Distance</span><span class="p">(</span><span class="n">geom</span><span class="p">,</span> <span class="n">vgeom</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">0.1</span><span class="p">;</span>
 <span class="nb">id</span> <span class="o">|</span>      <span class="n">st_astext</span>      <span class="o">|</span> <span class="n">vid</span> <span class="o">|</span>         <span class="n">st_astext</span>         <span class="o">|</span>      <span class="n">st_distance</span>
<span class="o">----+---------------------+-----+---------------------------+-----------------------</span>
 <span class="mi">14</span> <span class="o">|</span> <span class="n">LINESTRING</span><span class="p">(</span><span class="mi">2</span> <span class="mi">3</span><span class="p">,</span><span class="mi">2</span> <span class="mi">4</span><span class="p">)</span> <span class="o">|</span>   <span class="mi">4</span> <span class="o">|</span> <span class="n">POINT</span><span class="p">(</span><span class="mf">1.999999999999</span> <span class="mf">3.5</span><span class="p">)</span> <span class="o">|</span> <span class="mf">1.000088900582341e-12</span>
<span class="p">(</span><span class="mi">1</span> <span class="n">row</span><span class="p">)</span>

</pre></div>
</div>
<p>Analysen visar att det finns en lucka i nätverket.</p>
<p class="rubric">Förbereda tabeller</p>
<p>Ytterligare kolumner för att styra segmentens ursprung.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">edges</span> <span class="n">ADD</span> <span class="n">old_id</span> <span class="n">BIGINT</span><span class="p">;</span>
<span class="n">ALTER</span> <span class="n">TABLE</span>
</pre></div>
</div>
<p class="rubric">Lägga till nya segment.</p>
<p>Anropar <a class="reference internal" href="pgr_separateTouching.html"><span class="doc">pgr_separateTouching</span></a> och lägger till de nya segmenten i tabellen över kanter.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">edges</span> <span class="p">(</span><span class="n">old_id</span><span class="p">,</span> <span class="n">geom</span><span class="p">)</span>
<span class="n">SELECT</span> <span class="nb">id</span><span class="p">,</span> <span class="n">geom</span>
<span class="n">FROM</span> <span class="n">pgr_separateTouching</span><span class="p">(</span><span class="s1">&#39;SELECT id, geom FROM edges&#39;</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="mi">0</span> <span class="mi">2</span>
</pre></div>
</div>
<p class="rubric">Uppdatera andra värden</p>
<p>I det här exemplet uppdateras endast <code class="docutils literal notranslate"><span class="pre">cost</span></code> och <code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code>, där de baseras på geometrins längd och riktningen bibehålls med hjälp av funktionen <code class="docutils literal notranslate"><span class="pre">sign</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">WITH</span>
<span class="n">costs</span> <span class="n">AS</span> <span class="p">(</span>
  <span class="n">SELECT</span> <span class="n">e2</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
  <span class="n">sign</span><span class="p">(</span><span class="n">e1</span><span class="o">.</span><span class="n">cost</span><span class="p">)</span> <span class="o">*</span> <span class="n">ST_Length</span><span class="p">(</span><span class="n">e2</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span> <span class="n">AS</span> <span class="n">cost</span><span class="p">,</span>
  <span class="n">sign</span><span class="p">(</span><span class="n">e1</span><span class="o">.</span><span class="n">reverse_cost</span><span class="p">)</span> <span class="o">*</span> <span class="n">ST_Length</span><span class="p">(</span><span class="n">e2</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span> <span class="n">AS</span> <span class="n">reverse_cost</span>
  <span class="n">FROM</span> <span class="n">edges</span> <span class="n">e1</span>
  <span class="n">JOIN</span> <span class="n">edges</span> <span class="n">e2</span> <span class="n">ON</span> <span class="p">(</span><span class="n">e1</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">e2</span><span class="o">.</span><span class="n">old_id</span><span class="p">)</span>
<span class="p">)</span>
<span class="n">UPDATE</span> <span class="n">edges</span> <span class="n">e</span> <span class="n">SET</span> <span class="p">(</span><span class="n">cost</span><span class="p">,</span> <span class="n">reverse_cost</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">cost</span><span class="p">,</span> <span class="n">c</span><span class="o">.</span><span class="n">reverse_cost</span><span class="p">)</span>
<span class="n">FROM</span> <span class="n">costs</span> <span class="n">AS</span> <span class="n">c</span>
<span class="n">WHERE</span> <span class="n">e</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">id</span><span class="p">;</span>
<span class="n">UPDATE</span> <span class="mi">2</span>
</pre></div>
</div>
<p class="rubric">Uppdatera topologin</p>
<p>Infoga eventuella nya hörn.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">WITH</span> <span class="n">new_vertex</span> <span class="n">AS</span> <span class="p">(</span>
  <span class="n">SELECT</span> <span class="n">ev</span><span class="o">.*</span>
  <span class="n">FROM</span> <span class="n">pgr_extractVertices</span><span class="p">(</span><span class="s1">&#39;SELECT id, geom FROM edges WHERE old_id IS NOT NULL&#39;</span><span class="p">)</span> <span class="n">ev</span>
  <span class="n">LEFT</span> <span class="n">JOIN</span> <span class="n">vertices</span> <span class="n">v</span> <span class="n">using</span><span class="p">(</span><span class="n">geom</span><span class="p">)</span>
  <span class="n">WHERE</span> <span class="n">v</span> <span class="n">IS</span> <span class="n">NULL</span>
<span class="p">)</span>
<span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">vertices</span> <span class="p">(</span><span class="n">in_edges</span><span class="p">,</span> <span class="n">out_edges</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">geom</span><span class="p">)</span>
<span class="n">SELECT</span> <span class="n">in_edges</span><span class="p">,</span> <span class="n">out_edges</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">geom</span>
<span class="n">FROM</span> <span class="n">new_vertex</span><span class="p">;</span>
<span class="n">INSERT</span> <span class="mi">0</span> <span class="mi">0</span>
</pre></div>
</div>
<p>Uppdatera käll- och målinformationen i kanttabellen.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/*</span> <span class="o">--</span> <span class="nb">set</span> <span class="n">the</span> <span class="n">source</span> <span class="n">information</span> <span class="o">*/</span>
<span class="n">UPDATE</span> <span class="n">edges</span> <span class="n">AS</span> <span class="n">e</span>
<span class="n">SET</span> <span class="n">source</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">x1</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="n">y</span>
<span class="n">FROM</span> <span class="n">vertices</span> <span class="n">AS</span> <span class="n">v</span>
<span class="n">WHERE</span> <span class="n">source</span> <span class="n">IS</span> <span class="n">NULL</span> <span class="n">AND</span> <span class="n">ST_StartPoint</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">geom</span><span class="p">;</span>
<span class="n">UPDATE</span> <span class="mi">2</span>
<span class="o">/*</span> <span class="o">--</span> <span class="nb">set</span> <span class="n">the</span> <span class="n">target</span> <span class="n">information</span> <span class="o">*/</span>
<span class="n">UPDATE</span> <span class="n">edges</span> <span class="n">AS</span> <span class="n">e</span>
<span class="n">SET</span> <span class="n">target</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">x2</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="n">y</span>
<span class="n">FROM</span> <span class="n">vertices</span> <span class="n">AS</span> <span class="n">v</span>
<span class="n">WHERE</span> <span class="n">target</span> <span class="n">IS</span> <span class="n">NULL</span> <span class="n">AND</span> <span class="n">ST_EndPoint</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">geom</span><span class="p">;</span>
<span class="n">UPDATE</span> <span class="mi">2</span>
</pre></div>
</div>
<p class="rubric">Exemplet har resultat</p>
<p>En routning från <span class="math notranslate nohighlight">\(1\)</span> till <span class="math notranslate nohighlight">\(2\)</span> ger en lösning.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="o">*</span>
<span class="n">FROM</span> <span class="n">pgr_dijkstra</span><span class="p">(</span><span class="s1">&#39;SELECT id, source, target, cost, reverse_cost FROM edges&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
 <span class="n">seq</span> <span class="o">|</span> <span class="n">path_seq</span> <span class="o">|</span> <span class="n">start_vid</span> <span class="o">|</span> <span class="n">end_vid</span> <span class="o">|</span> <span class="n">node</span> <span class="o">|</span> <span class="n">edge</span> <span class="o">|</span> <span class="n">cost</span> <span class="o">|</span> <span class="n">agg_cost</span>
<span class="o">-----+----------+-----------+---------+------+------+------+----------</span>
   <span class="mi">1</span> <span class="o">|</span>        <span class="mi">1</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>    <span class="mi">1</span> <span class="o">|</span>    <span class="mi">6</span> <span class="o">|</span>    <span class="mi">1</span> <span class="o">|</span>        <span class="mi">0</span>
   <span class="mi">2</span> <span class="o">|</span>        <span class="mi">2</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>    <span class="mi">3</span> <span class="o">|</span>    <span class="mi">7</span> <span class="o">|</span>    <span class="mi">1</span> <span class="o">|</span>        <span class="mi">1</span>
   <span class="mi">3</span> <span class="o">|</span>        <span class="mi">3</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>    <span class="mi">7</span> <span class="o">|</span>   <span class="mi">10</span> <span class="o">|</span>    <span class="mi">1</span> <span class="o">|</span>        <span class="mi">2</span>
   <span class="mi">4</span> <span class="o">|</span>        <span class="mi">4</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>    <span class="mi">8</span> <span class="o">|</span>   <span class="mi">19</span> <span class="o">|</span>  <span class="mf">0.5</span> <span class="o">|</span>        <span class="mi">3</span>
   <span class="mi">5</span> <span class="o">|</span>        <span class="mi">5</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>    <span class="mi">4</span> <span class="o">|</span>   <span class="mi">17</span> <span class="o">|</span>    <span class="mi">1</span> <span class="o">|</span>      <span class="mf">3.5</span>
   <span class="mi">6</span> <span class="o">|</span>        <span class="mi">6</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>       <span class="mi">2</span> <span class="o">|</span>    <span class="mi">2</span> <span class="o">|</span>   <span class="o">-</span><span class="mi">1</span> <span class="o">|</span>    <span class="mi">0</span> <span class="o">|</span>      <span class="mf">4.5</span>
<span class="p">(</span><span class="mi">6</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
</section>
</section>
<section id="connecting-components">
<h3><a class="toc-backref" href="#id69" role="doc-backlink">Anslutning av komponenter</a><a class="headerlink" href="#connecting-components" title="Link to this heading">¶</a></h3>
<p>För att få grafens anslutningsmöjligheter:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">pgr_connectedComponents</span><span class="p">(</span>
  <span class="s1">&#39;SELECT id, source, target, cost, reverse_cost FROM edges&#39;</span>
<span class="p">);</span>
 <span class="n">seq</span> <span class="o">|</span> <span class="n">component</span> <span class="o">|</span> <span class="n">node</span>
<span class="o">-----+-----------+------</span>
   <span class="mi">1</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">1</span>
   <span class="mi">2</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">3</span>
   <span class="mi">3</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">5</span>
   <span class="mi">4</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">6</span>
   <span class="mi">5</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">7</span>
   <span class="mi">6</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">8</span>
   <span class="mi">7</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">9</span>
   <span class="mi">8</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">10</span>
   <span class="mi">9</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">11</span>
  <span class="mi">10</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">12</span>
  <span class="mi">11</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">15</span>
  <span class="mi">12</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">16</span>
  <span class="mi">13</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">17</span>
  <span class="mi">14</span> <span class="o">|</span>         <span class="mi">2</span> <span class="o">|</span>    <span class="mi">2</span>
  <span class="mi">15</span> <span class="o">|</span>         <span class="mi">2</span> <span class="o">|</span>    <span class="mi">4</span>
  <span class="mi">16</span> <span class="o">|</span>        <span class="mi">13</span> <span class="o">|</span>   <span class="mi">13</span>
  <span class="mi">17</span> <span class="o">|</span>        <span class="mi">13</span> <span class="o">|</span>   <span class="mi">14</span>
<span class="p">(</span><span class="mi">17</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
<p>Det finns tre grundläggande sätt att ansluta komponenter:</p>
<ul class="simple">
<li><p>Från toppunkten till startpunkten för kanten</p></li>
<li><p>Från toppunkten till slutpunkten för kanten</p></li>
<li><p>Från toppunkten till den närmaste toppunkten på kanten</p>
<ul>
<li><p>Denna lösning kräver att kanten delas.</p></li>
</ul>
</li>
</ul>
<p>I detta exempel kommer <a class="reference internal" href="pgr_separateCrossing.html"><span class="doc">pgr_separateCrossing</span></a> och <a class="reference internal" href="pgr_separateTouching.html"><span class="doc">pgr_separateTouching</span></a> att användas.</p>
<p class="rubric">Få anslutningsmöjligheterna</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">pgr_connectedComponents</span><span class="p">(</span>
  <span class="s1">&#39;SELECT id, source, target, cost, reverse_cost FROM edges&#39;</span>
<span class="p">);</span>
 <span class="n">seq</span> <span class="o">|</span> <span class="n">component</span> <span class="o">|</span> <span class="n">node</span>
<span class="o">-----+-----------+------</span>
   <span class="mi">1</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">1</span>
   <span class="mi">2</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">3</span>
   <span class="mi">3</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">5</span>
   <span class="mi">4</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">6</span>
   <span class="mi">5</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">7</span>
   <span class="mi">6</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">8</span>
   <span class="mi">7</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">9</span>
   <span class="mi">8</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">10</span>
   <span class="mi">9</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">11</span>
  <span class="mi">10</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">12</span>
  <span class="mi">11</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">15</span>
  <span class="mi">12</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">16</span>
  <span class="mi">13</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">17</span>
  <span class="mi">14</span> <span class="o">|</span>         <span class="mi">2</span> <span class="o">|</span>    <span class="mi">2</span>
  <span class="mi">15</span> <span class="o">|</span>         <span class="mi">2</span> <span class="o">|</span>    <span class="mi">4</span>
  <span class="mi">16</span> <span class="o">|</span>        <span class="mi">13</span> <span class="o">|</span>   <span class="mi">13</span>
  <span class="mi">17</span> <span class="o">|</span>        <span class="mi">13</span> <span class="o">|</span>   <span class="mi">14</span>
<span class="p">(</span><span class="mi">17</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
<p class="rubric">Förbereda tabeller</p>
<p>I det här exemplet behöver tabellen edges en extra kolumn och tabellen vertex byggs om helt och hållet.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ALTER</span> <span class="n">TABLE</span> <span class="n">edges</span> <span class="n">ADD</span> <span class="n">old_id</span> <span class="n">BIGINT</span><span class="p">;</span>
<span class="n">ALTER</span> <span class="n">TABLE</span>
<span class="n">DROP</span> <span class="n">TABLE</span> <span class="n">vertices</span><span class="p">;</span>
<span class="n">DROP</span> <span class="n">TABLE</span>
</pre></div>
</div>
<p class="rubric">Infoga nya kanter</p>
<p>Använd <a class="reference internal" href="pgr_separateCrossing.html"><span class="doc">pgr_separateCrossing</span></a> och <a class="reference internal" href="pgr_separateTouching.html"><span class="doc">pgr_separateTouching</span></a> för att infoga resultaten i tabellen över kanter.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">INSERT</span> <span class="n">INTO</span> <span class="n">edges</span> <span class="p">(</span><span class="n">old_id</span><span class="p">,</span> <span class="n">geom</span><span class="p">)</span>
<span class="n">SELECT</span> <span class="nb">id</span><span class="p">,</span> <span class="n">geom</span> <span class="n">FROM</span> <span class="n">pgr_separateCrossing</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM edges&#39;</span><span class="p">)</span>
<span class="n">UNION</span>
<span class="n">SELECT</span> <span class="nb">id</span><span class="p">,</span> <span class="n">geom</span> <span class="n">FROM</span> <span class="n">pgr_separateTouching</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM edges&#39;</span><span class="p">);</span>
<span class="n">INSERT</span> <span class="mi">0</span> <span class="mi">6</span>
</pre></div>
</div>
<p class="rubric">Skapa en tabell över hörnpunkter</p>
<p>Skapa tabellen med hjälp av <a class="reference internal" href="pgr_extractVertices.html"><span class="doc">pgr_extractVertices</span></a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">CREATE</span> <span class="n">TABLE</span> <span class="n">vertices</span> <span class="n">AS</span>
<span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">pgr_extractVertices</span><span class="p">(</span><span class="s1">&#39;SELECT id, geom FROM edges&#39;</span><span class="p">);</span>
<span class="n">SELECT</span> <span class="mi">18</span>
</pre></div>
</div>
<p class="rubric">Uppdatera topologin</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/*</span> <span class="o">--</span> <span class="nb">set</span> <span class="n">the</span> <span class="n">source</span> <span class="n">information</span> <span class="o">*/</span>
<span class="n">UPDATE</span> <span class="n">edges</span> <span class="n">AS</span> <span class="n">e</span>
<span class="n">SET</span> <span class="n">source</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">x1</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="n">y</span>
<span class="n">FROM</span> <span class="n">vertices</span> <span class="n">AS</span> <span class="n">v</span>
<span class="n">WHERE</span> <span class="n">ST_StartPoint</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">geom</span><span class="p">;</span>
<span class="n">UPDATE</span> <span class="mi">24</span>
<span class="o">/*</span> <span class="o">--</span> <span class="nb">set</span> <span class="n">the</span> <span class="n">target</span> <span class="n">information</span> <span class="o">*/</span>
<span class="n">UPDATE</span> <span class="n">edges</span> <span class="n">AS</span> <span class="n">e</span>
<span class="n">SET</span> <span class="n">target</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">x2</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="n">y</span>
<span class="n">FROM</span> <span class="n">vertices</span> <span class="n">AS</span> <span class="n">v</span>
<span class="n">WHERE</span> <span class="n">ST_EndPoint</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">geom</span><span class="p">;</span>
<span class="n">UPDATE</span> <span class="mi">24</span>
</pre></div>
</div>
<p class="rubric">Uppdatera andra värden</p>
<p>I det här exemplet uppdateras endast <code class="docutils literal notranslate"><span class="pre">cost</span></code> och <code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code>, där de baseras på geometrins längd och riktningen bibehålls med hjälp av funktionen <code class="docutils literal notranslate"><span class="pre">sign</span></code>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">UPDATE</span> <span class="n">edges</span> <span class="n">e</span>
  <span class="n">SET</span> <span class="n">cost</span>          <span class="o">=</span> <span class="n">ST_length</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span><span class="o">*</span><span class="n">sign</span><span class="p">(</span><span class="n">e1</span><span class="o">.</span><span class="n">cost</span><span class="p">),</span>
      <span class="n">reverse_cost</span>  <span class="o">=</span> <span class="n">ST_length</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span><span class="o">*</span><span class="n">sign</span><span class="p">(</span><span class="n">e1</span><span class="o">.</span><span class="n">reverse_cost</span><span class="p">)</span>
<span class="n">FROM</span> <span class="n">edges</span> <span class="n">e1</span>
<span class="n">WHERE</span> <span class="n">e</span><span class="o">.</span><span class="n">cost</span> <span class="n">IS</span> <span class="n">NULL</span> <span class="n">AND</span> <span class="n">e1</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">old_id</span><span class="p">;</span>
<span class="n">UPDATE</span> <span class="mi">6</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">pgr_connectedComponents</span><span class="p">(</span>
  <span class="s1">&#39;SELECT id, source, target, cost, reverse_cost FROM edges&#39;</span>
<span class="p">);</span>
 <span class="n">seq</span> <span class="o">|</span> <span class="n">component</span> <span class="o">|</span> <span class="n">node</span>
<span class="o">-----+-----------+------</span>
   <span class="mi">1</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">1</span>
   <span class="mi">2</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">2</span>
   <span class="mi">3</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">3</span>
   <span class="mi">4</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">4</span>
   <span class="mi">5</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">5</span>
   <span class="mi">6</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">6</span>
   <span class="mi">7</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">7</span>
   <span class="mi">8</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">8</span>
   <span class="mi">9</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>    <span class="mi">9</span>
  <span class="mi">10</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">10</span>
  <span class="mi">11</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">11</span>
  <span class="mi">12</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">12</span>
  <span class="mi">13</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">13</span>
  <span class="mi">14</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">14</span>
  <span class="mi">15</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">15</span>
  <span class="mi">16</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">16</span>
  <span class="mi">17</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">17</span>
  <span class="mi">18</span> <span class="o">|</span>         <span class="mi">1</span> <span class="o">|</span>   <span class="mi">18</span>
<span class="p">(</span><span class="mi">18</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
</section>
<section id="contraction-of-a-graph">
<h3><a class="toc-backref" href="#id70" role="doc-backlink">Sammandragning av en graf</a><a class="headerlink" href="#contraction-of-a-graph" title="Link to this heading">¶</a></h3>
<p>Grafen kan minskas i storlek med hjälp av <a class="reference internal" href="contraction-family.html"><span class="doc">Sammandragning - Familj av funktioner</span></a></p>
<p>När kontrakt ska ingås beror på grafens storlek, behandlingstider, uppgifternas riktighet, den slutliga applikationen eller någon annan faktor som inte nämns.</p>
<p>En ganska bra metod för att ta reda på om sammandragning kan vara användbart är på grund av antalet återvändsgränder och/eller antalet linjära kanter.</p>
<p>En fullständig metod för hur man kontraherar och hur man använder den kontraherade grafen beskrivs på <a class="reference internal" href="contraction-family.html"><span class="doc">Sammandragning - Familj av funktioner</span></a></p>
<section id="dead-ends">
<h4><a class="toc-backref" href="#id71" role="doc-backlink">Döda ändar</a><a class="headerlink" href="#dead-ends" title="Link to this heading">¶</a></h4>
<p>För att få bort återvändsgränderna:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="nb">id</span> <span class="n">FROM</span> <span class="n">vertices</span>
<span class="n">WHERE</span> <span class="n">array_length</span><span class="p">(</span><span class="n">in_edges</span> <span class="o">||</span> <span class="n">out_edges</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
 <span class="nb">id</span>
<span class="o">----</span>
  <span class="mi">1</span>
  <span class="mi">2</span>
  <span class="mi">5</span>
<span class="p">(</span><span class="mi">3</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
<p>En återvändsgränd uppstår när</p>
<ul class="simple">
<li><p>Toppunkten är gränsen för en återvändsgränd, en väg med genomfartsförbud eller en väg med utfartsförbud.</p></li>
<li><p>Toppunkten ligger på gränsen för den importerade grafen.</p>
<ul>
<li><p>Om en större graf importeras är det inte säkert att toppunkten är en återvändsgränd</p></li>
</ul>
</li>
</ul>
<p>Noden <span class="math notranslate nohighlight">\(4\)</span>, är en återvändsgränd i frågan, även om den visuellt ser ut som en slutpunkt för 3 kanter.</p>
<a class="reference internal image-reference" href="_images/Fig1-originalData.png"><img alt="_images/Fig1-originalData.png" src="_images/Fig1-originalData.png" style="width: 190.20000000000002px; height: 173.20000000000002px;" /></a>
<p class="rubric">Är noden <span class="math notranslate nohighlight">\(4\)</span> en återvändsgränd eller inte?</p>
<div class="graphviz"><img src="_images/graphviz-2f6ce9ee9f8bfbf56f4d7ac09d49b3451cf45119.png" alt="graph G {
  1,2,4,5,9,13,14 [shape=circle;style=filled;color=lightgreen;fontsize=8;width=0.3;fixedsize=true];
  3,6,7,8,10,11,12,15,16,17 [shape=circle;style=filled;color=cyan;fontsize=8;width=0.3;fixedsize=true];

  5 -- 6 [label=&quot;1&quot;,fontsize=8];     6 -- 10 [label=&quot;2&quot;,fontsize=8];
  10 -- 15 [label=&quot;3&quot;,fontsize=8];   6 -- 7 [label=&quot;4&quot;,fontsize=8];
  10 -- 11 [label=&quot;5&quot;,fontsize=8];   1 -- 3 [label=&quot;6&quot;,fontsize=8];
  3 -- 7 [label=&quot;7&quot;,fontsize=8];     7 -- 11 [label=&quot;8&quot;,fontsize=8];
  11 -- 16 [label=&quot;9&quot;,fontsize=8];   7 -- 8 [label=&quot;10&quot;,fontsize=8];
  11 -- 12 [label=&quot;11&quot;,fontsize=8];  8 -- 12 [label=&quot;12&quot;,fontsize=8];
  12 -- 17 [label=&quot;13&quot;,fontsize=8];  8 -- 9 [label=&quot;&quot;,fontsize=8];
  16 -- 17 [label=&quot;15&quot;,fontsize=8]; 15 -- 16 [label=&quot;16&quot;,fontsize=8];
  2 -- 4 [label=&quot;17&quot;,fontsize=8];   13 -- 14 [label=&quot;18&quot;,fontsize=8];

  1 [pos=&quot;0,2!&quot;];       2 [pos=&quot;0.5,3.5!&quot;];
  3 [pos=&quot;1,2!&quot;];       4 [pos=&quot;2,3.5!&quot;];
  5 [pos=&quot;2,0!&quot;];       6 [pos=&quot;2,1!&quot;];
  7 [pos=&quot;2,2!&quot;];       8 [pos=&quot;2,3!&quot;];
  9 [pos=&quot;2,4!&quot;];      10 [pos=&quot;3,1!&quot;];
  11 [pos=&quot;3,2!&quot;];     12 [pos=&quot;3,3!&quot;];
  13 [pos=&quot;3.5,2.3!&quot;]; 14 [pos=&quot;3.5,4!&quot;];
  15 [pos=&quot;4,1!&quot;];     16 [pos=&quot;4,2!&quot;];
  17 [pos=&quot;4,3!&quot;];
}" class="graphviz" /></div>
<p>Svaret på den frågan beror på vilken applikation det gäller.</p>
<ul class="simple">
<li><p>Finns det en sådan liten trottoarkant:</p>
<ul>
<li><p>Som inte tillåter ett fordon att använda den visuella korsningen?</p></li>
<li><p>Är applikationen för fotgängare och därför kan fotgängaren enkelt gå på den lilla trottoaren?</p></li>
<li><p>Gäller applikationen el och elledningar som enkelt kan förlängas ovanpå den lilla trottoarkanten?</p></li>
</ul>
</li>
<li><p>Finns det en stor klippa och från örnens utsikt ser det ut som att återvändsgränden ligger nära segmentet?</p></li>
</ul>
<p>Beroende på svaret kan det bli nödvändigt att ändra uppgifterna.</p>
<p>När det finns många återvändsgränder kan funktionerna <a class="reference internal" href="contraction-family.html"><span class="doc">Sammandragning - Familj av funktioner</span></a> användas för att dra ihop grafen för att påskynda bearbetningen.</p>
</section>
<section id="linear-edges">
<h4><a class="toc-backref" href="#id72" role="doc-backlink">Linjära kanter</a><a class="headerlink" href="#linear-edges" title="Link to this heading">¶</a></h4>
<p>För att få de linjära kanterna:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="nb">id</span> <span class="n">FROM</span> <span class="n">vertices</span>
<span class="n">WHERE</span> <span class="n">array_length</span><span class="p">(</span><span class="n">in_edges</span> <span class="o">||</span> <span class="n">out_edges</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
 <span class="nb">id</span>
<span class="o">----</span>
  <span class="mi">3</span>
  <span class="mi">9</span>
 <span class="mi">13</span>
 <span class="mi">15</span>
 <span class="mi">16</span>
<span class="p">(</span><span class="mi">5</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
<div class="graphviz"><img src="_images/graphviz-d42c82922271693b07f417cb2b9f6fd56854c39d.png" alt="graph G {
  3,15,17 [shape=circle;style=filled;color=lightgreen;fontsize=8;width=0.3;fixedsize=true];
  1,2,4,5,6,7,8,9,10,11,12,13,14,16 [shape=circle;style=filled;color=cyan;fontsize=8;width=0.3;fixedsize=true];

  5 -- 6 [label=&quot;1&quot;,fontsize=8];     6 -- 10 [label=&quot;2&quot;,fontsize=8];
  10 -- 15 [label=&quot;3&quot;,fontsize=8];   6 -- 7 [label=&quot;4&quot;,fontsize=8];
  10 -- 11 [label=&quot;5&quot;,fontsize=8];   1 -- 3 [label=&quot;6&quot;,fontsize=8];
  3 -- 7 [label=&quot;7&quot;,fontsize=8];     7 -- 11 [label=&quot;8&quot;,fontsize=8];
  11 -- 16 [label=&quot;9&quot;,fontsize=8];   7 -- 8 [label=&quot;10&quot;,fontsize=8];
  11 -- 12 [label=&quot;11&quot;,fontsize=8];  8 -- 12 [label=&quot;12&quot;,fontsize=8];
  12 -- 17 [label=&quot;13&quot;,fontsize=8];  8 -- 9 [label=&quot;&quot;,fontsize=8];
  16 -- 17 [label=&quot;15&quot;,fontsize=8]; 15 -- 16 [label=&quot;16&quot;,fontsize=8];
  2 -- 4 [label=&quot;17&quot;,fontsize=8];   13 -- 14 [label=&quot;18&quot;,fontsize=8];

  1 [pos=&quot;0,2!&quot;];       2 [pos=&quot;0.5,3.5!&quot;];
  3 [pos=&quot;1,2!&quot;];       4 [pos=&quot;2,3.5!&quot;];
  5 [pos=&quot;2,0!&quot;];       6 [pos=&quot;2,1!&quot;];
  7 [pos=&quot;2,2!&quot;];       8 [pos=&quot;2,3!&quot;];
  9 [pos=&quot;2,4!&quot;];      10 [pos=&quot;3,1!&quot;];
  11 [pos=&quot;3,2!&quot;];     12 [pos=&quot;3,3!&quot;];
  13 [pos=&quot;3.5,2.3!&quot;]; 14 [pos=&quot;3.5,4!&quot;];
  15 [pos=&quot;4,1!&quot;];     16 [pos=&quot;4,2!&quot;];
  17 [pos=&quot;4,3!&quot;];
}" class="graphviz" /></div>
<p>Dessa linjära hörn är korrekta, till exempel när de hörnen är farthinder, stoppsignaler och applikationen tar hänsyn till dem.</p>
<p>När det finns många linjära toppar, som inte behöver beaktas, för att påskynda bearbetningen, kan funktionerna <a class="reference internal" href="contraction-family.html"><span class="doc">Sammandragning - Familj av funktioner</span></a> användas för att kontrahera problemet.</p>
</section>
</section>
</section>
<section id="function-s-structure">
<h2><a class="toc-backref" href="#id24" role="doc-backlink">Funktionens struktur</a><a class="headerlink" href="#function-s-structure" title="Link to this heading">¶</a></h2>
<p>När förberedelserna för grafen har gjorts ovan är det dags att använda en</p>
<p>Den allmänna formen för ett pgRouting-funktionsanrop är:</p>
<div class="signatures admonition">
<p class="admonition-title"></p>
<p>pgr_&lt;name&gt;(<a class="reference internal" href="#inner-queries">Inner queries</a>, <strong>parameters</strong>, [ <code class="docutils literal notranslate"><span class="pre">Optional</span> <span class="pre">parameters</span></code>)</p>
</div>
<p>Var:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#inner-queries">Innerfrågor</a>: Är obligatoriska parametrar som är <code class="docutils literal notranslate"><span class="pre">TEXT</span></code>-strängar som innehåller SQL-frågor.</p></li>
<li><p><strong>parametrar</strong>: Ytterligare obligatoriska parametrar som behövs för funktionen.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Optionella</span> <span class="pre">parametrar</span></code>: Är icke obligatoriska <strong>namngivna</strong> parametrar som har ett standardvärde när de utelämnas.</p></li>
</ul>
<p>De obligatoriska parametrarna är positionsparametrar och de valfria parametrarna är namnparametrar.</p>
<p>Till exempel, för denna <a class="reference internal" href="pgr_dijkstra.html"><span class="doc">pgr_dijkstra</span></a> signatur:</p>
<div class="signatures admonition">
<p class="admonition-title"></p>
<p>pgr_dijkstra(<a class="reference internal" href="#edges-sql">Edges SQL</a>, <strong>start vids</strong>, <strong>slut vids</strong>, [<code class="docutils literal notranslate"><span class="pre">directed</span></code>])</p>
</div>
<ul class="simple">
<li><p><a class="reference internal" href="#edges-sql">Kanter SQL</a>:</p>
<ul>
<li><p>Är den första parametern.</p></li>
<li><p>Det är obligatoriskt.</p></li>
<li><p>Det är en inre frågeställning.</p></li>
<li><p>Den har inget namn, så <strong>Edges SQL</strong> ger en uppfattning om vilken typ av inre fråga som måste användas</p></li>
</ul>
</li>
<li><p><strong>start vid</strong>:</p>
<ul>
<li><p>Är den andra parametern.</p></li>
<li><p>Det är obligatoriskt.</p></li>
<li><p>Den har inget namn, så <strong>start vid</strong> ger en uppfattning om vad den andra parameterns värde ska innehålla.</p></li>
</ul>
</li>
<li><p><strong>end vid</strong></p>
<ul>
<li><p>Är den tredje parametern.</p></li>
<li><p>Det är obligatoriskt.</p></li>
<li><p>Den har inget namn, så <strong>slut vid</strong> ger en uppfattning om vad den tredje parameterns värde ska innehålla</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">directed</span></code></p>
<ul>
<li><p>Är den fjärde parametern.</p></li>
<li><p>Det är valfritt.</p></li>
<li><p>Den har ett namn.</p></li>
</ul>
</li>
</ul>
<p>En fullständig beskrivning av parametrarna finns i avsnittet <a class="reference internal" href="#parameters">Parametrar</a> för varje funktion.</p>
</section>
<section id="function-s-overloads">
<h2><a class="toc-backref" href="#id25" role="doc-backlink">Funktionens överbelastningar</a><a class="headerlink" href="#function-s-overloads" title="Link to this heading">¶</a></h2>
<p>En funktion kan ha olika överbelastningar. De vanligaste kallas:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#one-to-one">En till en</a></p></li>
<li><p><a class="reference internal" href="#one-to-many">En till många</a></p></li>
<li><p><a class="reference internal" href="#many-to-one">Många till en</a></p></li>
<li><p><a class="reference internal" href="#many-to-many">Många till många</a></p></li>
<li><p><a class="reference internal" href="#combinations">Kombinationer</a></p></li>
</ul>
<p>Beroende på överbelastningen ändras parametertyperna.</p>
<ul class="simple">
<li><p><strong>One</strong>: <strong>ANY-INTEGER</strong></p></li>
<li><p><strong>Många</strong>: <code class="docutils literal notranslate"><span class="pre">ARRAY</span></code> [<strong>ANY-INTEGER</strong>]</p></li>
</ul>
<p>Beroende på funktion kan överbelastningarna variera. Men konceptet med ändring av parametertyp förblir detsamma.</p>
<section id="one-to-one">
<h3><a class="toc-backref" href="#id26" role="doc-backlink">En till en</a><a class="headerlink" href="#one-to-one" title="Link to this heading">¶</a></h3>
<p>När du dirigerar från:</p>
<ul class="simple">
<li><p>Från <strong>en</strong> startpunkt</p></li>
<li><p>till <strong>en</strong> avslutande toppunkt</p></li>
</ul>
</section>
<section id="one-to-many">
<h3><a class="toc-backref" href="#id27" role="doc-backlink">En till många</a><a class="headerlink" href="#one-to-many" title="Link to this heading">¶</a></h3>
<p>När du dirigerar från:</p>
<ul class="simple">
<li><p>Från <strong>en</strong> startpunkt</p></li>
<li><p>till <strong>många</strong> avslutande hörn</p></li>
</ul>
</section>
<section id="many-to-one">
<h3><a class="toc-backref" href="#id28" role="doc-backlink">Många till en</a><a class="headerlink" href="#many-to-one" title="Link to this heading">¶</a></h3>
<p>När du dirigerar från:</p>
<ul class="simple">
<li><p>Från <strong>många</strong> startpunkter</p></li>
<li><p>till <strong>en</strong> avslutande toppunkt</p></li>
</ul>
</section>
<section id="many-to-many">
<h3><a class="toc-backref" href="#id29" role="doc-backlink">Många till många</a><a class="headerlink" href="#many-to-many" title="Link to this heading">¶</a></h3>
<p>När du dirigerar från:</p>
<ul class="simple">
<li><p>Från <strong>många</strong> startpunkter</p></li>
<li><p>till <strong>många</strong> avslutande hörn</p></li>
</ul>
</section>
<section id="combinations">
<h3><a class="toc-backref" href="#id30" role="doc-backlink">Kombinationer</a><a class="headerlink" href="#combinations" title="Link to this heading">¶</a></h3>
<p>När du dirigerar från:</p>
<ul class="simple">
<li><p>Från <strong>många</strong> olika startpunkter</p></li>
<li><p>till <strong>många</strong> olika slutpunkter</p></li>
<li><p>Varje tupel specificerar ett par av en startvertex och en slutvertex</p></li>
<li><p>Användarna kan definiera kombinationerna som de vill.</p></li>
<li><p>Behöver en <a class="reference internal" href="#combinations-sql">Combinations SQL</a></p></li>
</ul>
</section>
</section>
<section id="inner-queries">
<h2><a class="toc-backref" href="#id31" role="doc-backlink">Inre frågor</a><a class="headerlink" href="#inner-queries" title="Link to this heading">¶</a></h2>
<nav class="contents local" id="id5">
<ul class="simple">
<li><p><a class="reference internal" href="#edges-sql" id="id73">Kanter SQL</a></p>
<ul>
<li><p><a class="reference internal" href="#general" id="id74">Allmänt</a></p></li>
<li><p><a class="reference internal" href="#general-without-id" id="id75">Allmänt utan <code class="docutils literal notranslate"><span class="pre">id</span></code></a></p></li>
<li><p><a class="reference internal" href="#general-with-x-y" id="id76">Allmänt med (X,Y)</a></p></li>
<li><p><a class="reference internal" href="#flow" id="id77">Flöde</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#combinations-sql" id="id78">Kombinationer SQL</a></p></li>
<li><p><a class="reference internal" href="#restrictions-sql" id="id79">Begränsningar SQL</a></p></li>
<li><p><a class="reference internal" href="#points-sql" id="id80">Punkt SQL</a></p></li>
</ul>
</nav>
<p>Det finns flera olika typer av giltiga inre frågor och de kolumner som returneras beror också på funktionen. Vilken typ av inner query som används beror på funktionens krav. För att förenkla de många olika typerna används <strong>ANY-INTEGER</strong> och <strong>ANY-NUMERICAL</strong>.</p>
<p>Var:</p>
<dl class="field-list simple">
<dt class="field-odd">ANY-TAL<span class="colon">:</span></dt>
<dd class="field-odd"><p>SMALLINT, INTEGER, BIGINT</p>
</dd>
<dt class="field-even">ANY-NUMERICAL<span class="colon">:</span></dt>
<dd class="field-even"><p>SMALLINT, INTEGER, BIGINT, REAL, FLOAT</p>
</dd>
</dl>
<section id="edges-sql">
<h3><a class="toc-backref" href="#id73" role="doc-backlink">Kanter SQL</a><a class="headerlink" href="#edges-sql" title="Link to this heading">¶</a></h3>
<section id="general">
<h4><a class="toc-backref" href="#id74" role="doc-backlink">Allmänt</a><a class="headerlink" href="#general" title="Link to this heading">¶</a></h4>
<p class="rubric">Edges SQL för</p>
<ul class="simple">
<li><p><a class="reference internal" href="dijkstra-family.html"><span class="doc">Dijkstra - Familj av funktioner</span></a></p></li>
<li><p><a class="reference internal" href="withPoints-family.html"><span class="doc">withPoints - Familj av funktioner</span></a></p></li>
<li><p><a class="reference internal" href="bdDijkstra-family.html"><span class="doc">Dubbelriktad Dijkstra - Familj av funktioner</span></a></p></li>
<li><p><a class="reference internal" href="components-family.html"><span class="doc">Komponenter - Familj av funktioner</span></a></p></li>
<li><p><a class="reference internal" href="kruskal-family.html"><span class="doc">Kruskal - Familj av funktioner</span></a></p></li>
<li><p><a class="reference internal" href="prim-family.html"><span class="doc">Prim - Familj av funktioner</span></a></p></li>
<li><p>Vissa okategoriserade funktioner</p></li>
</ul>
<table class="docutils align-default" style="width: 81">
<colgroup>
<col style="width: 17.7%" />
<col style="width: 17.7%" />
<col style="width: 8.9%" />
<col style="width: 55.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Kolumn</p></th>
<th class="head"><p>Typ</p></th>
<th class="head"><p>Standard</p></th>
<th class="head"><p>Beskrivning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">id</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identifierare av kanten.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">source</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identifierare för den första slutpunktsvertexen på kanten.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">target</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identifierare för den andra slutpunktsvertexen på kanten.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cost</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td></td>
<td><p>Kantvikt (<code class="docutils literal notranslate"><span class="pre">källa</span></code>, <code class="docutils literal notranslate"><span class="pre">mål</span></code>)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td><p>-1</p></td>
<td><p>Kantvikt (<code class="docutils literal notranslate"><span class="pre">mål</span></code>, <code class="docutils literal notranslate"><span class="pre">källa</span></code>)</p>
<ul class="simple">
<li><p>När negativ: kanten (<code class="docutils literal notranslate"><span class="pre">mål</span></code>, <code class="docutils literal notranslate"><span class="pre">källa</span></code>) existerar inte, därför är den inte en del av grafen.</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Var:</p>
<dl class="field-list simple">
<dt class="field-odd">ANY-TAL<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p>
</dd>
<dt class="field-even">ANY-NUMERICAL<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code>, <code class="docutils literal notranslate"><span class="pre">REAL</span></code>, <code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p>
</dd>
</dl>
</section>
<section id="general-without-id">
<h4><a class="toc-backref" href="#id75" role="doc-backlink">Allmänt utan <code class="docutils literal notranslate"><span class="pre">id</span></code></a><a class="headerlink" href="#general-without-id" title="Link to this heading">¶</a></h4>
<p class="rubric">Edges SQL för</p>
<ul class="simple">
<li><p><a class="reference internal" href="allpairs-family.html"><span class="doc">Alla par - Familj av funktioner</span></a></p></li>
</ul>
<table class="docutils align-default" style="width: 81">
<colgroup>
<col style="width: 17.7%" />
<col style="width: 17.7%" />
<col style="width: 8.9%" />
<col style="width: 55.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Kolumn</p></th>
<th class="head"><p>Typ</p></th>
<th class="head"><p>Standard</p></th>
<th class="head"><p>Beskrivning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">source</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identifierare för den första slutpunktsvertexen på kanten.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">target</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identifierare för den andra slutpunktsvertexen på kanten.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">cost</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td></td>
<td><p>Kantvikt (<code class="docutils literal notranslate"><span class="pre">källa</span></code>, <code class="docutils literal notranslate"><span class="pre">mål</span></code>)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td><p>-1</p></td>
<td><p>Kantvikt (<code class="docutils literal notranslate"><span class="pre">mål</span></code>, <code class="docutils literal notranslate"><span class="pre">källa</span></code>)</p>
<ul class="simple">
<li><p>När negativ: kanten (<code class="docutils literal notranslate"><span class="pre">mål</span></code>, <code class="docutils literal notranslate"><span class="pre">källa</span></code>) existerar inte, därför är den inte en del av grafen.</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Var:</p>
<dl class="field-list simple">
<dt class="field-odd">ANY-TAL<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p>
</dd>
<dt class="field-even">ANY-NUMERICAL<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code>, <code class="docutils literal notranslate"><span class="pre">REAL</span></code>, <code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p>
</dd>
</dl>
</section>
<section id="general-with-x-y">
<h4><a class="toc-backref" href="#id76" role="doc-backlink">Allmänt med (X,Y)</a><a class="headerlink" href="#general-with-x-y" title="Link to this heading">¶</a></h4>
<p class="rubric">Edges SQL för</p>
<ul class="simple">
<li><p><a class="reference internal" href="aStar-family.html"><span class="doc">A* - Familj av funktioner</span></a></p></li>
<li><p><a class="reference internal" href="bdAstar-family.html"><span class="doc">Dubbelriktad A* - Familj av funktioner</span></a></p></li>
</ul>
<table class="docutils align-default" style="width: 81">
<colgroup>
<col style="width: 15.6%" />
<col style="width: 18.2%" />
<col style="width: 9.1%" />
<col style="width: 57.1%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Typ</p></th>
<th class="head"><p>Standard</p></th>
<th class="head"><p>Beskrivning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">id</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identifierare av kanten.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">source</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identifierare för den första slutpunktsvertexen på kanten.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">target</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identifierare för den andra slutpunktsvertexen på kanten.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cost</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td></td>
<td><p>Kantvikt (<code class="docutils literal notranslate"><span class="pre">källa</span></code>, <code class="docutils literal notranslate"><span class="pre">mål</span></code>)</p>
<ul class="simple">
<li><p>När den är negativ: kanten (<code class="docutils literal notranslate"><span class="pre">källa</span></code>, <code class="docutils literal notranslate"><span class="pre">mål</span></code>) existerar inte, därför är den inte en del av grafen.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td><p>-1</p></td>
<td><p>Kantvikt (<code class="docutils literal notranslate"><span class="pre">mål</span></code>, <code class="docutils literal notranslate"><span class="pre">källa</span></code>),</p>
<ul class="simple">
<li><p>När negativ: kanten (<code class="docutils literal notranslate"><span class="pre">mål</span></code>, <code class="docutils literal notranslate"><span class="pre">källa</span></code>) existerar inte, därför är den inte en del av grafen.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">x1</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td></td>
<td><p>X-koordinat för <code class="docutils literal notranslate"><span class="pre">källans</span></code> toppunkt.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">y1</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td></td>
<td><p>Y-koordinat för <code class="docutils literal notranslate"><span class="pre">källans</span></code> toppunkt.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">x2</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td></td>
<td><p>X-koordinat för <code class="docutils literal notranslate"><span class="pre">mål</span></code> vertex.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">y2</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td></td>
<td><p>Y-koordinat för ”målets” toppunkt.</p></td>
</tr>
</tbody>
</table>
<p>Var:</p>
<dl class="field-list simple">
<dt class="field-odd">ANY-TAL<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p>
</dd>
<dt class="field-even">ANY-NUMERICAL<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code>, <code class="docutils literal notranslate"><span class="pre">REAL</span></code>, <code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p>
</dd>
</dl>
</section>
<section id="flow">
<h4><a class="toc-backref" href="#id77" role="doc-backlink">Flöde</a><a class="headerlink" href="#flow" title="Link to this heading">¶</a></h4>
<p class="rubric">Edges SQL för <a class="reference internal" href="flow-family.html"><span class="doc">Flow - Familj av funktioner</span></a></p>
<p class="rubric">Edges SQL för</p>
<ul class="simple">
<li><p><a class="reference internal" href="pgr_pushRelabel.html"><span class="doc">pgr_pushRelabel</span></a></p></li>
<li><p><a class="reference internal" href="pgr_edmondsKarp.html"><span class="doc">pgr_edmondsKarp</span></a></p></li>
<li><p><a class="reference internal" href="pgr_boykovKolmogorov.html"><span class="doc">pgr_boykovKolmogorov</span></a></p></li>
</ul>
<table class="docutils align-default" style="width: 81">
<colgroup>
<col style="width: 17.7%" />
<col style="width: 17.7%" />
<col style="width: 8.9%" />
<col style="width: 55.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Kolumn</p></th>
<th class="head"><p>Typ</p></th>
<th class="head"><p>Standard</p></th>
<th class="head"><p>Beskrivning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">id</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identifierare av kanten.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">source</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identifierare för den första slutpunktsvertexen på kanten.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">target</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identifierare för den andra slutpunktsvertexen på kanten.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">capacity</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Kantvikt (<code class="docutils literal notranslate"><span class="pre">källa</span></code>, <code class="docutils literal notranslate"><span class="pre">mål</span></code>)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">reverse_capacity</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td><p>-1</p></td>
<td><p>Kantvikt (<code class="docutils literal notranslate"><span class="pre">mål</span></code>, <code class="docutils literal notranslate"><span class="pre">källa</span></code>)</p>
<ul class="simple">
<li><p>När negativ: kanten (<code class="docutils literal notranslate"><span class="pre">mål</span></code>, <code class="docutils literal notranslate"><span class="pre">källa</span></code>) existerar inte, därför är den inte en del av grafen.</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Var:</p>
<dl class="field-list simple">
<dt class="field-odd">ANY-TAL<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p>
</dd>
<dt class="field-even">ANY-NUMERICAL<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code>, <code class="docutils literal notranslate"><span class="pre">REAL</span></code>, <code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p>
</dd>
</dl>
<p class="rubric">Edges SQL för följande funktioner i <a class="reference internal" href="flow-family.html"><span class="doc">Flow - Familj av funktioner</span></a></p>
<ul class="simple">
<li><p><a class="reference internal" href="pgr_maxFlowMinCost.html"><span class="doc">pgr_maxFlowMinCost - Experimentell</span></a></p></li>
<li><p><a class="reference internal" href="pgr_maxFlowMinCost_Cost.html"><span class="doc">pgr_maxFlowMinCost_Cost - Experimentell</span></a></p></li>
</ul>
<table class="docutils align-default" style="width: 81">
<colgroup>
<col style="width: 17.7%" />
<col style="width: 17.7%" />
<col style="width: 8.9%" />
<col style="width: 55.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Kolumn</p></th>
<th class="head"><p>Typ</p></th>
<th class="head"><p>Standard</p></th>
<th class="head"><p>Beskrivning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">id</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identifierare av kanten.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">source</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identifierare för den första slutpunktsvertexen på kanten.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">target</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identifierare för den andra slutpunktsvertexen på kanten.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">capacity</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Kapacitet för kanten (<code class="docutils literal notranslate"><span class="pre">källa</span></code>, <code class="docutils literal notranslate"><span class="pre">mål</span></code>)</p>
<ul class="simple">
<li><p>När negativ: kanten (<code class="docutils literal notranslate"><span class="pre">mål</span></code>, <code class="docutils literal notranslate"><span class="pre">källa</span></code>) existerar inte, därför är den inte en del av grafen.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">reverse_capacity</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td><p>-1</p></td>
<td><p>Kapacitet för kanten (<code class="docutils literal notranslate"><span class="pre">mål</span></code>, <code class="docutils literal notranslate"><span class="pre">källa</span></code>)</p>
<ul class="simple">
<li><p>När negativ: kanten (<code class="docutils literal notranslate"><span class="pre">mål</span></code>, <code class="docutils literal notranslate"><span class="pre">källa</span></code>) existerar inte, därför är den inte en del av grafen.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cost</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td></td>
<td><p>Vikt för kanten (<code class="docutils literal notranslate"><span class="pre">källa</span></code>, <code class="docutils literal notranslate"><span class="pre">mål</span></code>) om den finns</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td><p><span class="math notranslate nohighlight">\(-1\)</span></p></td>
<td><p>Vikt för kanten (<code class="docutils literal notranslate"><span class="pre">mål</span></code>, <code class="docutils literal notranslate"><span class="pre">källa</span></code>) om den finns</p></td>
</tr>
</tbody>
</table>
<p>Var:</p>
<dl class="field-list simple">
<dt class="field-odd">ANY-TAL<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p>
</dd>
<dt class="field-even">ANY-NUMERICAL<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code>, <code class="docutils literal notranslate"><span class="pre">REAL</span></code>, <code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p>
</dd>
</dl>
</section>
</section>
<section id="combinations-sql">
<h3><a class="toc-backref" href="#id78" role="doc-backlink">Kombinationer SQL</a><a class="headerlink" href="#combinations-sql" title="Link to this heading">¶</a></h3>
<p class="rubric">Används i kombinationssignaturer</p>
<table class="docutils align-default" style="width: 81">
<colgroup>
<col style="width: 14.0%" />
<col style="width: 16.3%" />
<col style="width: 69.8%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Typ</p></th>
<th class="head"><p>Beskrivning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">source</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td><p>Identifierare för avgångsvertexen.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">target</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td><p>Identifierare för ankomstvertexet.</p></td>
</tr>
</tbody>
</table>
<p>Var:</p>
<dl class="field-list simple">
<dt class="field-odd">ANY-TAL<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p>
</dd>
</dl>
</section>
<section id="restrictions-sql">
<h3><a class="toc-backref" href="#id79" role="doc-backlink">Begränsningar SQL</a><a class="headerlink" href="#restrictions-sql" title="Link to this heading">¶</a></h3>
<table class="docutils align-default" style="width: 81">
<colgroup>
<col style="width: 10.3%" />
<col style="width: 25.0%" />
<col style="width: 64.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Kolumn</p></th>
<th class="head"><p>Typ</p></th>
<th class="head"><p>Beskrivning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">path</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ARRAY</span></code> [<strong>ANY-INTEGER</strong>]</p></td>
<td><p>Sekvens av kantidentifierare som bildar en väg som inte är tillåten att ta. - Tomma arrayer eller <code class="docutils literal notranslate"><span class="pre">NULL</span></code> arrayer ignoreras. - Arrayer som har ett <code class="docutils literal notranslate"><span class="pre">NULL</span></code>-element kommer att ge upphov till ett undantag.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Cost</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td><p>Kostnaden för att gå den förbjudna vägen.</p></td>
</tr>
</tbody>
</table>
<p>Var:</p>
<dl class="field-list simple">
<dt class="field-odd">ANY-TAL<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p>
</dd>
<dt class="field-even">ANY-NUMERICAL<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code>, <code class="docutils literal notranslate"><span class="pre">REAL</span></code>, <code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p>
</dd>
</dl>
</section>
<section id="points-sql">
<h3><a class="toc-backref" href="#id80" role="doc-backlink">Punkt SQL</a><a class="headerlink" href="#points-sql" title="Link to this heading">¶</a></h3>
<p class="rubric">Punkt SQL för</p>
<ul class="simple">
<li><p><a class="reference internal" href="withPoints-family.html"><span class="doc">withPoints - Familj av funktioner</span></a></p></li>
</ul>
<table class="docutils align-default" style="width: 81">
<colgroup>
<col style="width: 15.6%" />
<col style="width: 18.2%" />
<col style="width: 9.1%" />
<col style="width: 57.1%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Typ</p></th>
<th class="head"><p>Standard</p></th>
<th class="head"><p>Beskrivning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">pid</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td><p><strong>värde</strong></p></td>
<td><p>Identifierare av punkten.</p>
<ul class="simple">
<li><p>Använd med positivt värde, eftersom det internt kommer att omvandlas till negativt värde</p></li>
<li><p>Om kolumnen finns med kan den inte vara NULL.</p></li>
<li><p>Om kolumnen inte finns med kommer ett negativt <strong>värde</strong> att anges automatiskt i ordningsföljd.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">edge_id</span></code></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td></td>
<td><p>Identifierar den kant som ligger ”närmast” punkten.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">fraction</span></code></p></td>
<td><p><strong>ANY-NUMERICAL</strong></p></td>
<td></td>
<td><p>Värde i &lt;0,1&gt; som anger den relativa positionen från kantens första ändpunkt.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">side</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">CHAR</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">b</span></code></p></td>
<td><p>Värde i [<code class="docutils literal notranslate"><span class="pre">b</span></code>, <code class="docutils literal notranslate"><span class="pre">r</span></code>, <code class="docutils literal notranslate"><span class="pre">l</span></code>, <code class="docutils literal notranslate"><span class="pre">NULL</span></code>] som anger om punkten är:</p>
<ul class="simple">
<li><p>I rätt ”r”,</p></li>
<li><p>I vänster ”l”,</p></li>
<li><p>I båda sidor <code class="docutils literal notranslate"><span class="pre">b</span></code>, <code class="docutils literal notranslate"><span class="pre">NULL</span></code></p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Var:</p>
<dl class="field-list simple">
<dt class="field-odd">ANY-TAL<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p>
</dd>
<dt class="field-even">ANY-NUMERICAL<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code>, <code class="docutils literal notranslate"><span class="pre">REAL</span></code>, <code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p>
</dd>
</dl>
</section>
</section>
<section id="parameters">
<h2><a class="toc-backref" href="#id36" role="doc-backlink">Parametrar</a><a class="headerlink" href="#parameters" title="Link to this heading">¶</a></h2>
<p>Huvudparametern för de flesta pgRouting-funktioner är en fråga som väljer ut kanterna i grafen.</p>
<table class="docutils align-default" style="width: 81">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Typ</p></th>
<th class="head"><p>Beskrivning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="#edges-sql">Kanter SQL</a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">TEXT</span></code></p></td>
<td><p><a class="reference internal" href="#edges-sql">Kanter SQL</a> enligt beskrivningen nedan.</p></td>
</tr>
</tbody>
</table>
<p>Beroende på vilken familj eller kategori en funktion tillhör kommer den att ha ytterligare parametrar, varav vissa är obligatoriska och andra valfria.</p>
<p>De obligatoriska parametrarna är namnlösa och måste anges i den ordning som krävs. De valfria parametrarna är namngivna parametrar och kommer att ha ett standardvärde.</p>
<section id="parameters-for-the-via-functions">
<h3><a class="toc-backref" href="#id37" role="doc-backlink">Parametrar för Via-funktionerna</a><a class="headerlink" href="#parameters-for-the-via-functions" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="pgr_dijkstraVia.html"><span class="doc">pgr_dijkstraVia</span></a></p></li>
</ul>
<table class="docutils align-default" style="width: 81">
<colgroup>
<col style="width: 17.3%" />
<col style="width: 24.7%" />
<col style="width: 8.6%" />
<col style="width: 49.4%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Typ</p></th>
<th class="head"><p>Standard</p></th>
<th class="head"><p>Beskrivning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="#edges-sql">Kanter SQL</a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">TEXT</span></code></p></td>
<td></td>
<td><p>SQL-fråga enligt beskrivning.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>via hörnpunkter</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ARRAY</span></code> [<strong>ANY-INTEGER</strong>]</p></td>
<td></td>
<td><p>Array av ordnade toppunktsidentifierare som kommer att besökas.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">directed</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BOOLEAN</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
<td><ul class="simple">
<li><p>När en ”sann” graf anses vara ”riktad</p></li>
<li><p>När <code class="docutils literal notranslate"><span class="pre">false</span></code> betraktas grafen som Undirected.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">strict</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BOOLEAN</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td><ul class="simple">
<li><p>När <code class="docutils literal notranslate"><span class="pre">true</span></code> om en sökväg saknas stoppar och returnerar <strong>EMPTY SET</strong></p></li>
<li><p>När <code class="docutils literal notranslate"><span class="pre">false</span></code> ignorerar saknade sökvägar returneras alla sökvägar som hittats</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">U_turn_on_edge</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BOOLEAN</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
<td><ul class="simple">
<li><p>När <code class="docutils literal notranslate"><span class="pre">true</span></code> avgår från ett besökt toppunkt kommer inte att försöka undvika att använda den kant som användes för att nå det. Med andra ord är det tillåtet att använda kanten med samma identifierare i U-svängen.</p></li>
<li><p>När <code class="docutils literal notranslate"><span class="pre">false</span></code> när en avgång från en besökt topp försöker undvika att använda den kant som användes för att nå den. Med andra ord, U-sväng med kanten med samma identifierare används när ingen annan väg hittas.</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="for-the-trsp-functions">
<h3><a class="toc-backref" href="#id38" role="doc-backlink">För TRSP-funktionerna</a><a class="headerlink" href="#for-the-trsp-functions" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="pgr_trsp.html"><span class="doc">pgr_trsp</span></a></p></li>
</ul>
<table class="docutils align-default" style="width: 81">
<colgroup>
<col style="width: 20.5%" />
<col style="width: 26.5%" />
<col style="width: 53.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Kolumn</p></th>
<th class="head"><p>Typ</p></th>
<th class="head"><p>Beskrivning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="#edges-sql">Kanter SQL</a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">TEXT</span></code></p></td>
<td><p>SQL-fråga enligt beskrivning.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#restrictions-sql">Begränsningar SQL</a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">TEXT</span></code></p></td>
<td><p>SQL-fråga enligt beskrivning.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#combinations-sql">Kombinationer SQL</a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">TEXT</span></code></p></td>
<td><p><a class="reference internal" href="#combinations-sql">Combinations SQL</a> enligt beskrivningen nedan</p></td>
</tr>
<tr class="row-odd"><td><p><strong>start vid</strong></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td><p>Identifierare för avgångsvertexen.</p></td>
</tr>
<tr class="row-even"><td><p><strong>start vids</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ARRAY</span></code> [<strong>ANY-INTEGER</strong>]</p></td>
<td><p>Array med identifierare för målpunkter.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>end vid</strong></p></td>
<td><p><strong>ANY-INTEGER</strong></p></td>
<td><p>Identifierare för avgångsvertexen.</p></td>
</tr>
<tr class="row-even"><td><p><strong>end vids</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ARRAY</span></code> [<strong>ANY-INTEGER</strong>]</p></td>
<td><p>Array med identifierare för målpunkter.</p></td>
</tr>
</tbody>
</table>
<p>Var:</p>
<dl class="field-list simple">
<dt class="field-odd">ANY-TAL<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p>
</dd>
</dl>
</section>
</section>
<section id="result-columns">
<h2><a class="toc-backref" href="#id39" role="doc-backlink">Resultat kolumner</a><a class="headerlink" href="#result-columns" title="Link to this heading">¶</a></h2>
<nav class="contents local" id="id6">
<ul class="simple">
<li><p><a class="reference internal" href="#result-columns-for-single-path-functions" id="id81">Resultatkolumner för funktioner med enkel sökväg</a></p></li>
<li><p><a class="reference internal" href="#result-columns-for-multiple-paths-functions" id="id82">Resultatkolumner för funktioner med flera sökvägar</a></p></li>
<li><p><a class="reference internal" href="#result-columns-for-cost-functions" id="id83">Resultatkolumner för kostnadsfunktioner</a></p></li>
<li><p><a class="reference internal" href="#result-columns-for-flow-functions" id="id84">Resultatkolumner för flödesfunktioner</a></p></li>
<li><p><a class="reference internal" href="#result-columns-for-spanning-tree-functions" id="id85">Resultatkolumner för funktioner för spännträd</a></p></li>
<li><p><a class="reference internal" href="#result-columns-for-simple-spanning-tree-functions" id="id86">Resultatkolumner för funktioner för enkla spännträd</a></p></li>
</ul>
</nav>
<p>Det finns flera olika typer av kolonner som returneras beroende på funktion.</p>
<section id="result-columns-for-single-path-functions">
<h3><a class="toc-backref" href="#id81" role="doc-backlink">Resultatkolumner för funktioner med enkel sökväg</a><a class="headerlink" href="#result-columns-for-single-path-functions" title="Link to this heading">¶</a></h3>
<p>Används i funktioner som returnerar en lösning per avgång och destination.</p>
<ul class="simple">
<li><p><a class="reference internal" href="pgr_aStar.html"><span class="doc">pgr_aStar</span></a></p></li>
<li><p><a class="reference internal" href="pgr_bdAstar.html"><span class="doc">pgr_bdAstar</span></a></p></li>
<li><p><a class="reference internal" href="pgr_bdDijkstra.html"><span class="doc">pgr_bdDijkstra</span></a></p></li>
<li><p><a class="reference internal" href="pgr_bellmanFord.html"><span class="doc">pgr_bellmanFord - Experimentell</span></a></p></li>
<li><p><a class="reference internal" href="pgr_binaryBreadthFirstSearch.html"><span class="doc">pgr_binaryBreadthFirstSearch - Experimentell</span></a></p></li>
<li><p><a class="reference internal" href="pgr_dijkstra.html"><span class="doc">pgr_dijkstra</span></a></p></li>
<li><p><a class="reference internal" href="pgr_dijkstraNear.html"><span class="doc">pgr_dijkstraNear</span></a></p></li>
<li><p><a class="reference internal" href="pgr_edwardMoore.html"><span class="doc">pgr_edwardMoore - Experimentell</span></a></p></li>
<li><p><a class="reference internal" href="pgr_trsp.html"><span class="doc">pgr_trsp</span></a></p></li>
<li><p><a class="reference internal" href="pgr_trsp_withPoints.html"><span class="doc">pgr_trsp_withPoints</span></a></p></li>
<li><p><a class="reference internal" href="pgr_withPoints.html"><span class="doc">pgr_withPoints</span></a></p></li>
</ul>
<p>Returnerar <code class="docutils literal notranslate"><span class="pre">(seq,</span> <span class="pre">path_seq,</span> <span class="pre">start_vid,</span> <span class="pre">end_vid,</span> <span class="pre">node,</span> <span class="pre">edge,</span> <span class="pre">cost,</span> <span class="pre">agg_cost)</span></code></p>
<table class="docutils align-default" style="width: 81">
<colgroup>
<col style="width: 14.0%" />
<col style="width: 16.3%" />
<col style="width: 69.8%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Kolumn</p></th>
<th class="head"><p>Typ</p></th>
<th class="head"><p>Beskrivning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">seq</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
<td><p>Sekventiellt värde med början från <strong>1</strong>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">path_seq</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
<td><p>Relativ position i tågläget. Har värdet <strong>1</strong> för början av ett tågläge.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">start_vid</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifierar startpunkten för den aktuella banan.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">end_vid</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifierare för den aktuella banans slutpunkt.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">node</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifierare av noden i sökvägen från <code class="docutils literal notranslate"><span class="pre">start_vid</span></code> till <code class="docutils literal notranslate"><span class="pre">slut_vid</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">edge</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifierare av den kant som används för att gå från <code class="docutils literal notranslate"><span class="pre">node</span></code> till nästa nod i sökvägssekvensen. <strong>-1</strong> för den sista noden i sökvägen.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">cost</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p>Kostnad för att gå från <code class="docutils literal notranslate"><span class="pre">nod</span></code> med hjälp av <code class="docutils literal notranslate"><span class="pre">edge</span></code> till nästa nod i vägsekvensen.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">agg_cost</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p>Sammanlagd kostnad från <code class="docutils literal notranslate"><span class="pre">start_vid</span></code> till <code class="docutils literal notranslate"><span class="pre">node</span></code>.</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Observera</p>
<p>När kolumnerna <code class="docutils literal notranslate"><span class="pre">start_vid</span></code> eller <code class="docutils literal notranslate"><span class="pre">end_vid</span></code> har negativa värden är identifieraren för en Point.</p>
</div>
</section>
<section id="result-columns-for-multiple-paths-functions">
<h3><a class="toc-backref" href="#id82" role="doc-backlink">Resultatkolumner för funktioner med flera sökvägar</a><a class="headerlink" href="#result-columns-for-multiple-paths-functions" title="Link to this heading">¶</a></h3>
<p>Används i funktioner som returnerar många banlösningar per avgång och destination.</p>
<ul class="simple">
<li><p><a class="reference internal" href="pgr_KSP.html"><span class="doc">pgr_KSP</span></a></p></li>
<li><p><a class="reference internal" href="pgr_withPointsKSP.html"><span class="doc">pgr_withPointsKSP</span></a></p></li>
<li><p><a class="reference internal" href="pgr_edgeDisjointPaths.html"><span class="doc">pgr_edgeDisjointPaths</span></a></p></li>
</ul>
<p>Returnerar uppsättning av <code class="docutils literal notranslate"><span class="pre">(seq,</span> <span class="pre">path_id,</span> <span class="pre">path_seq,</span> <span class="pre">start_vid,</span> <span class="pre">end_vid,</span> <span class="pre">node,</span> <span class="pre">edge,</span> <span class="pre">cost,</span> <span class="pre">agg_cost)</span></code></p>
<table class="docutils align-default" style="width: 81">
<colgroup>
<col style="width: 14.0%" />
<col style="width: 16.3%" />
<col style="width: 69.8%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Kolumn</p></th>
<th class="head"><p>Typ</p></th>
<th class="head"><p>Beskrivning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">seq</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
<td><p>Sekventiellt värde med början från <strong>1</strong>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">path_id</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
<td><p>Identifierare för sökväg.</p>
<ul class="simple">
<li><p>Har värdet <strong>1</strong> för den första i en sökväg från <code class="docutils literal notranslate"><span class="pre">start_vid</span></code> till <code class="docutils literal notranslate"><span class="pre">slut_vid</span></code>.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">path_seq</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p></td>
<td><p>Relativ position i tågläget. Har värdet <strong>1</strong> för början av ett tågläge.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">start_vid</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifierare för startvertexen.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">end_vid</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifierare för det avslutande toppunktet.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">node</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifierare av noden i sökvägen från <code class="docutils literal notranslate"><span class="pre">start_vid</span></code> till <code class="docutils literal notranslate"><span class="pre">slut_vid</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">edge</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifierare av den kant som används för att gå från <code class="docutils literal notranslate"><span class="pre">node</span></code> till nästa nod i sökvägssekvensen. <strong>-1</strong> för den sista noden i sökvägen.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cost</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p>Kostnad för att gå från <code class="docutils literal notranslate"><span class="pre">nod</span></code> med hjälp av <code class="docutils literal notranslate"><span class="pre">edge</span></code> till nästa nod i vägsekvensen.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">agg_cost</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p>Sammanlagd kostnad från <code class="docutils literal notranslate"><span class="pre">start_vid</span></code> till <code class="docutils literal notranslate"><span class="pre">node</span></code>.</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Observera</p>
<p>När kolumnerna <code class="docutils literal notranslate"><span class="pre">start_vid</span></code> eller <code class="docutils literal notranslate"><span class="pre">end_vid</span></code> har negativa värden är identifieraren för en Point.</p>
</div>
</section>
<section id="result-columns-for-cost-functions">
<h3><a class="toc-backref" href="#id83" role="doc-backlink">Resultatkolumner för kostnadsfunktioner</a><a class="headerlink" href="#result-columns-for-cost-functions" title="Link to this heading">¶</a></h3>
<p>Används av:</p>
<ul class="simple">
<li><p><a class="reference internal" href="cost-category.html"><span class="doc">Kostnad - Kategori</span></a></p></li>
<li><p><a class="reference internal" href="costMatrix-category.html"><span class="doc">Kostnadsmatris - Kategori</span></a></p></li>
<li><p><a class="reference internal" href="allpairs-family.html"><span class="doc">Alla par - Familj av funktioner</span></a></p></li>
</ul>
<p>Uppsättning av <code class="docutils literal notranslate"><span class="pre">(start_vid,</span> <span class="pre">end_vid,</span> <span class="pre">agg_cost)</span></code></p>
<table class="docutils align-default" style="width: 81">
<colgroup>
<col style="width: 14.0%" />
<col style="width: 16.3%" />
<col style="width: 69.8%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Kolumn</p></th>
<th class="head"><p>Typ</p></th>
<th class="head"><p>Beskrivning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">start_vid</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifierare för startvertexen.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">end_vid</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifierare för det avslutande toppunktet.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">agg_cost</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p>Sammanlagd kostnad från <code class="docutils literal notranslate"><span class="pre">start_vid</span></code> till <code class="docutils literal notranslate"><span class="pre">slut_vid</span></code>.</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Observera</p>
<p>När kolumnerna start_vid eller end_vid har negativa värden är identifieraren för en Point.</p>
</div>
</section>
<section id="result-columns-for-flow-functions">
<h3><a class="toc-backref" href="#id84" role="doc-backlink">Resultatkolumner för flödesfunktioner</a><a class="headerlink" href="#result-columns-for-flow-functions" title="Link to this heading">¶</a></h3>
<p>Används av:</p>
<ul class="simple">
<li><p><a class="reference internal" href="flow-family.html"><span class="doc">Flow - Familj av funktioner</span></a></p></li>
</ul>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Kolumn</p></th>
<th class="head"><p>Typ</p></th>
<th class="head"><p>Beskrivning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>seq</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INT</span></code></p></td>
<td><p>Sekventiellt värde med början från <strong>1</strong>.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>edge</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifierare av kanten i den ursprungliga frågan (edges_sql).</p></td>
</tr>
<tr class="row-even"><td><p><strong>start_vid</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifierare för den första slutpunktsvertexen på kanten.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>end_vid</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifierare för den andra slutpunktsvertexen på kanten.</p></td>
</tr>
<tr class="row-even"><td><p><strong>flow</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Flöde genom kanten i riktning (<code class="docutils literal notranslate"><span class="pre">start_vid</span></code>, <code class="docutils literal notranslate"><span class="pre">slut_vid</span></code>).</p></td>
</tr>
<tr class="row-odd"><td><p><strong>återstående_kapacitet</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Restkapacitet för kanten i riktningen (<code class="docutils literal notranslate"><span class="pre">start_vid</span></code>, <code class="docutils literal notranslate"><span class="pre">slut_vid</span></code>).</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Edges SQL för följande funktioner i <a class="reference internal" href="flow-family.html"><span class="doc">Flow - Familj av funktioner</span></a></p>
<ul class="simple">
<li><p><a class="reference internal" href="pgr_maxFlowMinCost.html"><span class="doc">pgr_maxFlowMinCost - Experimentell</span></a></p></li>
</ul>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Kolumn</p></th>
<th class="head"><p>Typ</p></th>
<th class="head"><p>Beskrivning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>seq</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">INT</span></code></p></td>
<td><p>Sekventiellt värde med början från <strong>1</strong>.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>edge</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifierare av kanten i den ursprungliga frågan (edges_sql).</p></td>
</tr>
<tr class="row-even"><td><p><strong>källa</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifierare för den första slutpunktsvertexen på kanten.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>mål</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifierare för den andra slutpunktsvertexen på kanten.</p></td>
</tr>
<tr class="row-even"><td><p><strong>flow</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Flöde genom kanten i riktning (källa, mål).</p></td>
</tr>
<tr class="row-odd"><td><p><strong>återstående_kapacitet</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Restkapacitet för kanten i riktningen (källa, mål).</p></td>
</tr>
<tr class="row-even"><td><p><strong>cost</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p>Kostnaden för att skicka detta flöde genom kanten i riktningen (källa, mål).</p></td>
</tr>
<tr class="row-odd"><td><p><strong>agg_cost</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p>Den sammanlagda kostnaden.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="result-columns-for-spanning-tree-functions">
<h3><a class="toc-backref" href="#id85" role="doc-backlink">Resultatkolumner för funktioner för spännträd</a><a class="headerlink" href="#result-columns-for-spanning-tree-functions" title="Link to this heading">¶</a></h3>
<p>Används i funktioner som returnerar en trädlösning per avgång.</p>
<ul class="simple">
<li><p><a class="reference internal" href="pgr_breadthFirstSearch.html"><span class="doc">pgr_breadthFirstSearch - Experimentell</span></a></p></li>
<li><p><a class="reference internal" href="pgr_depthFirstSearch.html"><span class="doc">pgr_depthFirstSearch - Föreslagen</span></a></p></li>
<li><p><a class="reference internal" href="pgr_drivingDistance.html"><span class="doc">pgr_drivingDistance</span></a></p></li>
<li><p><a class="reference internal" href="pgr_kruskalBFS.html"><span class="doc">pgr_kruskalBFS</span></a></p></li>
<li><p><a class="reference internal" href="pgr_kruskalDD.html"><span class="doc">pgr_kruskalDD</span></a></p></li>
<li><p><a class="reference internal" href="pgr_kruskalDFS.html"><span class="doc">pgr_kruskalDFS</span></a></p></li>
<li><p><a class="reference internal" href="pgr_primBFS.html"><span class="doc">pgr_primBFS</span></a></p></li>
<li><p><a class="reference internal" href="pgr_primDD.html"><span class="doc">pgr_primDD</span></a></p></li>
<li><p><a class="reference internal" href="pgr_primDFS.html"><span class="doc">pgr_primDFS</span></a></p></li>
<li><p><a class="reference internal" href="pgr_withPointsDD.html"><span class="doc">pgr_withPointsDD</span></a></p></li>
</ul>
<p>Returnerar uppsättning av <code class="docutils literal notranslate"><span class="pre">(seq,</span> <span class="pre">depth,</span> <span class="pre">start_vid,</span> <span class="pre">pred,</span> <span class="pre">node,</span> <span class="pre">edge,</span> <span class="pre">cost,</span> <span class="pre">agg_cost)</span></code></p>
<table class="docutils align-default" style="width: 81">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Typ</p></th>
<th class="head"><p>Beskrivning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">seq</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Sekventiellt värde med början från <span class="math notranslate nohighlight">\(1\)</span>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">depth</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Djupet på <code class="docutils literal notranslate"><span class="pre">noden</span></code>.</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(0\)</span> när``node`` = <code class="docutils literal notranslate"><span class="pre">start_vid</span></code>.</p></li>
<li><p><span class="math notranslate nohighlight">\(depth-1\)</span> is the depth of <code class="docutils literal notranslate"><span class="pre">pred</span></code></p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">start_vid</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifierare för rotvertexen.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">pred</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Föregångare till <code class="docutils literal notranslate"><span class="pre">node</span></code>.</p>
<ul class="simple">
<li><p>När <code class="docutils literal notranslate"><span class="pre">node</span></code> = <code class="docutils literal notranslate"><span class="pre">start_vid</span></code> så har värdet <code class="docutils literal notranslate"><span class="pre">node</span></code>.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">node</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifierare av <code class="docutils literal notranslate"><span class="pre">nod</span></code> som nås med hjälp av <code class="docutils literal notranslate"><span class="pre">kant</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">edge</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifierare av den <code class="docutils literal notranslate"><span class="pre">edge</span></code> som används för att komma från <code class="docutils literal notranslate"><span class="pre">pred</span></code> till <code class="docutils literal notranslate"><span class="pre">node</span></code>.</p>
<ul class="simple">
<li><p><span class="math notranslate nohighlight">\(-1\)</span> när <code class="docutils literal notranslate"><span class="pre">node</span></code> = <code class="docutils literal notranslate"><span class="pre">start_vid</span></code>.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">cost</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p>Kostnad för att korsa <code class="docutils literal notranslate"><span class="pre">kant</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">agg_cost</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p>Sammanlagd kostnad från <code class="docutils literal notranslate"><span class="pre">start_vid</span></code> till <code class="docutils literal notranslate"><span class="pre">node</span></code>.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="result-columns-for-simple-spanning-tree-functions">
<h3><a class="toc-backref" href="#id86" role="doc-backlink">Resultatkolumner för funktioner för enkla spännträd</a><a class="headerlink" href="#result-columns-for-simple-spanning-tree-functions" title="Link to this heading">¶</a></h3>
<p>Används av:</p>
<ul class="simple">
<li><p><a class="reference internal" href="pgr_prim.html"><span class="doc">pgr_prim</span></a></p></li>
<li><p><a class="reference internal" href="pgr_kruskal.html"><span class="doc">pgr_kruskal</span></a></p></li>
</ul>
<p>Returnerar uppsättning av <code class="docutils literal notranslate"><span class="pre">(kant,</span> <span class="pre">kostnad)</span></code></p>
<table class="docutils align-default" style="width: 81">
<thead>
<tr class="row-odd"><th class="head"><p>Kolumn</p></th>
<th class="head"><p>Typ</p></th>
<th class="head"><p>Beskrivning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">edge</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identifierare av kanten.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cost</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p>Kostnad för att korsa kanten.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="performance-tips">
<h2><a class="toc-backref" href="#id46" role="doc-backlink">Tips om prestanda</a><a class="headerlink" href="#performance-tips" title="Link to this heading">¶</a></h2>
<nav class="contents local" id="id7">
<ul class="simple">
<li><p><a class="reference internal" href="#for-the-routing-functions" id="id87">För Routing-funktionerna</a></p></li>
</ul>
</nav>
<section id="for-the-routing-functions">
<h3><a class="toc-backref" href="#id87" role="doc-backlink">För Routing-funktionerna</a><a class="headerlink" href="#for-the-routing-functions" title="Link to this heading">¶</a></h3>
<p>För att få snabbare resultat avgränsar du frågorna till ett intresseområde för routning.</p>
<p>I det här exemplet Använd en inre fråga SQL som inte innehåller några kanter i routningsfunktionen och som ligger inom resultatområdet.</p>
<p>Med tanke på detta område:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="nb">id</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">cost</span><span class="p">,</span> <span class="n">reverse_cost</span>
<span class="n">FROM</span> <span class="n">edges</span>
<span class="n">WHERE</span> <span class="n">geom</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
  <span class="n">SELECT</span> <span class="n">st_buffer</span><span class="p">(</span><span class="n">geom</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="k">as</span> <span class="n">myarea</span>
  <span class="n">FROM</span> <span class="n">edges</span> <span class="n">where</span> <span class="nb">id</span> <span class="o">=</span> <span class="mi">6</span><span class="p">)</span> <span class="n">ORDER</span> <span class="n">BY</span> <span class="nb">id</span><span class="p">;</span>
 <span class="nb">id</span> <span class="o">|</span> <span class="n">source</span> <span class="o">|</span> <span class="n">target</span> <span class="o">|</span> <span class="n">cost</span> <span class="o">|</span> <span class="n">reverse_cost</span>
<span class="o">----+--------+--------+------+--------------</span>
  <span class="mi">1</span> <span class="o">|</span>      <span class="mi">5</span> <span class="o">|</span>      <span class="mi">6</span> <span class="o">|</span>    <span class="mi">1</span> <span class="o">|</span>            <span class="mi">1</span>
  <span class="mi">2</span> <span class="o">|</span>      <span class="mi">6</span> <span class="o">|</span>     <span class="mi">10</span> <span class="o">|</span>   <span class="o">-</span><span class="mi">1</span> <span class="o">|</span>            <span class="mi">1</span>
  <span class="mi">4</span> <span class="o">|</span>      <span class="mi">6</span> <span class="o">|</span>      <span class="mi">7</span> <span class="o">|</span>    <span class="mi">1</span> <span class="o">|</span>            <span class="mi">1</span>
  <span class="mi">6</span> <span class="o">|</span>      <span class="mi">1</span> <span class="o">|</span>      <span class="mi">3</span> <span class="o">|</span>    <span class="mi">1</span> <span class="o">|</span>            <span class="mi">1</span>
  <span class="mi">7</span> <span class="o">|</span>      <span class="mi">3</span> <span class="o">|</span>      <span class="mi">7</span> <span class="o">|</span>    <span class="mi">1</span> <span class="o">|</span>            <span class="mi">1</span>
  <span class="mi">8</span> <span class="o">|</span>      <span class="mi">7</span> <span class="o">|</span>     <span class="mi">11</span> <span class="o">|</span>    <span class="mi">1</span> <span class="o">|</span>            <span class="mi">1</span>
 <span class="mi">10</span> <span class="o">|</span>      <span class="mi">7</span> <span class="o">|</span>      <span class="mi">8</span> <span class="o">|</span>    <span class="mi">1</span> <span class="o">|</span>            <span class="mi">1</span>
 <span class="mi">12</span> <span class="o">|</span>      <span class="mi">8</span> <span class="o">|</span>     <span class="mi">12</span> <span class="o">|</span>    <span class="mi">1</span> <span class="o">|</span>           <span class="o">-</span><span class="mi">1</span>
 <span class="mi">14</span> <span class="o">|</span>      <span class="mi">8</span> <span class="o">|</span>      <span class="mi">9</span> <span class="o">|</span>    <span class="mi">1</span> <span class="o">|</span>            <span class="mi">1</span>
 <span class="mi">20</span> <span class="o">|</span>      <span class="mi">8</span> <span class="o">|</span>      <span class="mi">4</span> <span class="o">|</span>  <span class="mf">0.5</span> <span class="o">|</span>          <span class="mf">0.5</span>
<span class="p">(</span><span class="mi">10</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
<p>Beräkna en rutt:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>SELECT * FROM pgr_dijkstra($$
  SELECT id, source, target, cost, reverse_cost
  FROM edges
  WHERE geom &amp;&amp; (
    SELECT st_buffer(geom, 1) AS myarea
    FROM edges WHERE id = 6)$$,
  7, 8);
 seq | path_seq | start_vid | end_vid | node | edge | cost | agg_cost
-----+----------+-----------+---------+------+------+------+----------
   1 |        1 |         7 |       8 |    7 |   10 |    1 |        0
   2 |        2 |         7 |       8 |    8 |   -1 |    0 |        1
(2 rows)

</pre></div>
</div>
</section>
</section>
<section id="how-to-contribute">
<h2><a class="toc-backref" href="#id48" role="doc-backlink">Hur du bidrar</a><a class="headerlink" href="#how-to-contribute" title="Link to this heading">¶</a></h2>
<p class="rubric">Wiki</p>
<ul class="simple">
<li><p>Redigera en befintlig sida i <a class="reference external" href="https://github.com/pgRouting/pgrouting/wiki">pgRouting Wiki</a>.</p></li>
<li><p>Eller skapa en ny Wiki-sida</p>
<ul>
<li><p>Skapa en sida på <a class="reference external" href="https://github.com/pgRouting/pgrouting/wiki">pgRouting Wiki</a></p></li>
<li><p>Ge titeln ett lämpligt namn</p></li>
</ul>
</li>
<li><p>exempel &lt;<a class="reference external" href="https://github.com/pgRouting/pgrouting/wiki/How-to:-Handle-parallel-edges-(KSP)">https://github.com/pgRouting/pgrouting/wiki/How-to:-Handle-parallel-edges-(KSP)</a>&gt;`__</p></li>
</ul>
<p class="rubric">Lägga till funktionalitet i pgRouting</p>
<p>Se dokumentationen för utvecklare &lt;<a class="reference external" href="https://docs.pgrouting.org/doxy/2.4/index.html">https://docs.pgrouting.org/doxy/2.4/index.html</a>&gt;`__</p>
</section>
<section id="see-also">
<h2><a class="toc-backref" href="#id49" role="doc-backlink">Se även</a><a class="headerlink" href="#see-also" title="Link to this heading">¶</a></h2>
<p class="rubric">Index och tabeller</p>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Söksida</span></a></p></li>
</ul>
</section>
</section>


        </div>
          
    </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright pgRouting Contributors - Version v4.1.<br/>
      Senast uppdaterad jan. 08, 2026.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 7.2.6.<br/>
    </p>
  </div>
</footer>
  </body>
</html>