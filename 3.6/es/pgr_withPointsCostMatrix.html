

<!DOCTYPE html>

<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>pgr_withPointsCostMatrix - propuesto &#8212; pgRouting Manual (3.6-dev)</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/page_history.js"></script>
    <script src="_static/translations.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="icon" href="_static/favicon.ico"/>
    <link rel="index" title="Índice" href="genindex.html" />
    <link rel="search" title="Búsqueda" href="search.html" />
    <link rel="next" title="pgr_withPointsKSP - Propuesto" href="pgr_withPointsKSP.html" />
    <link rel="prev" title="pgr_withPointsCost - Propuesto" href="pgr_withPointsCost.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="_static/js/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="_static/js/jquery-fix.js"></script>
<script type="text/javascript" src="_static/bootstrap-2.3.2/js/bootstrap.min.js"></script>
<script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>

  </head><body>

  <div id="navbar" class="navbar navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>

        <a class="brand" href="index.html">
          pgRouting</a>
        <span class="navbar-text pull-left"><b>v3.6.0-dev</b></span>

        <div class="nav-collapse">
          <ul class="nav">
            <li class="divider-vertical"></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="pgRouting-introduction.html">Introducción</a></li>
<li class="toctree-l1"><a class="reference internal" href="pgRouting-installation.html">Instalación</a></li>
<li class="toctree-l1"><a class="reference internal" href="support.html">Soporte</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="sampledata.html">Datos Muestra</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="pgRouting-concepts.html">Conceptos de pgRouting</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="routingFunctions.html">Familias de Funciones</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="proposed.html">Funciones propuestas</a></li>
<li class="toctree-l1"><a class="reference internal" href="experimental.html">Funciones Experimentales</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="release_notes.html">Notas de versión</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="migration.html">Guía de migración</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#"><code class="docutils literal notranslate"><span class="pre">pgr_withPointsCostMatrix</span></code> - propuesto</a><ul>
<li><a class="reference internal" href="#description">Descripción</a></li>
<li><a class="reference internal" href="#signatures">Firmas</a></li>
<li><a class="reference internal" href="#parameters">Parámetros</a><ul>
<li><a class="reference internal" href="#optional-parameters">Parámetros opcionales</a></li>
<li><a class="reference internal" href="#with-points-optional-parameters">Parámetros opcionales para Con puntos</a></li>
</ul>
</li>
<li><a class="reference internal" href="#inner-queries">Consultas Internas</a><ul>
<li><a class="reference internal" href="#edges-sql">SQL aristas</a></li>
<li><a class="reference internal" href="#points-sql">SQL de puntos</a></li>
</ul>
</li>
<li><a class="reference internal" href="#result-columns">Columnas de Resultados</a></li>
<li><a class="reference internal" href="#additional-examples">Ejemplos Adicionales</a><ul>
<li><a class="reference internal" href="#use-pgr-findcloseedges-in-the-points-sql">Usar <span class="xref std std-doc">pgr_findCloseEdges</span> en el SQL de puntos.</a></li>
<li><a class="reference internal" href="#use-with-pgr-tsp">Usar con <span class="xref std std-doc">pgr_TSP</span>.</a></li>
</ul>
</li>
<li><a class="reference internal" href="#see-also">Ver también</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="pgr_withPointsCost.html" title="Previous Chapter: pgr_withPointsCost - Propuesto"><span class="icon-chevron-left visible-tablet"></span><span class="hidden-sm hidden-tablet">&laquo; pgr_withPoint...</span>
    </a>
  </li>
  <li>
    <a href="pgr_withPointsKSP.html" title="Next Chapter: pgr_withPointsKSP - Propuesto"><span class="icon-chevron-right visible-tablet"></span><span class="hidden-sm hidden-tablet">pgr_withPoint... &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
      </div>
    </div>
  </div>

<div class="container">
    <div class="row">
        <div class="body span12 content" role="main">
            <script> document.write(get_history('pgr_withPointsCostMatrix','es'));  </script>
            
  <div class="line-block">
<div class="line"><br /></div>
</div>
<section id="pgr-withpointscostmatrix-proposed">
<h1><code class="docutils literal notranslate"><span class="pre">pgr_withPointsCostMatrix</span></code> - propuesto<a class="headerlink" href="#pgr-withpointscostmatrix-proposed" title="Enlace permanente a este encabezado">¶</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">pgr_withPointsCostMatrix</span></code> - Calcula una matriz de costos usando <a class="reference internal" href="pgr_withPoints.html"><span class="doc">pgr_withPoints - Propuesto</span></a>.</p>
<div class="admonition warning">
<p class="admonition-title">Advertencia</p>
<p>Funciones propuestas para la próxima versión mayor.</p>
<ul class="simple">
<li><p>No están oficialmente en la versión actual.</p></li>
<li><p>Es probable que oficialmente formen parte del próximo lanzamiento:</p>
<ul>
<li><p>Las funciones hacen uso de ENTEROS y FLOTANTES</p></li>
<li><p>Probablemente el nombre no cambie. (Pero todavía puede)</p></li>
<li><p>Es posible que la firma no cambie. (Pero todavía puede)</p></li>
<li><p>Probablemente la funcionalidad no cambie. (Pero todavía puede)</p></li>
<li><p>Se han hecho pruebas con pgTap. Pero tal vez se necesiten más.</p></li>
<li><p>Es posible que la documentación necesite un refinamiento.</p></li>
</ul>
</li>
</ul>
</div>
<figure class="align-default" id="id1">
<a class="reference external image-reference" href="https://www.boost.org/libs/graph/doc/table_of_contents.html"><img alt="_images/boost-inside.jpeg" src="_images/boost-inside.jpeg" /></a>
<figcaption>
<p><span class="caption-text">Adentro: Boost Graph</span><a class="headerlink" href="#id1" title="Enlace permanente a esta imagen">¶</a></p>
</figcaption>
</figure>
<p class="rubric">Disponibilidad</p>
<ul class="simple">
<li><p>Version 2.2.0</p>
<ul>
<li><p>Nueva función <strong>propuesta</strong></p></li>
</ul>
</li>
</ul>
<section id="description">
<h2>Descripción<a class="headerlink" href="#description" title="Enlace permanente a este encabezado">¶</a></h2>
<p>Utilizando el algoritmo Dijkstra, calcula y devuelve una matriz de costes.</p>
<p>Algoritmo de Dijkstra, concebido por el informático holandés Edsger Dijkstra en 1956. Es un algoritmo de búsqueda en grafos que resuelve el problema de ruta más corta para un grafo con costos de aristas no negativos, produciendo la ruta más corta desde un vértice inicial a un vértice final . Esta implementación se puede utilizar con un grafos dirigidos y no dirigidos.</p>
<p>Las características principales son:</p>
<ul class="simple">
<li><p>Se puede utilizar como entrada para <a class="reference internal" href="pgr_TSP.html"><span class="doc">pgr_TSP</span></a>.</p>
<ul>
<li><p>Usar directamente cuando la matriz resultante es simétrica y no hay valor <span class="math notranslate nohighlight">\(\infty\)</span>.</p></li>
<li><p>Es responsabilidad dels usuario hacer que la matriz sea simétrica.</p>
<ul>
<li><p>Mediante el uso de la media geométrica o armónica de los valores no simétricos.</p></li>
<li><p>Mediante el uso de max o min, los valores no simétricos.</p></li>
<li><p>Estableciendo el triángulo superior para que sea la imagen reflejada del triángulo inferior.</p></li>
<li><p>Estableciendo el triángulo inferior para que sea la imagen reflejada del triángulo superior.</p></li>
</ul>
</li>
<li><p>También es responsabilidad de los usuarios para fijar un valor <span class="math notranslate nohighlight">\(\infty\)</span>.</p></li>
</ul>
</li>
<li><p>Cada función funciona como parte de la familia a la que pertenece.</p></li>
<li><p>No devuelve una ruta.</p></li>
<li><p>Devuelve la suma de los costos de la ruta más corta para la combinación de pares de nodos en el grafo.</p></li>
<li><p>El proceso se realiza sólo en aristas con costos positivos.</p></li>
<li><p>Los valores se devuelven cuando hay una ruta.</p>
<ul>
<li><p>Cuando el vértice inicial y el vértice final son iguales, no hay camino.</p>
<ul>
<li><p>El costo agregado de los valores no incluídos <cite>(v, v)</cite> es <cite>0</cite>.</p></li>
</ul>
</li>
<li><p>Cuando el vértice inicial y el vértice final son diferentes y no hay ruta.</p>
<ul>
<li><p>El costo agregado de los valores no incluídos <code class="docutils literal notranslate"><span class="pre">(u,</span> <span class="pre">v)</span></code> es :math: <cite>infty</cite>.</p></li>
</ul>
</li>
</ul>
</li>
<li><p>Sea el caso, los valores devueltos se almacenan en una tabla:</p>
<ul>
<li><p>El índice único es el par: <code class="docutils literal notranslate"><span class="pre">(start_vid,</span> <span class="pre">end_vid)</span></code>.</p></li>
</ul>
</li>
<li><p>Dependiendo de la función y sus parámetros, los resultados pueden ser simétricos.</p>
<ul>
<li><p>El costo agregado de <cite>(u, v)</cite> es el mismo que para <cite>(v, u)</cite>.</p></li>
</ul>
</li>
<li><p>Se omite cualquier valor duplicado en las <strong>salidas</strong>.</p></li>
<li><p>Los valores regresados se ordenan:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">start_vid</span></code> ascendente</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">end_vid</span></code> ascendente</p></li>
</ul>
</li>
</ul>
</section>
<section id="signatures">
<span id="index-0"></span><h2>Firmas<a class="headerlink" href="#signatures" title="Enlace permanente a este encabezado">¶</a></h2>
<p class="rubric">Resumen</p>
<div class="signatures admonition">
<p class="admonition-title"></p>
<div class="line-block">
<div class="line">pgr_withPointsCost(<a class="reference internal" href="#points-sql">SQL de aristas</a>, <a class="reference internal" href="#points-sql">SQL de puntos</a>, <strong>salida</strong>, <strong>destinos</strong>, [<strong>opciones</strong>])</div>
<div class="line"><strong>opciones:</strong> <code class="docutils literal notranslate"><span class="pre">[directed,</span> <span class="pre">driving_side]</span></code></div>
</div>
<div class="line-block">
<div class="line">Regresa conjunto de <code class="docutils literal notranslate"><span class="pre">(start_vid,</span> <span class="pre">end_vid,</span> <span class="pre">agg_cost)</span></code></div>
<div class="line">OR EMPTY SET</div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>No hay identificador de <strong>details</strong>, a diferencia de los otros miembros de la familia de funciones withPoints.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Ejemplo<span class="colon">:</span></dt>
<dd class="field-odd"><p>Matriz de costos para puntos <span class="math notranslate nohighlight">\(\{1, 6\}\)</span> y vértices <span class="math notranslate nohighlight">\(\{10, 11\}\)</span> en un grafo <strong>no dirigido</strong></p>
</dd>
</dl>
<ul class="simple">
<li><p>Devolver una matriz de costes <strong>simétrica</strong></p></li>
<li><p>Uso del valor predeterminado <code class="docutils literal notranslate"><span class="pre">side</span></code> en la consulta <strong>SQL de puntos</strong></p></li>
<li><p>Usando el valor predeterminado <code class="docutils literal notranslate"><span class="pre">driving_side</span></code></p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">pgr_withPointsCostMatrix</span><span class="p">(</span>
  <span class="s1">&#39;SELECT id, source, target, cost, reverse_cost FROM edges ORDER BY id&#39;</span><span class="p">,</span>
  <span class="s1">&#39;SELECT pid, edge_id, fraction from pointsOfInterest&#39;</span><span class="p">,</span>
  <span class="n">array</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="o">-</span><span class="mi">6</span><span class="p">],</span> <span class="n">directed</span> <span class="o">:=</span> <span class="n">false</span><span class="p">);</span>
 <span class="n">start_vid</span> <span class="o">|</span> <span class="n">end_vid</span> <span class="o">|</span> <span class="n">agg_cost</span>
<span class="o">-----------+---------+----------</span>
        <span class="o">-</span><span class="mi">6</span> <span class="o">|</span>      <span class="o">-</span><span class="mi">1</span> <span class="o">|</span>      <span class="mf">1.3</span>
        <span class="o">-</span><span class="mi">6</span> <span class="o">|</span>      <span class="mi">10</span> <span class="o">|</span>      <span class="mf">1.7</span>
        <span class="o">-</span><span class="mi">6</span> <span class="o">|</span>      <span class="mi">11</span> <span class="o">|</span>      <span class="mf">1.3</span>
        <span class="o">-</span><span class="mi">1</span> <span class="o">|</span>      <span class="o">-</span><span class="mi">6</span> <span class="o">|</span>      <span class="mf">1.3</span>
        <span class="o">-</span><span class="mi">1</span> <span class="o">|</span>      <span class="mi">10</span> <span class="o">|</span>      <span class="mf">1.6</span>
        <span class="o">-</span><span class="mi">1</span> <span class="o">|</span>      <span class="mi">11</span> <span class="o">|</span>      <span class="mf">2.6</span>
        <span class="mi">10</span> <span class="o">|</span>      <span class="o">-</span><span class="mi">6</span> <span class="o">|</span>      <span class="mf">1.7</span>
        <span class="mi">10</span> <span class="o">|</span>      <span class="o">-</span><span class="mi">1</span> <span class="o">|</span>      <span class="mf">1.6</span>
        <span class="mi">10</span> <span class="o">|</span>      <span class="mi">11</span> <span class="o">|</span>        <span class="mi">1</span>
        <span class="mi">11</span> <span class="o">|</span>      <span class="o">-</span><span class="mi">6</span> <span class="o">|</span>      <span class="mf">1.3</span>
        <span class="mi">11</span> <span class="o">|</span>      <span class="o">-</span><span class="mi">1</span> <span class="o">|</span>      <span class="mf">2.6</span>
        <span class="mi">11</span> <span class="o">|</span>      <span class="mi">10</span> <span class="o">|</span>        <span class="mi">1</span>
<span class="p">(</span><span class="mi">12</span> <span class="n">rows</span><span class="p">)</span>

</pre></div>
</div>
</section>
<section id="parameters">
<h2>Parámetros<a class="headerlink" href="#parameters" title="Enlace permanente a este encabezado">¶</a></h2>
<table class="docutils align-default" style="width: 81">
<thead>
<tr class="row-odd"><th class="head"><p>Columna</p></th>
<th class="head"><p>Tipo</p></th>
<th class="head"><p>Descripción</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="#edges-sql">SQL de aristas</a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">TEXT</span></code></p></td>
<td><p><a class="reference internal" href="#edges-sql">SQL de aristas</a> como se describe a continuación</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#points-sql">SQL de puntos</a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">TEXT</span></code></p></td>
<td><p><a class="reference internal" href="#points-sql">SQL de puntos</a> como se describe abajo</p></td>
</tr>
<tr class="row-even"><td><p><strong>salidas</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ARRAY[BIGINT]</span></code></p></td>
<td><p>Arreglo de identificadores de vértices iniciales.</p></td>
</tr>
</tbody>
</table>
<section id="optional-parameters">
<h3>Parámetros opcionales<a class="headerlink" href="#optional-parameters" title="Enlace permanente a este encabezado">¶</a></h3>
<table class="docutils align-default" style="width: 81">
<thead>
<tr class="row-odd"><th class="head"><p>Columna</p></th>
<th class="head"><p>Tipo</p></th>
<th class="head"><p>x Defecto</p></th>
<th class="head"><p>Descripción</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">directed</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BOOLEAN</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
<td><ul class="simple">
<li><p>Cuando <code class="docutils literal notranslate"><span class="pre">true</span></code> el gráfo se considera <cite>Dirigido</cite></p></li>
<li><p>Cuando <code class="docutils literal notranslate"><span class="pre">false</span></code> el gráfo se considera <cite>No Dirigido</cite>.</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="with-points-optional-parameters">
<h3>Parámetros opcionales para Con puntos<a class="headerlink" href="#with-points-optional-parameters" title="Enlace permanente a este encabezado">¶</a></h3>
<table class="docutils align-default" style="width: 35">
<thead>
<tr class="row-odd"><th class="head"><p>Parámetro</p></th>
<th class="head"><p>Tipo</p></th>
<th class="head"><p>x Defecto</p></th>
<th class="head"><p>Descripción</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">driving_side</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">CHAR</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">b</span></code></p></td>
<td><p>Valor en [<code class="docutils literal notranslate"><span class="pre">r</span></code>, <code class="docutils literal notranslate"><span class="pre">l</span></code>, <code class="docutils literal notranslate"><span class="pre">b</span></code>] indica si el lado de manejo es:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">r</span></code> para manejo del lado derecho.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">l</span></code> para lado de manejo izquierdo.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">b</span></code> for ambos.</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="inner-queries">
<h2>Consultas Internas<a class="headerlink" href="#inner-queries" title="Enlace permanente a este encabezado">¶</a></h2>
<section id="edges-sql">
<h3>SQL aristas<a class="headerlink" href="#edges-sql" title="Enlace permanente a este encabezado">¶</a></h3>
<table class="docutils align-default" style="width: 81">
<colgroup>
<col style="width: 17.7%" />
<col style="width: 17.7%" />
<col style="width: 8.9%" />
<col style="width: 55.7%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Columna</p></th>
<th class="head"><p>Tipo</p></th>
<th class="head"><p>x Defecto</p></th>
<th class="head"><p>Descripción</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">id</span></code></p></td>
<td><p><strong>ENTEROS</strong></p></td>
<td></td>
<td><p>Identificador de la arista.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">source</span></code></p></td>
<td><p><strong>ENTEROS</strong></p></td>
<td></td>
<td><p>Identificador del primer vértice de la arista.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">target</span></code></p></td>
<td><p><strong>ENTEROS</strong></p></td>
<td></td>
<td><p>Identificador del segundo vértice de la arista.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">cost</span></code></p></td>
<td><p><strong>FLOTANTES</strong></p></td>
<td></td>
<td><p>Peso de la arista (<code class="docutils literal notranslate"><span class="pre">source</span></code>, <code class="docutils literal notranslate"><span class="pre">target</span></code>)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">reverse_cost</span></code></p></td>
<td><p><strong>FLOTANTES</strong></p></td>
<td><p>-1</p></td>
<td><p>Peso de la arista (<code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code>)</p>
<ul class="simple">
<li><p>Cuando negativo: la arista (<code class="docutils literal notranslate"><span class="pre">target</span></code>, <code class="docutils literal notranslate"><span class="pre">source</span></code>) no existe, por lo tanto no es parte del grafo.</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Donde:</p>
<dl class="field-list simple">
<dt class="field-odd">ENTEROS<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p>
</dd>
<dt class="field-even">FLOTANTES<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code>, <code class="docutils literal notranslate"><span class="pre">REAL</span></code>, <code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p>
</dd>
</dl>
</section>
<section id="points-sql">
<h3>SQL de puntos<a class="headerlink" href="#points-sql" title="Enlace permanente a este encabezado">¶</a></h3>
<table class="docutils align-default" style="width: 81">
<colgroup>
<col style="width: 15.6%" />
<col style="width: 18.2%" />
<col style="width: 9.1%" />
<col style="width: 57.1%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parámetro</p></th>
<th class="head"><p>Tipo</p></th>
<th class="head"><p>x Defecto</p></th>
<th class="head"><p>Descripción</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">pid</span></code></p></td>
<td><p><strong>ENTEROS</strong></p></td>
<td><p><strong>valor</strong></p></td>
<td><p>Identificador del punto.</p>
<ul class="simple">
<li><p>Use con un valor positivo, dado que internamente se convertirá a un valor negativo</p></li>
<li><p>Si columna esta presente, no puede ser NULL.</p></li>
<li><p>Si columna no esta presente, un <strong>valor</strong> secuencial negativo se otorgará automáticamente.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">edge_id</span></code></p></td>
<td><p><strong>ENTEROS</strong></p></td>
<td></td>
<td><p>Identificador de la arista «más cercana» al punto.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">fraction</span></code></p></td>
<td><p><strong>FLOTANTES</strong></p></td>
<td></td>
<td><p>El valor en &lt;0,1&gt; que indica la posición relativa desde el primer punto de la arista.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">side</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">CHAR</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">b</span></code></p></td>
<td><p>Valor en [<code class="docutils literal notranslate"><span class="pre">b</span></code>, <code class="docutils literal notranslate"><span class="pre">r</span></code>, <code class="docutils literal notranslate"><span class="pre">l</span></code>, <code class="docutils literal notranslate"><span class="pre">NULL</span></code>] que indica si el punto es:</p>
<ul class="simple">
<li><p>A la derecha <code class="docutils literal notranslate"><span class="pre">r</span></code>,</p></li>
<li><p>A la izquierda <cite>l</cite>,</p></li>
<li><p>En ambos lados <code class="docutils literal notranslate"><span class="pre">b</span></code>, <code class="docutils literal notranslate"><span class="pre">NULL</span></code></p></li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Donde:</p>
<dl class="field-list simple">
<dt class="field-odd">ENTEROS<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p>
</dd>
<dt class="field-even">FLOTANTES<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code>, <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code>, <code class="docutils literal notranslate"><span class="pre">BIGINT</span></code>, <code class="docutils literal notranslate"><span class="pre">REAL</span></code>, <code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p>
</dd>
</dl>
</section>
</section>
<section id="result-columns">
<h2>Columnas de Resultados<a class="headerlink" href="#result-columns" title="Enlace permanente a este encabezado">¶</a></h2>
<p>Conjunto de <code class="docutils literal notranslate"><span class="pre">(start_vid,</span> <span class="pre">end_vid,</span> <span class="pre">agg_cost)</span></code></p>
<table class="docutils align-default" style="width: 81">
<colgroup>
<col style="width: 14.0%" />
<col style="width: 16.3%" />
<col style="width: 69.8%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Columna</p></th>
<th class="head"><p>Tipo</p></th>
<th class="head"><p>Descripción</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">start_vid</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identificador del vértice de salida.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">end_vid</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></td>
<td><p>Identificador del vértice destino.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">agg_cost</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></p></td>
<td><p>Costo afregado desde <code class="docutils literal notranslate"><span class="pre">start_vid</span></code> hasta <code class="docutils literal notranslate"><span class="pre">end_vid</span></code>.</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Cuando las columnas del vértice inicial o del destino continen valores negativos, el identificador es para un Punto.</p>
</div>
</section>
<section id="additional-examples">
<h2>Ejemplos Adicionales<a class="headerlink" href="#additional-examples" title="Enlace permanente a este encabezado">¶</a></h2>
<nav class="contents local" id="contenido">
<ul class="simple">
<li><p><a class="reference internal" href="#use-pgr-findcloseedges-in-the-points-sql" id="id2">Usar <a class="reference internal" href="pgr_findCloseEdges.html"><span class="doc">pgr_findCloseEdges</span></a> en el SQL de puntos.</a></p></li>
<li><p><a class="reference internal" href="#use-with-pgr-tsp" id="id3">Usar con <a class="reference internal" href="pgr_TSP.html"><span class="doc">pgr_TSP</span></a>.</a></p></li>
</ul>
</nav>
<section id="use-pgr-findcloseedges-in-the-points-sql">
<h3>Usar <a class="reference internal" href="pgr_findCloseEdges.html"><span class="doc">pgr_findCloseEdges</span></a> en el <a class="reference internal" href="#points-sql">SQL de puntos</a>.<a class="headerlink" href="#use-pgr-findcloseedges-in-the-points-sql" title="Enlace permanente a este encabezado">¶</a></h3>
<p>Encontrar la matriz de costos de las rutas desde el vértice <span class="math notranslate nohighlight">\(1\)</span> y las dos ubicaciones más cercanas en el grafo al punto <cite>(2.9, 1.8)</cite>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>SELECT * FROM pgr_withPointsCostMatrix(
  $e$ SELECT * FROM edges $e$,
  $p$ SELECT edge_id, round(fraction::numeric, 2) AS fraction, side
      FROM pgr_findCloseEdges(
        $$SELECT id, geom FROM edges$$,
        (SELECT ST_POINT(2.9, 1.8)),
        0.5, cap =&gt; 2)
  $p$,
  ARRAY[5, 10, -1, -2]);
 start_vid | end_vid | agg_cost
-----------+---------+----------
        -2 |      -1 |      3.9
        -2 |       5 |      2.9
        -2 |      10 |      3.1
        -1 |      -2 |      0.3
        -1 |       5 |      3.2
        -1 |      10 |      3.2
         5 |      -2 |      2.9
         5 |      -1 |      6.8
         5 |      10 |        6
        10 |      -2 |      1.1
        10 |      -1 |      0.8
        10 |       5 |        2
(12 rows)

</pre></div>
</div>
<ul class="simple">
<li><p>Punto <span class="math notranslate nohighlight">\(-1\)</span> corresponde a la arista más cercana al punto <cite>(2.9, 1.8)</cite>.</p></li>
<li><p>Punto <span class="math notranslate nohighlight">\(-2\)</span> corresponde a la segunda arista más cercana al punto <cite>(2.9, 1.8)</cite>.</p></li>
</ul>
</section>
<section id="use-with-pgr-tsp">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">Usar con <a class="reference internal" href="pgr_TSP.html"><span class="doc">pgr_TSP</span></a>.</a><a class="headerlink" href="#use-with-pgr-tsp" title="Enlace permanente a este encabezado">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>SELECT * FROM pgr_TSP(
  $$
  SELECT * FROM pgr_withPointsCostMatrix(
    &#39;SELECT id, source, target, cost, reverse_cost FROM edges ORDER BY id&#39;,
    &#39;SELECT pid, edge_id, fraction from pointsOfInterest&#39;,
    array[-1, 10, 11, -6], directed := false);
  $$
);
NOTICE:  pgr_TSP no longer solving with simulated annaeling
HINT:  Ignoring annaeling parameters
 seq | node | cost | agg_cost
-----+------+------+----------
   1 |   -6 |    0 |        0
   2 |   -1 |  1.3 |      1.3
   3 |   10 |  1.6 |      2.9
   4 |   11 |    1 |      3.9
   5 |   -6 |  1.3 |      5.2
(5 rows)

</pre></div>
</div>
</section>
</section>
<section id="see-also">
<h2>Ver también<a class="headerlink" href="#see-also" title="Enlace permanente a este encabezado">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="withPoints-family.html"><span class="doc">withPoints - Familia de funciones</span></a></p></li>
<li><p><a class="reference internal" href="costMatrix-category.html"><span class="doc">Cost Matrix - Categoría</span></a></p></li>
<li><p><a class="reference internal" href="TSP-family.html"><span class="doc">Vendedor Viajante - Familia de funciones</span></a></p></li>
<li><p><a class="reference internal" href="sampledata.html"><span class="doc">Datos Muestra</span></a></p></li>
</ul>
<p class="rubric">Índices y tablas</p>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Índice</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Página de Búsqueda</span></a></p></li>
</ul>
</section>
</section>


        </div>
          
    </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright pgRouting Contributors - Version v3.6.0-dev.<br/>
      Actualizado por última vez en jul 31, 2023.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 6.1.3.<br/>
    </p>
  </div>
</footer>
  </body>
</html>