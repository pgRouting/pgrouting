

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>pgr_analyzeOneway &mdash; pgRouting Manual (2.0.0)</title>
    
    <link rel="stylesheet" href="../../../../_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/print.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../../',
        VERSION:     '2.0.0 (0a53b89 master)',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../../_static/translations.js"></script>
    <script type="text/javascript" src="../../../../_static/theme_extras.js"></script>
    <link rel="shortcut icon" href="../../../../_static/favicon.ico"/>
    <link rel="top" title="pgRouting Manual (2.0.0)" href="../../../../index.html" />
    <link rel="up" title="Funciones Topológicas" href="index.html" />
    <link rel="next" title="pgr_nodeNetwork" href="node_network.html" />
    <link rel="prev" title="pgr_analyzeGraph" href="analyze_graph.html" /> 
  </head>
  <body>
      <div class="header"><img class="rightlogo" src="../../../../_static/pgrouting.png" alt="Logo"/><h1 class="heading"><a href="../../../../index.html">
          <span>pgRouting Manual (2.0.0)</span></a></h1>
        <h2 class="heading"><span>pgr_analyzeOneway</span></h2>
      </div>
      <div class="topnav">
      
        <p>
        «&#160;&#160;<a href="analyze_graph.html">pgr_analyzeGraph</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../../../../doc/index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="node_network.html">pgr_nodeNetwork</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
        
        
  <div class="section" id="pgr-analyzeoneway">
<span id="pgr-analyze-oneway"></span><h1>pgr_analyzeOneway<a class="headerlink" href="#pgr-analyzeoneway" title="Enlazar permanentemente con este título">¶</a></h1>
<div class="section" id="name">
<span id="index-0"></span><h2>Nombre<a class="headerlink" href="#name" title="Enlazar permanentemente con este título">¶</a></h2>
<p><tt class="docutils literal"><span class="pre">pgr_analyzeOneway</span></tt> — Analizar calles unidireccionales e identifica segmentos invertidos</p>
</div>
<div class="section" id="synopsis">
<h2>Sinopsis<a class="headerlink" href="#synopsis" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Esta función analiza las calles unidireccionales en un gráfico e identifica cualquier segmentos invertido.</p>
<div class="highlight-sql"><div class="highlight"><pre><span class="nb">text</span> <span class="n">pgr_analyzeOneway</span><span class="p">(</span><span class="n">geom_table</span> <span class="nb">text</span><span class="p">,</span>
                       <span class="nb">text</span><span class="p">[]</span> <span class="n">s_in_rules</span><span class="p">,</span> <span class="nb">text</span><span class="p">[]</span> <span class="n">s_out_rules</span><span class="p">,</span>
                       <span class="nb">text</span><span class="p">[]</span> <span class="n">t_in_rules</span><span class="p">,</span> <span class="nb">text</span><span class="p">[]</span> <span class="n">t_out_rules</span><span class="p">,</span>
                       <span class="nb">text</span> <span class="n">oneway</span><span class="o">=</span><span class="s1">&#39;oneway&#39;</span><span class="p">,</span> <span class="nb">text</span> <span class="k">source</span><span class="o">=</span><span class="s1">&#39;source&#39;</span><span class="p">,</span> <span class="nb">text</span> <span class="n">target</span><span class="o">=</span><span class="s1">&#39;target&#39;</span><span class="p">,</span>
                       <span class="nb">boolean</span> <span class="n">two_way_if_null</span><span class="o">=</span><span class="k">true</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="description">
<h2>Descripción<a class="headerlink" href="#description" title="Enlazar permanentemente con este título">¶</a></h2>
<p>El análisis de segmentos que tienen un solo sentido es bastante simple, pero a la vez  ser una herramienta poderosa para identificar algunos problemas potenciales que son creados al establecer la dirección de un segmento de la manera equivocada. Un nodo es un <cite>source</cite> si tiene bordes que salen de ese nodo y no hay bordes que entren a  ese nodo. Por el contrario, un nodo es un`sink` si todos los bordes entran al nodo pero ninguno sale de ese nodo. Para un nodo <cite>source</cite> es lógicamente imposible existir porque ningún vehículo puede salir del nodo o si algún vehículo logró entrar en el nodo. Asimismo, si tuvieras un nodo <cite>sink</cite> tienes un número infinito de vehículos que se van  acumulando en este nodo porque no pueden salir de el.</p>
<p>Así que ¿por qué nos importa si no es factibles? Si la dirección de un borde se revirtió por error podríamos generar exactamente en estas condiciones. Pensar en una carretera dividida y en el carril que va al norte un segmento o varios segmentos fueron introducidos al revés, o tal vez esto sucedió en una glorieta. El resultado sería potencialmente un nodo <cite>source</cite> y/o a <cite>sink</cite> node.</p>
<p>Así contando el número de aristas entrantes y salientes de cada nodo podemos identificar los nodos <cite>source</cite> y <cite>sink</cite>, así que usted puede mirar esas áreas de su red para hacer reparaciones o informar del problema a su proveedor de datos.</p>
<p class="rubric">Requisitos previos</p>
<p>La tabla de bordes debe ser analizada debe contener una columna de origen y una columna de destino llena con los identificadores de los vértices de los segmentos y los vértices correspondientes de la tabla &lt;edge_table&gt;_vertices_pgr que almacena la información de los vértices.</p>
<blockquote>
<div><ul class="simple">
<li>usar <a class="reference internal" href="create_vert_table.html#pgr-create-vert-table"><em>pgr_createVerticesTable</em></a> para crear la tabla de vértices.</li>
<li>Usar <a class="reference internal" href="create_topology.html#pgr-create-topology"><em>pgr_createTopology</em></a> para crear la topología y la tabla de vértices.</li>
</ul>
</div></blockquote>
<p class="rubric">Parámetros</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">edge_table:</th><td class="field-body"><tt class="docutils literal"><span class="pre">text</span></tt> La tabla de la red. (puede contener el nombre del esquema)</td>
</tr>
<tr class="field-even field"><th class="field-name">s_in_rules:</th><td class="field-body"><tt class="docutils literal"><span class="pre">text[]</span></tt> reglas de <strong>entrada</strong> del nodo inicial</td>
</tr>
<tr class="field-odd field"><th class="field-name">s_out_rules:</th><td class="field-body"><tt class="docutils literal"><span class="pre">text[]</span></tt> reglas de <strong>salida</strong> del nodo inicial</td>
</tr>
<tr class="field-even field"><th class="field-name">t_in_rules:</th><td class="field-body"><tt class="docutils literal"><span class="pre">text[]</span></tt> reglas de <strong>entrada</strong> del nodo final</td>
</tr>
<tr class="field-odd field"><th class="field-name">t_out_rules:</th><td class="field-body"><tt class="docutils literal"><span class="pre">text[]</span></tt> reglas de <strong>salida</strong> del nodo final</td>
</tr>
<tr class="field-even field"><th class="field-name">oneway:</th><td class="field-body"><tt class="docutils literal"><span class="pre">text</span></tt> El nombre de la columna del sentido. El valor por defecto es <tt class="docutils literal"><span class="pre">oneway</span></tt>.</td>
</tr>
<tr class="field-odd field"><th class="field-name">source:</th><td class="field-body"><tt class="docutils literal"><span class="pre">text</span></tt> El nombre de la columna del nodo de salida del segmento. El valor por defecto es``source``.</td>
</tr>
<tr class="field-even field"><th class="field-name">target:</th><td class="field-body"><tt class="docutils literal"><span class="pre">text</span></tt>  El nombre de la columna del nodo de llegada del segmneto.  El valor por defecto es <tt class="docutils literal"><span class="pre">target</span></tt>.</td>
</tr>
<tr class="field-odd field"><th class="field-name" colspan="2">two_way_if_null:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><tt class="docutils literal"><span class="pre">boolean</span></tt>  bandera para tratar los valores NULL de oneway como bidireccional.  Valor predeterminado es``true``.</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Se recomienda enormemente que se utilice la notación con nombre. Ver <a class="reference internal" href="create_vert_table.html#pgr-create-vert-table"><em>pgr_createVerticesTable</em></a> o <a class="reference internal" href="create_topology.html#pgr-create-topology"><em>pgr_createTopology</em></a> para ejemlos.</p>
</div>
<p>La función devuelve:</p>
<blockquote>
<div><ul class="simple">
<li><tt class="docutils literal"><span class="pre">OK</span></tt> Cuando el análisis ha terminado.<ul>
<li>Utiliza la tabla de los vértices: &lt;edge_table&gt;_vertices_pgr.</li>
<li>Se llena completamente las columnas de la tabla de vértices <tt class="docutils literal"><span class="pre">ein</span></tt> y <tt class="docutils literal"><span class="pre">eout</span></tt>.</li>
</ul>
</li>
<li><tt class="docutils literal"><span class="pre">FAIL</span></tt> cuando el análisis no se completó debido a un error.<ul>
<li>No se encuentra en la tabla de los vértices.</li>
<li>Una columna de la tabla de red requerida no se encuentra o no es del tipo apropiado.</li>
<li>Los nombres de origen, destino o oneway son las mismos.</li>
</ul>
</li>
</ul>
</div></blockquote>
<p>Las reglas se definen como un conjunto de textos que si encajan con el valor de <tt class="docutils literal"><span class="pre">oneway</span></tt> se contara como <tt class="docutils literal"><span class="pre">true</span></tt> para las condiciones de el origen o destino <strong>in</strong> o <strong>out</strong> .</p>
<p class="rubric">La tabla de vértices</p>
<p>La tabla de los vértices puede crearse con  <a class="reference internal" href="create_vert_table.html#pgr-create-vert-table"><em>pgr_createVerticesTable</em></a> o <a class="reference internal" href="create_topology.html#pgr-create-topology"><em>pgr_createTopology</em></a></p>
<p>La estructura de la tabla de los vértices es:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">id:</th><td class="field-body"><tt class="docutils literal"><span class="pre">bigint</span></tt> identificador del vértice.</td>
</tr>
<tr class="field-even field"><th class="field-name">cnt:</th><td class="field-body"><tt class="docutils literal"><span class="pre">integer</span></tt> número de vértices en la edge_table que hacen referencia a este vértice. Ver <a class="reference internal" href="analyze_graph.html#pgr-analyze-graph"><em>pgr_analyzeGgraph</em></a>.</td>
</tr>
<tr class="field-odd field"><th class="field-name">chk:</th><td class="field-body"><tt class="docutils literal"><span class="pre">integer</span></tt> indicador que el vértice podría tener un problema. Ver <a class="reference internal" href="analyze_graph.html#pgr-analyze-graph"><em>pgr_analyzeGraph</em></a>.</td>
</tr>
<tr class="field-even field"><th class="field-name">ein:</th><td class="field-body"><tt class="docutils literal"><span class="pre">integer</span></tt> número de vértices en la edge_table que hacen referencia a este vértice como entrante.</td>
</tr>
<tr class="field-odd field"><th class="field-name">eout:</th><td class="field-body"><tt class="docutils literal"><span class="pre">integer</span></tt> número de vértices en la edge_table que hacen referencia a este vértice como saliente.</td>
</tr>
<tr class="field-even field"><th class="field-name">the_geom:</th><td class="field-body"><tt class="docutils literal"><span class="pre">geometry</span></tt> Valor de la geometría POINT del vértice.</td>
</tr>
</tbody>
</table>
<p class="rubric">Historia</p>
<ul class="simple">
<li>Nuevo en la versión 2.0.0</li>
</ul>
</div>
<div class="section" id="examples">
<h2>Ejemplos<a class="headerlink" href="#examples" title="Enlazar permanentemente con este título">¶</a></h2>
<div class="highlight-sql"><div class="highlight"><pre><span class="k">SELECT</span> <span class="n">pgr_analyzeOneway</span><span class="p">(</span><span class="s1">&#39;edge_table&#39;</span><span class="p">,</span>
<span class="nb">ARRAY</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;TF&#39;</span><span class="p">],</span>
<span class="nb">ARRAY</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;FT&#39;</span><span class="p">],</span>
<span class="nb">ARRAY</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;FT&#39;</span><span class="p">],</span>
<span class="nb">ARRAY</span><span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;TF&#39;</span><span class="p">],</span>
<span class="n">oneway</span><span class="p">:</span><span class="o">=</span><span class="s1">&#39;dir&#39;</span><span class="p">);</span>
<span class="n">NOTICE</span><span class="p">:</span>  <span class="n">PROCESSING</span><span class="p">:</span>
<span class="n">NOTICE</span><span class="p">:</span>  <span class="n">pgr_analyzeGraph</span><span class="p">(</span><span class="s1">&#39;edge_table&#39;</span><span class="p">,</span><span class="s1">&#39;{&quot;&quot;,B,TF}&#39;</span><span class="p">,</span><span class="s1">&#39;{&quot;&quot;,B,FT}&#39;</span><span class="p">,</span><span class="s1">&#39;{&quot;&quot;,B,FT}&#39;</span><span class="p">,</span><span class="s1">&#39;{&quot;&quot;,B,TF}&#39;</span><span class="p">,</span><span class="s1">&#39;dir&#39;</span><span class="p">,</span><span class="s1">&#39;source&#39;</span><span class="p">,</span><span class="s1">&#39;target&#39;</span><span class="p">,</span><span class="n">t</span><span class="p">)</span>
<span class="n">NOTICE</span><span class="p">:</span>  <span class="n">Analyzing</span> <span class="n">graph</span> <span class="k">for</span> <span class="n">one</span> <span class="n">way</span> <span class="n">street</span> <span class="n">errors</span><span class="p">.</span>
<span class="n">NOTICE</span><span class="p">:</span>  <span class="n">Analysis</span> <span class="mi">25</span><span class="o">%</span> <span class="n">complete</span> <span class="p">...</span>
<span class="n">NOTICE</span><span class="p">:</span>  <span class="n">Analysis</span> <span class="mi">50</span><span class="o">%</span> <span class="n">complete</span> <span class="p">...</span>
<span class="n">NOTICE</span><span class="p">:</span>  <span class="n">Analysis</span> <span class="mi">75</span><span class="o">%</span> <span class="n">complete</span> <span class="p">...</span>
<span class="n">NOTICE</span><span class="p">:</span>  <span class="n">Analysis</span> <span class="mi">100</span><span class="o">%</span> <span class="n">complete</span> <span class="p">...</span>
<span class="n">NOTICE</span><span class="p">:</span>  <span class="k">Found</span> <span class="mi">0</span> <span class="n">potential</span> <span class="n">problems</span> <span class="k">in</span> <span class="n">directionality</span>

<span class="n">pgr_analyzeoneway</span>
<span class="c1">-------------------</span>
<span class="n">OK</span>
<span class="p">(</span><span class="mi">1</span> <span class="k">row</span><span class="p">)</span>
</pre></div>
</div>
<p>La consulta usa la red de ejemplo  <a class="reference internal" href="../../../../doc/src/developer/sampledata.html#sampledata"><em>Datos Muestra</em></a></p>
</div>
<div class="section" id="see-also">
<h2>Véase también<a class="headerlink" href="#see-also" title="Enlazar permanentemente con este título">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="../../../../doc/src/tutorial/topology.html#topology"><em>Topología para Ruteo</em></a> para tener una visión general de una topología de algoritmos de encaminamiento.</li>
<li><a class="reference internal" href="../../../../doc/src/tutorial/analytics.html#analytics"><em>Análisis de gráficas</em></a> para tener una visión general del análisis de un gráfico.</li>
<li><a class="reference internal" href="analyze_graph.html#pgr-analyze-graph"><em>pgr_analyzeGraph</em></a> Para analizar los bordes y vértices de la tabla de bordes.</li>
<li><a class="reference internal" href="create_vert_table.html#pgr-create-vert-table"><em>pgr_createVerticesTable</em></a> para reconstruir la tabla vértices basándose en la información de origen y de destino.</li>
</ul>
</div>
</div>


      </div>
      <div class="bottomnav">
      
        <p>
        «&#160;&#160;<a href="analyze_graph.html">pgr_analyzeGraph</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../../../../doc/index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="node_network.html">pgr_nodeNetwork</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer">
        &copy; Copyright pgRouting Contributors - Version 2.0.0 (0a53b89 master).
      Actualizado por última vez en Sep 24, 2013.
      Creado con <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>