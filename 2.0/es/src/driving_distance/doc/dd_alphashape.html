

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>pgr_alphaShape &mdash; pgRouting Manual (2.0.0)</title>
    
    <link rel="stylesheet" href="../../../_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/print.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '2.0.0 (0a53b89 master)',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
<script src="../../../_static/page_history.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/translations.js"></script>
    <script type="text/javascript" src="../../../_static/theme_extras.js"></script>
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="top" title="pgRouting Manual (2.0.0)" href="../../../index.html" />
    <link rel="up" title="Con la Distancia de Manejo habilitado" href="index.html" />
    <link rel="next" title="pgr_pointsAsPolygon" href="dd_points_as_polygon.html" />
    <link rel="prev" title="pgr_drivingDistance" href="dd_driving_distance.html" /> 
  </head>
  <body>
      <div class="header"><img class="rightlogo" src="../../../_static/pgrouting.png" alt="Logo"/><h1 class="heading"><a href="../../../index.html">
          <span>pgRouting Manual (2.0.0)</span></a></h1>
        <h2 class="heading"><span>pgr_alphaShape</span></h2>
      </div>
      <div class="topnav">
      
        <p>
        «&#160;&#160;<a href="dd_driving_distance.html">pgr_drivingDistance</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../../../doc/index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="dd_points_as_polygon.html">pgr_pointsAsPolygon</a>&#160;&#160;»
        </p>

      </div>
      <div class="content">
 <div class="line"><br/></div> <script> document.write(get_history("pgr_alphaShape","es")); </script>


  <div class="section" id="pgr-alphashape">
<span id="id1"></span><h1>pgr_alphaShape<a class="headerlink" href="#pgr-alphashape" title="Enlazar permanentemente con este título">¶</a></h1>
<div class="section" id="name">
<span id="index-0"></span><h2>Nombre<a class="headerlink" href="#name" title="Enlazar permanentemente con este título">¶</a></h2>
<p><tt class="docutils literal"><span class="pre">pgr_alphashape</span></tt> — Función central para el cálculo de la forma alfa.</p>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Esta función no debe utilizarse directamente. Usar <a class="reference internal" href="dd_driving_distance.html#pgr-driving-distance"><em>pgr_drivingDistance</em></a> en su lugar.</p>
</div>
</div>
<div class="section" id="synopsis">
<h2>Sinopsis<a class="headerlink" href="#synopsis" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Devuelve una tabla con registros (x, y)  que describen los vértices de una figura de alfa.</p>
<div class="highlight-sql"><div class="highlight"><pre><span class="k">table</span><span class="p">()</span> <span class="n">pgr_alphashape</span><span class="p">(</span><span class="nb">text</span> <span class="k">sql</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="description">
<h2>Descripción<a class="headerlink" href="#description" title="Enlazar permanentemente con este título">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">sql:</th><td class="field-body"><p class="first"><tt class="docutils literal"><span class="pre">text</span></tt> una consulta SQL la cual debe proporcionar un conjunto de registros con los siguientes campos:</p>
<div class="highlight-sql"><div class="highlight"><pre><span class="k">SELECT</span> <span class="n">id</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="k">FROM</span> <span class="n">vertex_table</span>
</pre></div>
</div>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">id:</th><td class="field-body"><tt class="docutils literal"><span class="pre">int4</span></tt> Identificador del vértice</td>
</tr>
<tr class="field-even field"><th class="field-name">x:</th><td class="field-body"><tt class="docutils literal"><span class="pre">float8</span></tt> Coordenada x</td>
</tr>
<tr class="field-odd field"><th class="field-name">y:</th><td class="field-body"><tt class="docutils literal"><span class="pre">float8</span></tt> Coordenada y</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
<p>Devuelve un registro de vértices para cada fila:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">x:</th><td class="field-body">Coordenada x</td>
</tr>
<tr class="field-even field"><th class="field-name">y:</th><td class="field-body">Coordenada y</td>
</tr>
</tbody>
</table>
<p class="rubric">Historia</p>
<ul class="simple">
<li>Renombrado en la versión 2.0.0</li>
</ul>
</div>
<div class="section" id="examples">
<h2>Ejemplos<a class="headerlink" href="#examples" title="Enlazar permanentemente con este título">¶</a></h2>
<p>En la código para la forma alfa, no hay forma de controlar el orden de los puntos, por lo que el resultado que obtenga puede variar en el orden del lost vertices. En el ejemplo,  la consulta simple es seguida por una más complejoa que construye un polígono y calcula las áreas de él. Este ultimo resultado debe ser el mismo en su sistema. Le dejamos los detalles de la consulta compleja al lector como un ejercicio, si desean descomponerla en pedazos comprensibles o que simplemente copiarla y pegarla en una ventana SQL para su ejecución.</p>
<div class="highlight-sql"><div class="highlight"><pre><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">pgr_alphashape</span><span class="p">(</span><span class="s1">&#39;SELECT id, x, y FROM vertex_table&#39;</span><span class="p">);</span>

 <span class="n">x</span> <span class="o">|</span> <span class="n">y</span>
<span class="c1">---+---</span>
 <span class="mi">2</span> <span class="o">|</span> <span class="mi">0</span>
 <span class="mi">4</span> <span class="o">|</span> <span class="mi">1</span>
 <span class="mi">4</span> <span class="o">|</span> <span class="mi">2</span>
 <span class="mi">4</span> <span class="o">|</span> <span class="mi">3</span>
 <span class="mi">2</span> <span class="o">|</span> <span class="mi">4</span>
 <span class="mi">0</span> <span class="o">|</span> <span class="mi">2</span>
<span class="p">(</span><span class="mi">6</span> <span class="k">rows</span><span class="p">)</span>

<span class="k">SELECT</span> <span class="n">round</span><span class="p">(</span><span class="n">st_area</span><span class="p">(</span><span class="n">ST_MakePolygon</span><span class="p">(</span><span class="n">ST_AddPoint</span><span class="p">(</span><span class="n">foo</span><span class="p">.</span><span class="n">openline</span><span class="p">,</span> <span class="n">ST_StartPoint</span><span class="p">(</span><span class="n">foo</span><span class="p">.</span><span class="n">openline</span><span class="p">))))::</span><span class="nb">numeric</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="k">as</span> <span class="n">st_area</span>
<span class="k">from</span> <span class="p">(</span><span class="k">select</span> <span class="n">st_makeline</span><span class="p">(</span><span class="n">points</span> <span class="k">order</span> <span class="k">by</span> <span class="n">id</span><span class="p">)</span>  <span class="k">as</span> <span class="n">openline</span> <span class="k">from</span>
<span class="p">(</span><span class="k">SELECT</span> <span class="n">st_makepoint</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span> <span class="k">as</span> <span class="n">points</span> <span class="p">,</span><span class="n">row_number</span><span class="p">()</span> <span class="n">over</span><span class="p">()</span> <span class="k">AS</span> <span class="n">id</span>
<span class="k">FROM</span> <span class="n">pgr_alphAShape</span><span class="p">(</span><span class="s1">&#39;SELECT id, x, y FROM vertex_table&#39;</span><span class="p">)</span>
<span class="p">)</span> <span class="k">as</span> <span class="n">a</span><span class="p">)</span> <span class="k">as</span> <span class="n">foo</span><span class="p">;</span>

 <span class="n">st_area</span>
<span class="c1">---------</span>
   <span class="mi">10</span><span class="p">.</span><span class="mi">00</span>
<span class="p">(</span><span class="mi">1</span> <span class="k">row</span><span class="p">)</span>


<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">pgr_alphAShape</span><span class="p">(</span><span class="s1">&#39;SELECT id::integer, st_x(the_geom)::float as x, st_y(the_geom)::float as y  FROM edge_table_vertices_pgr&#39;</span><span class="p">);</span>
  <span class="n">x</span>  <span class="o">|</span>  <span class="n">y</span>
<span class="c1">-----+-----</span>
 <span class="mi">0</span><span class="p">.</span><span class="mi">5</span> <span class="o">|</span> <span class="mi">3</span><span class="p">.</span><span class="mi">5</span>
   <span class="mi">0</span> <span class="o">|</span>   <span class="mi">2</span>
   <span class="mi">2</span> <span class="o">|</span>   <span class="mi">0</span>
   <span class="mi">4</span> <span class="o">|</span>   <span class="mi">1</span>
   <span class="mi">4</span> <span class="o">|</span>   <span class="mi">2</span>
   <span class="mi">4</span> <span class="o">|</span>   <span class="mi">3</span>
 <span class="mi">3</span><span class="p">.</span><span class="mi">5</span> <span class="o">|</span>   <span class="mi">4</span>
   <span class="mi">2</span> <span class="o">|</span>   <span class="mi">4</span>
<span class="p">(</span><span class="mi">8</span> <span class="k">rows</span><span class="p">)</span>

<span class="k">SELECT</span> <span class="n">round</span><span class="p">(</span><span class="n">st_area</span><span class="p">(</span><span class="n">ST_MakePolygon</span><span class="p">(</span><span class="n">ST_AddPoint</span><span class="p">(</span><span class="n">foo</span><span class="p">.</span><span class="n">openline</span><span class="p">,</span> <span class="n">ST_StartPoint</span><span class="p">(</span><span class="n">foo</span><span class="p">.</span><span class="n">openline</span><span class="p">))))::</span><span class="nb">numeric</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="k">as</span> <span class="n">st_area</span>
<span class="k">from</span> <span class="p">(</span><span class="k">select</span> <span class="n">st_makeline</span><span class="p">(</span><span class="n">points</span> <span class="k">order</span> <span class="k">by</span> <span class="n">id</span><span class="p">)</span>  <span class="k">as</span> <span class="n">openline</span> <span class="k">from</span>
<span class="p">(</span><span class="k">SELECT</span> <span class="n">st_makepoint</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span> <span class="k">as</span> <span class="n">points</span> <span class="p">,</span><span class="n">row_number</span><span class="p">()</span> <span class="n">over</span><span class="p">()</span> <span class="k">AS</span> <span class="n">id</span>
<span class="k">FROM</span> <span class="n">pgr_alphAShape</span><span class="p">(</span><span class="s1">&#39;SELECT id::integer, st_x(the_geom)::float as x, st_y(the_geom)::float as y  FROM edge_table_vertices_pgr&#39;</span><span class="p">)</span>
<span class="p">)</span> <span class="k">as</span> <span class="n">a</span><span class="p">)</span> <span class="k">as</span> <span class="n">foo</span><span class="p">;</span>

 <span class="n">st_area</span>
<span class="c1">---------</span>
   <span class="mi">10</span><span class="p">.</span><span class="mi">00</span>
<span class="p">(</span><span class="mi">1</span> <span class="k">row</span><span class="p">)</span>
</pre></div>
</div>
<p>Las consulta usa la red de ejemplo  <a class="reference internal" href="../../../doc/src/developer/sampledata.html#sampledata"><em>Datos Muestra</em></a></p>
</div>
<div class="section" id="see-also">
<h2>Véase también<a class="headerlink" href="#see-also" title="Enlazar permanentemente con este título">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="dd_driving_distance.html#pgr-driving-distance"><em>pgr_drivingDistance</em></a> - Distancia de conducción</li>
<li><a class="reference internal" href="dd_points_as_polygon.html#pgr-points-as-polygon"><em>pgr_pointsAsPolygon</em></a> - Polígono alrededor del conjunto de puntos</li>
</ul>
</div>
</div>


      </div>
      <div class="bottomnav">
      
        <p>
        «&#160;&#160;<a href="dd_driving_distance.html">pgr_drivingDistance</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../../../doc/index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="dd_points_as_polygon.html">pgr_pointsAsPolygon</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer">
        &copy; Copyright pgRouting Contributors - Version 2.0.0 (0a53b89 master).
      Actualizado por última vez en Sep 24, 2013.
      Creado con <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>
