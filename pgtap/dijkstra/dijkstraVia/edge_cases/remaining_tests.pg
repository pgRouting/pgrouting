BEGIN;

UPDATE edge_table SET cost = sign(cost), reverse_cost = sign(reverse_cost);
SELECT plan(4);


--- CHECKING WORKS WITH & WITOUT REVERSE COST
PREPARE v20q1 AS
SELECT * FROM pgr_dijkstravia(
    'SELECT id, source, target, cost, reverse_cost FROM edge_table',
    ARRAY[2,3,11]);
PREPARE v20q3 AS
SELECT * FROM pgr_dijkstravia(
    'SELECT id, source, target, cost, reverse_cost FROM edge_table',
    ARRAY[2,3,11]);

SELECT lives_ok('v20q1','with reverse cost 1');
SELECT lives_ok('v20q3','with reverse cost 3');

PREPARE v20q5 AS
SELECT * FROM pgr_dijkstravia(
    'SELECT id, source, target, cost FROM edge_table',
    ARRAY[2,3,11]);

PREPARE v20q6 AS
SELECT * FROM pgr_dijkstravia(
    'SELECT id, source, target, cost FROM edge_table',
    ARRAY[2,3,11]);


SELECT lives_ok('v20q5','without reverse cost 1');
SELECT lives_ok('v20q6','without reverse cost 2');

SELECT finish();
ROLLBACK;
